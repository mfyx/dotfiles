import{c as commonjsGlobal,e as effectScope,r as ref,m as markRaw,g as getCurrentInstance,i as inject,w as watch,a as reactive,b as isRef,d as isReactive,t as toRaw,o as onUnmounted,n as nextTick,f as toRefs,h as computed,j as defineComponent,k as openBlock,l as createBlock,p as withCtx,u as unref,q as normalizeStyle,_ as __unplugin_components_0,s as createBaseVNode,v as createTextVNode,x as toDisplayString,y as getAugmentedNamespace,z as codemirror$1,A as onMounted,B as createElementBlock,N as NIcon,C as createVNode,D as createApp}from"./vendor.dc5a152c.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))y(v);new MutationObserver(v=>{for(const b of v)if(b.type==="childList")for(const _ of b.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&y(_)}).observe(document,{childList:!0,subtree:!0});function l(v){const b={};return v.integrity&&(b.integrity=v.integrity),v.referrerpolicy&&(b.referrerPolicy=v.referrerpolicy),v.crossorigin==="use-credentials"?b.credentials="include":v.crossorigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function y(v){if(v.ep)return;v.ep=!0;const b=l(v);fetch(v.href,b)}})();var lsplugin_user={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(f,d){(function(l,y){f.exports=y()})(self,()=>(()=>{var l={227:(_,k,I)=>{var K=I(155);k.formatArgs=function(z){if(z[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+z[0]+(this.useColors?"%c ":" ")+"+"+_.exports.humanize(this.diff),!this.useColors)return;const P="color: "+this.color;z.splice(1,0,P,"color: inherit");let H=0,$=0;z[0].replace(/%[a-zA-Z%]/g,Q=>{Q!=="%%"&&(H++,Q==="%c"&&($=H))}),z.splice($,0,P)},k.save=function(z){try{z?k.storage.setItem("debug",z):k.storage.removeItem("debug")}catch{}},k.load=function(){let z;try{z=k.storage.getItem("debug")}catch{}return!z&&K!==void 0&&"env"in K&&(z=K.env.DEBUG),z},k.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},k.storage=function(){try{return localStorage}catch{}}(),k.destroy=(()=>{let z=!1;return()=>{z||(z=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),k.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],k.log=console.debug||console.log||(()=>{}),_.exports=I(447)(k);const{formatters:B}=_.exports;B.j=function(z){try{return JSON.stringify(z)}catch(P){return"[UnexpectedJSONParseError]: "+P.message}}},447:(_,k,I)=>{_.exports=function(K){function B(H){let $,Q,D,F=null;function E(...w){if(!E.enabled)return;const O=E,R=Number(new Date),C=R-($||R);O.diff=C,O.prev=$,O.curr=R,$=R,w[0]=B.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let h=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(m,M)=>{if(m==="%%")return"%";h++;const V=B.formatters[M];if(typeof V=="function"){const G=w[h];m=V.call(O,G),w.splice(h,1),h--}return m}),B.formatArgs.call(O,w),(O.log||B.log).apply(O,w)}return E.namespace=H,E.useColors=B.useColors(),E.color=B.selectColor(H),E.extend=z,E.destroy=B.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>F!==null?F:(Q!==B.namespaces&&(Q=B.namespaces,D=B.enabled(H)),D),set:w=>{F=w}}),typeof B.init=="function"&&B.init(E),E}function z(H,$){const Q=B(this.namespace+($===void 0?":":$)+H);return Q.log=this.log,Q}function P(H){return H.toString().substring(2,H.toString().length-2).replace(/\.\*\?$/,"*")}return B.debug=B,B.default=B,B.coerce=function(H){return H instanceof Error?H.stack||H.message:H},B.disable=function(){const H=[...B.names.map(P),...B.skips.map(P).map($=>"-"+$)].join(",");return B.enable(""),H},B.enable=function(H){let $;B.save(H),B.namespaces=H,B.names=[],B.skips=[];const Q=(typeof H=="string"?H:"").split(/[\s,]+/),D=Q.length;for($=0;$<D;$++)Q[$]&&((H=Q[$].replace(/\*/g,".*?"))[0]==="-"?B.skips.push(new RegExp("^"+H.slice(1)+"$")):B.names.push(new RegExp("^"+H+"$")))},B.enabled=function(H){if(H[H.length-1]==="*")return!0;let $,Q;for($=0,Q=B.skips.length;$<Q;$++)if(B.skips[$].test(H))return!1;for($=0,Q=B.names.length;$<Q;$++)if(B.names[$].test(H))return!0;return!1},B.humanize=I(824),B.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(K).forEach(H=>{B[H]=K[H]}),B.names=[],B.skips=[],B.formatters={},B.selectColor=function(H){let $=0;for(let Q=0;Q<H.length;Q++)$=($<<5)-$+H.charCodeAt(Q),$|=0;return B.colors[Math.abs($)%B.colors.length]},B.enable(B.load()),B}},856:function(_){_.exports=function(){function k(Fe){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe},k(Fe)}function I(Fe,xe){return I=Object.setPrototypeOf||function(Ae,ze){return Ae.__proto__=ze,Ae},I(Fe,xe)}function K(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(Fe,xe,Ae){return B=K()?Reflect.construct:function(ze,He,St){var ft=[null];ft.push.apply(ft,He);var an=new(Function.bind.apply(ze,ft));return St&&I(an,St.prototype),an},B.apply(null,arguments)}function z(Fe){return function(xe){if(Array.isArray(xe))return P(xe)}(Fe)||function(xe){if(typeof Symbol<"u"&&xe[Symbol.iterator]!=null||xe["@@iterator"]!=null)return Array.from(xe)}(Fe)||function(xe,Ae){if(xe){if(typeof xe=="string")return P(xe,Ae);var ze=Object.prototype.toString.call(xe).slice(8,-1);return ze==="Object"&&xe.constructor&&(ze=xe.constructor.name),ze==="Map"||ze==="Set"?Array.from(xe):ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze)?P(xe,Ae):void 0}}(Fe)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P(Fe,xe){(xe==null||xe>Fe.length)&&(xe=Fe.length);for(var Ae=0,ze=new Array(xe);Ae<xe;Ae++)ze[Ae]=Fe[Ae];return ze}var H=Object.hasOwnProperty,$=Object.setPrototypeOf,Q=Object.isFrozen,D=Object.getPrototypeOf,F=Object.getOwnPropertyDescriptor,E=Object.freeze,w=Object.seal,O=Object.create,R=typeof Reflect<"u"&&Reflect,C=R.apply,h=R.construct;C||(C=function(Fe,xe,Ae){return Fe.apply(xe,Ae)}),E||(E=function(Fe){return Fe}),w||(w=function(Fe){return Fe}),h||(h=function(Fe,xe){return B(Fe,z(xe))});var m,M=re(Array.prototype.forEach),V=re(Array.prototype.pop),G=re(Array.prototype.push),ae=re(String.prototype.toLowerCase),ce=re(String.prototype.match),ye=re(String.prototype.replace),Z=re(String.prototype.indexOf),fe=re(String.prototype.trim),ie=re(RegExp.prototype.test),_e=(m=TypeError,function(){for(var Fe=arguments.length,xe=new Array(Fe),Ae=0;Ae<Fe;Ae++)xe[Ae]=arguments[Ae];return h(m,xe)});function re(Fe){return function(xe){for(var Ae=arguments.length,ze=new Array(Ae>1?Ae-1:0),He=1;He<Ae;He++)ze[He-1]=arguments[He];return C(Fe,xe,ze)}}function se(Fe,xe){$&&$(Fe,null);for(var Ae=xe.length;Ae--;){var ze=xe[Ae];if(typeof ze=="string"){var He=ae(ze);He!==ze&&(Q(xe)||(xe[Ae]=He),ze=He)}Fe[ze]=!0}return Fe}function Te(Fe){var xe,Ae=O(null);for(xe in Fe)C(H,Fe,[xe])&&(Ae[xe]=Fe[xe]);return Ae}function U(Fe,xe){for(;Fe!==null;){var Ae=F(Fe,xe);if(Ae){if(Ae.get)return re(Ae.get);if(typeof Ae.value=="function")return re(Ae.value)}Fe=D(Fe)}return function(ze){return console.warn("fallback value for",ze),null}}var A=E(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),we=E(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ke=E(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ne=E(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ve=E(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),it=E(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),At=E(["#text"]),me=E(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ze=E(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ie=E(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Me=E(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vt=w(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pt=w(/<%[\w\W]*|[\w\W]*%>/gm),et=w(/^data-[\-\w.\u00B7-\uFFFF]/),Nt=w(/^aria-[\-\w]+$/),qt=w(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Rt=w(/^(?:\w+script|data):/i),ct=w(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ct=w(/^html$/i),zt=function(){return typeof window>"u"?null:window},lr=function(Fe,xe){if(k(Fe)!=="object"||typeof Fe.createPolicy!="function")return null;var Ae=null,ze="data-tt-policy-suffix";xe.currentScript&&xe.currentScript.hasAttribute(ze)&&(Ae=xe.currentScript.getAttribute(ze));var He="dompurify"+(Ae?"#"+Ae:"");try{return Fe.createPolicy(He,{createHTML:function(St){return St}})}catch{return console.warn("TrustedTypes policy "+He+" could not be created."),null}};return function Fe(){var xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zt(),Ae=function(q){return Fe(q)};if(Ae.version="2.3.8",Ae.removed=[],!xe||!xe.document||xe.document.nodeType!==9)return Ae.isSupported=!1,Ae;var ze=xe.document,He=xe.document,St=xe.DocumentFragment,ft=xe.HTMLTemplateElement,an=xe.Node,ur=xe.Element,Zn=xe.NodeFilter,Cn=xe.NamedNodeMap,tt=Cn===void 0?xe.NamedNodeMap||xe.MozNamedAttrMap:Cn,Ot=xe.HTMLFormElement,ht=xe.DOMParser,Ut=xe.trustedTypes,Jt=ur.prototype,cr=U(Jt,"cloneNode"),yt=U(Jt,"nextSibling"),Lr=U(Jt,"childNodes"),Nr=U(Jt,"parentNode");if(typeof ft=="function"){var fr=He.createElement("template");fr.content&&fr.content.ownerDocument&&(He=fr.content.ownerDocument)}var sn=lr(Ut,ze),hr=sn?sn.createHTML(""):"",ot=He,dr=ot.implementation,Bn=ot.createNodeIterator,Qn=ot.createDocumentFragment,An=ot.getElementsByTagName,Yn=ze.importNode,pr={};try{pr=Te(He).documentMode?He.documentMode:{}}catch{}var _t={};Ae.isSupported=typeof Nr=="function"&&dr&&dr.createHTMLDocument!==void 0&&pr!==9;var Xn,En,Kt=vt,Sn=pt,oi=et,Vr=Nt,Or=Rt,Gr=ct,er=qt,Et=null,Jr=se({},[].concat(z(A),z(we),z(ke),z(Ve),z(At))),kt=null,gr=se({},[].concat(z(me),z(Ze),z(Ie),z(Me))),lt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Wn=null,Wt=null,Zr=!0,mr=!0,Ir=!1,kn=!1,Xt=!1,Tn=!1,vr=!1,It=!1,yr=!1,tr=!1,nr=!0,pn=!0,$n=!1,Zt={},Un=null,_r=se({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Hn=null,ln=se({},["audio","video","img","source","image","track"]),en=null,at=se({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jn="http://www.w3.org/1998/Math/MathML",gn="http://www.w3.org/2000/svg",mn="http://www.w3.org/1999/xhtml",un=mn,wr=!1,Rn=["application/xhtml+xml","text/html"],cn="text/html",vn=null,Qr=He.createElement("form"),br=function(q){return q instanceof RegExp||q instanceof Function},xr=function(q){vn&&vn===q||(q&&k(q)==="object"||(q={}),q=Te(q),Et="ALLOWED_TAGS"in q?se({},q.ALLOWED_TAGS):Jr,kt="ALLOWED_ATTR"in q?se({},q.ALLOWED_ATTR):gr,en="ADD_URI_SAFE_ATTR"in q?se(Te(at),q.ADD_URI_SAFE_ATTR):at,Hn="ADD_DATA_URI_TAGS"in q?se(Te(ln),q.ADD_DATA_URI_TAGS):ln,Un="FORBID_CONTENTS"in q?se({},q.FORBID_CONTENTS):_r,Wn="FORBID_TAGS"in q?se({},q.FORBID_TAGS):{},Wt="FORBID_ATTR"in q?se({},q.FORBID_ATTR):{},Zt="USE_PROFILES"in q&&q.USE_PROFILES,Zr=q.ALLOW_ARIA_ATTR!==!1,mr=q.ALLOW_DATA_ATTR!==!1,Ir=q.ALLOW_UNKNOWN_PROTOCOLS||!1,kn=q.SAFE_FOR_TEMPLATES||!1,Xt=q.WHOLE_DOCUMENT||!1,It=q.RETURN_DOM||!1,yr=q.RETURN_DOM_FRAGMENT||!1,tr=q.RETURN_TRUSTED_TYPE||!1,vr=q.FORCE_BODY||!1,nr=q.SANITIZE_DOM!==!1,pn=q.KEEP_CONTENT!==!1,$n=q.IN_PLACE||!1,er=q.ALLOWED_URI_REGEXP||er,un=q.NAMESPACE||mn,q.CUSTOM_ELEMENT_HANDLING&&br(q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(lt.tagNameCheck=q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),q.CUSTOM_ELEMENT_HANDLING&&br(q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(lt.attributeNameCheck=q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),q.CUSTOM_ELEMENT_HANDLING&&typeof q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(lt.allowCustomizedBuiltInElements=q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xn=Xn=Rn.indexOf(q.PARSER_MEDIA_TYPE)===-1?cn:q.PARSER_MEDIA_TYPE,En=Xn==="application/xhtml+xml"?function(Ce){return Ce}:ae,kn&&(mr=!1),yr&&(It=!0),Zt&&(Et=se({},z(At)),kt=[],Zt.html===!0&&(se(Et,A),se(kt,me)),Zt.svg===!0&&(se(Et,we),se(kt,Ze),se(kt,Me)),Zt.svgFilters===!0&&(se(Et,ke),se(kt,Ze),se(kt,Me)),Zt.mathMl===!0&&(se(Et,Ve),se(kt,Ie),se(kt,Me))),q.ADD_TAGS&&(Et===Jr&&(Et=Te(Et)),se(Et,q.ADD_TAGS)),q.ADD_ATTR&&(kt===gr&&(kt=Te(kt)),se(kt,q.ADD_ATTR)),q.ADD_URI_SAFE_ATTR&&se(en,q.ADD_URI_SAFE_ATTR),q.FORBID_CONTENTS&&(Un===_r&&(Un=Te(Un)),se(Un,q.FORBID_CONTENTS)),pn&&(Et["#text"]=!0),Xt&&se(Et,["html","head","body"]),Et.table&&(se(Et,["tbody"]),delete Wn.tbody),E&&E(q),vn=q)},Vt=se({},["mi","mo","mn","ms","mtext"]),Ln=se({},["foreignobject","desc","title","annotation-xml"]),Cr=se({},["title","style","font","a","script"]),yn=se({},we);se(yn,ke),se(yn,Ne);var Ar=se({},Ve);se(Ar,it);var Qt=function(q){var Ce=Nr(q);Ce&&Ce.tagName||(Ce={namespaceURI:mn,tagName:"template"});var be=ae(q.tagName),Qe=ae(Ce.tagName);return q.namespaceURI===gn?Ce.namespaceURI===mn?be==="svg":Ce.namespaceURI===jn?be==="svg"&&(Qe==="annotation-xml"||Vt[Qe]):Boolean(yn[be]):q.namespaceURI===jn?Ce.namespaceURI===mn?be==="math":Ce.namespaceURI===gn?be==="math"&&Ln[Qe]:Boolean(Ar[be]):q.namespaceURI===mn&&!(Ce.namespaceURI===gn&&!Ln[Qe])&&!(Ce.namespaceURI===jn&&!Vt[Qe])&&!Ar[be]&&(Cr[be]||!yn[be])},tn=function(q){G(Ae.removed,{element:q});try{q.parentNode.removeChild(q)}catch{try{q.outerHTML=hr}catch{q.remove()}}},Nn=function(q,Ce){try{G(Ae.removed,{attribute:Ce.getAttributeNode(q),from:Ce})}catch{G(Ae.removed,{attribute:null,from:Ce})}if(Ce.removeAttribute(q),q==="is"&&!kt[q])if(It||yr)try{tn(Ce)}catch{}else try{Ce.setAttribute(q,"")}catch{}},Mr=function(q){var Ce,be;if(vr)q="<remove></remove>"+q;else{var Qe=ce(q,/^[\r\n\t ]+/);be=Qe&&Qe[0]}Xn==="application/xhtml+xml"&&(q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+q+"</body></html>");var mt=sn?sn.createHTML(q):q;if(un===mn)try{Ce=new ht().parseFromString(mt,Xn)}catch{}if(!Ce||!Ce.documentElement){Ce=dr.createDocument(un,"template",null);try{Ce.documentElement.innerHTML=wr?"":mt}catch{}}var t=Ce.body||Ce.documentElement;return q&&be&&t.insertBefore(He.createTextNode(be),t.childNodes[0]||null),un===mn?An.call(Ce,Xt?"html":"body")[0]:Xt?Ce.documentElement:t},Er=function(q){return Bn.call(q.ownerDocument||q,q,Zn.SHOW_ELEMENT|Zn.SHOW_COMMENT|Zn.SHOW_TEXT,null,!1)},ai=function(q){return q instanceof Ot&&(typeof q.nodeName!="string"||typeof q.textContent!="string"||typeof q.removeChild!="function"||!(q.attributes instanceof tt)||typeof q.removeAttribute!="function"||typeof q.setAttribute!="function"||typeof q.namespaceURI!="string"||typeof q.insertBefore!="function")},On=function(q){return k(an)==="object"?q instanceof an:q&&k(q)==="object"&&typeof q.nodeType=="number"&&typeof q.nodeName=="string"},$t=function(q,Ce,be){_t[q]&&M(_t[q],function(Qe){Qe.call(Ae,Ce,be,vn)})},rr=function(q){var Ce;if($t("beforeSanitizeElements",q,null),ai(q)||ie(/[\u0080-\uFFFF]/,q.nodeName))return tn(q),!0;var be=En(q.nodeName);if($t("uponSanitizeElement",q,{tagName:be,allowedTags:Et}),q.hasChildNodes()&&!On(q.firstElementChild)&&(!On(q.content)||!On(q.content.firstElementChild))&&ie(/<[/\w]/g,q.innerHTML)&&ie(/<[/\w]/g,q.textContent)||be==="select"&&ie(/<template/i,q.innerHTML))return tn(q),!0;if(!Et[be]||Wn[be]){if(!Wn[be]&&Sr(be)&&(lt.tagNameCheck instanceof RegExp&&ie(lt.tagNameCheck,be)||lt.tagNameCheck instanceof Function&&lt.tagNameCheck(be)))return!1;if(pn&&!Un[be]){var Qe=Nr(q)||q.parentNode,mt=Lr(q)||q.childNodes;if(mt&&Qe)for(var t=mt.length-1;t>=0;--t)Qe.insertBefore(cr(mt[t],!0),yt(q))}return tn(q),!0}return q instanceof ur&&!Qt(q)?(tn(q),!0):be!=="noscript"&&be!=="noembed"||!ie(/<\/no(script|embed)/i,q.innerHTML)?(kn&&q.nodeType===3&&(Ce=q.textContent,Ce=ye(Ce,Kt," "),Ce=ye(Ce,Sn," "),q.textContent!==Ce&&(G(Ae.removed,{element:q.cloneNode()}),q.textContent=Ce)),$t("afterSanitizeElements",q,null),!1):(tn(q),!0)},Fr=function(q,Ce,be){if(nr&&(Ce==="id"||Ce==="name")&&(be in He||be in Qr))return!1;if(!(mr&&!Wt[Ce]&&ie(oi,Ce))){if(!(Zr&&ie(Vr,Ce))){if(!kt[Ce]||Wt[Ce]){if(!(Sr(q)&&(lt.tagNameCheck instanceof RegExp&&ie(lt.tagNameCheck,q)||lt.tagNameCheck instanceof Function&&lt.tagNameCheck(q))&&(lt.attributeNameCheck instanceof RegExp&&ie(lt.attributeNameCheck,Ce)||lt.attributeNameCheck instanceof Function&&lt.attributeNameCheck(Ce))||Ce==="is"&&lt.allowCustomizedBuiltInElements&&(lt.tagNameCheck instanceof RegExp&&ie(lt.tagNameCheck,be)||lt.tagNameCheck instanceof Function&&lt.tagNameCheck(be))))return!1}else if(!en[Ce]){if(!ie(er,ye(be,Gr,""))){if((Ce!=="src"&&Ce!=="xlink:href"&&Ce!=="href"||q==="script"||Z(be,"data:")!==0||!Hn[q])&&!(Ir&&!ie(Or,ye(be,Gr,"")))){if(be)return!1}}}}}return!0},Sr=function(q){return q.indexOf("-")>0},Pr=function(q){var Ce,be,Qe,mt;$t("beforeSanitizeAttributes",q,null);var t=q.attributes;if(t){var r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:kt};for(mt=t.length;mt--;){var i=Ce=t[mt],a=i.name,s=i.namespaceURI;if(be=a==="value"?Ce.value:fe(Ce.value),Qe=En(a),r.attrName=Qe,r.attrValue=be,r.keepAttr=!0,r.forceKeepAttr=void 0,$t("uponSanitizeAttribute",q,r),be=r.attrValue,!r.forceKeepAttr&&(Nn(a,q),r.keepAttr))if(ie(/\/>/i,be))Nn(a,q);else{kn&&(be=ye(be,Kt," "),be=ye(be,Sn," "));var u=En(q.nodeName);if(Fr(u,Qe,be))try{s?q.setAttributeNS(s,a,be):q.setAttribute(a,be),V(Ae.removed)}catch{}}}$t("afterSanitizeAttributes",q,null)}},st=function q(Ce){var be,Qe=Er(Ce);for($t("beforeSanitizeShadowDOM",Ce,null);be=Qe.nextNode();)$t("uponSanitizeShadowNode",be,null),rr(be)||(be.content instanceof St&&q(be.content),Pr(be));$t("afterSanitizeShadowDOM",Ce,null)};return Ae.sanitize=function(q,Ce){var be,Qe,mt,t,r;if((wr=!q)&&(q="<!-->"),typeof q!="string"&&!On(q)){if(typeof q.toString!="function")throw _e("toString is not a function");if(typeof(q=q.toString())!="string")throw _e("dirty is not a string, aborting")}if(!Ae.isSupported){if(k(xe.toStaticHTML)==="object"||typeof xe.toStaticHTML=="function"){if(typeof q=="string")return xe.toStaticHTML(q);if(On(q))return xe.toStaticHTML(q.outerHTML)}return q}if(Tn||xr(Ce),Ae.removed=[],typeof q=="string"&&($n=!1),$n){if(q.nodeName){var i=En(q.nodeName);if(!Et[i]||Wn[i])throw _e("root node is forbidden and cannot be sanitized in-place")}}else if(q instanceof an)(Qe=(be=Mr("<!---->")).ownerDocument.importNode(q,!0)).nodeType===1&&Qe.nodeName==="BODY"||Qe.nodeName==="HTML"?be=Qe:be.appendChild(Qe);else{if(!It&&!kn&&!Xt&&q.indexOf("<")===-1)return sn&&tr?sn.createHTML(q):q;if(!(be=Mr(q)))return It?null:tr?hr:""}be&&vr&&tn(be.firstChild);for(var a=Er($n?q:be);mt=a.nextNode();)mt.nodeType===3&&mt===t||rr(mt)||(mt.content instanceof St&&st(mt.content),Pr(mt),t=mt);if(t=null,$n)return q;if(It){if(yr)for(r=Qn.call(be.ownerDocument);be.firstChild;)r.appendChild(be.firstChild);else r=be;return kt.shadowroot&&(r=Yn.call(ze,r,!0)),r}var s=Xt?be.outerHTML:be.innerHTML;return Xt&&Et["!doctype"]&&be.ownerDocument&&be.ownerDocument.doctype&&be.ownerDocument.doctype.name&&ie(Ct,be.ownerDocument.doctype.name)&&(s="<!DOCTYPE "+be.ownerDocument.doctype.name+`>
`+s),kn&&(s=ye(s,Kt," "),s=ye(s,Sn," ")),sn&&tr?sn.createHTML(s):s},Ae.setConfig=function(q){xr(q),Tn=!0},Ae.clearConfig=function(){vn=null,Tn=!1},Ae.isValidAttribute=function(q,Ce,be){vn||xr({});var Qe=En(q),mt=En(Ce);return Fr(Qe,mt,be)},Ae.addHook=function(q,Ce){typeof Ce=="function"&&(_t[q]=_t[q]||[],G(_t[q],Ce))},Ae.removeHook=function(q){if(_t[q])return V(_t[q])},Ae.removeHooks=function(q){_t[q]&&(_t[q]=[])},Ae.removeAllHooks=function(){_t={}},Ae}()}()},729:_=>{var k=Object.prototype.hasOwnProperty,I="~";function K(){}function B($,Q,D){this.fn=$,this.context=Q,this.once=D||!1}function z($,Q,D,F,E){if(typeof D!="function")throw new TypeError("The listener must be a function");var w=new B(D,F||$,E),O=I?I+Q:Q;return $._events[O]?$._events[O].fn?$._events[O]=[$._events[O],w]:$._events[O].push(w):($._events[O]=w,$._eventsCount++),$}function P($,Q){--$._eventsCount==0?$._events=new K:delete $._events[Q]}function H(){this._events=new K,this._eventsCount=0}Object.create&&(K.prototype=Object.create(null),new K().__proto__||(I=!1)),H.prototype.eventNames=function(){var $,Q,D=[];if(this._eventsCount===0)return D;for(Q in $=this._events)k.call($,Q)&&D.push(I?Q.slice(1):Q);return Object.getOwnPropertySymbols?D.concat(Object.getOwnPropertySymbols($)):D},H.prototype.listeners=function($){var Q=I?I+$:$,D=this._events[Q];if(!D)return[];if(D.fn)return[D.fn];for(var F=0,E=D.length,w=new Array(E);F<E;F++)w[F]=D[F].fn;return w},H.prototype.listenerCount=function($){var Q=I?I+$:$,D=this._events[Q];return D?D.fn?1:D.length:0},H.prototype.emit=function($,Q,D,F,E,w){var O=I?I+$:$;if(!this._events[O])return!1;var R,C,h=this._events[O],m=arguments.length;if(h.fn){switch(h.once&&this.removeListener($,h.fn,void 0,!0),m){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,Q),!0;case 3:return h.fn.call(h.context,Q,D),!0;case 4:return h.fn.call(h.context,Q,D,F),!0;case 5:return h.fn.call(h.context,Q,D,F,E),!0;case 6:return h.fn.call(h.context,Q,D,F,E,w),!0}for(C=1,R=new Array(m-1);C<m;C++)R[C-1]=arguments[C];h.fn.apply(h.context,R)}else{var M,V=h.length;for(C=0;C<V;C++)switch(h[C].once&&this.removeListener($,h[C].fn,void 0,!0),m){case 1:h[C].fn.call(h[C].context);break;case 2:h[C].fn.call(h[C].context,Q);break;case 3:h[C].fn.call(h[C].context,Q,D);break;case 4:h[C].fn.call(h[C].context,Q,D,F);break;default:if(!R)for(M=1,R=new Array(m-1);M<m;M++)R[M-1]=arguments[M];h[C].fn.apply(h[C].context,R)}}return!0},H.prototype.on=function($,Q,D){return z(this,$,Q,D,!1)},H.prototype.once=function($,Q,D){return z(this,$,Q,D,!0)},H.prototype.removeListener=function($,Q,D,F){var E=I?I+$:$;if(!this._events[E])return this;if(!Q)return P(this,E),this;var w=this._events[E];if(w.fn)w.fn!==Q||F&&!w.once||D&&w.context!==D||P(this,E);else{for(var O=0,R=[],C=w.length;O<C;O++)(w[O].fn!==Q||F&&!w[O].once||D&&w[O].context!==D)&&R.push(w[O]);R.length?this._events[E]=R.length===1?R[0]:R:P(this,E)}return this},H.prototype.removeAllListeners=function($){var Q;return $?(Q=I?I+$:$,this._events[Q]&&P(this,Q)):(this._events=new K,this._eventsCount=0),this},H.prototype.off=H.prototype.removeListener,H.prototype.addListener=H.prototype.on,H.prefixed=I,H.EventEmitter=H,_.exports=H},824:_=>{var k=1e3,I=60*k,K=60*I,B=24*K;function z(P,H,$,Q){var D=H>=1.5*$;return Math.round(P/$)+" "+Q+(D?"s":"")}_.exports=function(P,H){H=H||{};var $,Q,D=typeof P;if(D==="string"&&P.length>0)return function(F){if(!((F=String(F)).length>100)){var E=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(E){var w=parseFloat(E[1]);switch((E[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*w;case"weeks":case"week":case"w":return 6048e5*w;case"days":case"day":case"d":return w*B;case"hours":case"hour":case"hrs":case"hr":case"h":return w*K;case"minutes":case"minute":case"mins":case"min":case"m":return w*I;case"seconds":case"second":case"secs":case"sec":case"s":return w*k;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}(P);if(D==="number"&&isFinite(P))return H.long?($=P,(Q=Math.abs($))>=B?z($,Q,B,"day"):Q>=K?z($,Q,K,"hour"):Q>=I?z($,Q,I,"minute"):Q>=k?z($,Q,k,"second"):$+" ms"):function(F){var E=Math.abs(F);return E>=B?Math.round(F/B)+"d":E>=K?Math.round(F/K)+"h":E>=I?Math.round(F/I)+"m":E>=k?Math.round(F/k)+"s":F+"ms"}(P);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(P))}},520:(_,k,I)=>{var K=I(155),B=K.platform==="win32",z=I(539);function P(h,m){for(var M=[],V=0;V<h.length;V++){var G=h[V];G&&G!=="."&&(G===".."?M.length&&M[M.length-1]!==".."?M.pop():m&&M.push(".."):M.push(G))}return M}function H(h){for(var m=h.length-1,M=0;M<=m&&!h[M];M++);for(var V=m;V>=0&&!h[V];V--);return M===0&&V===m?h:M>V?[]:h.slice(M,V+1)}var $=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,Q=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,D={};function F(h){var m=$.exec(h),M=(m[1]||"")+(m[2]||""),V=m[3]||"",G=Q.exec(V);return[M,G[1],G[2],G[3]]}function E(h){var m=$.exec(h),M=m[1]||"",V=!!M&&M[1]!==":";return{device:M,isUnc:V,isAbsolute:V||!!m[2],tail:m[3]}}function w(h){return"\\\\"+h.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}D.resolve=function(){for(var h="",m="",M=!1,V=arguments.length-1;V>=-1;V--){var G;if(V>=0?G=arguments[V]:h?(G=K.env["="+h])&&G.substr(0,3).toLowerCase()===h.toLowerCase()+"\\"||(G=h+"\\"):G=K.cwd(),!z.isString(G))throw new TypeError("Arguments to path.resolve must be strings");if(G){var ae=E(G),ce=ae.device,ye=ae.isUnc,Z=ae.isAbsolute,fe=ae.tail;if((!ce||!h||ce.toLowerCase()===h.toLowerCase())&&(h||(h=ce),M||(m=fe+"\\"+m,M=Z),h&&M))break}}return ye&&(h=w(h)),h+(M?"\\":"")+(m=P(m.split(/[\\\/]+/),!M).join("\\"))||"."},D.normalize=function(h){var m=E(h),M=m.device,V=m.isUnc,G=m.isAbsolute,ae=m.tail,ce=/[\\\/]$/.test(ae);return(ae=P(ae.split(/[\\\/]+/),!G).join("\\"))||G||(ae="."),ae&&ce&&(ae+="\\"),V&&(M=w(M)),M+(G?"\\":"")+ae},D.isAbsolute=function(h){return E(h).isAbsolute},D.join=function(){for(var h=[],m=0;m<arguments.length;m++){var M=arguments[m];if(!z.isString(M))throw new TypeError("Arguments to path.join must be strings");M&&h.push(M)}var V=h.join("\\");return/^[\\\/]{2}[^\\\/]/.test(h[0])||(V=V.replace(/^[\\\/]{2,}/,"\\")),D.normalize(V)},D.relative=function(h,m){h=D.resolve(h),m=D.resolve(m);for(var M=h.toLowerCase(),V=m.toLowerCase(),G=H(m.split("\\")),ae=H(M.split("\\")),ce=H(V.split("\\")),ye=Math.min(ae.length,ce.length),Z=ye,fe=0;fe<ye;fe++)if(ae[fe]!==ce[fe]){Z=fe;break}if(Z==0)return m;var ie=[];for(fe=Z;fe<ae.length;fe++)ie.push("..");return(ie=ie.concat(G.slice(Z))).join("\\")},D._makeLong=function(h){if(!z.isString(h))return h;if(!h)return"";var m=D.resolve(h);return/^[a-zA-Z]\:\\/.test(m)?"\\\\?\\"+m:/^\\\\[^?.]/.test(m)?"\\\\?\\UNC\\"+m.substring(2):h},D.dirname=function(h){var m=F(h),M=m[0],V=m[1];return M||V?(V&&(V=V.substr(0,V.length-1)),M+V):"."},D.basename=function(h,m){var M=F(h)[2];return m&&M.substr(-1*m.length)===m&&(M=M.substr(0,M.length-m.length)),M},D.extname=function(h){return F(h)[3]},D.format=function(h){if(!z.isObject(h))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof h);var m=h.root||"";if(!z.isString(m))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof h.root);var M=h.dir,V=h.base||"";return M?M[M.length-1]===D.sep?M+V:M+D.sep+V:V},D.parse=function(h){if(!z.isString(h))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof h);var m=F(h);if(!m||m.length!==4)throw new TypeError("Invalid path '"+h+"'");return{root:m[0],dir:m[0]+m[1].slice(0,-1),base:m[2],ext:m[3],name:m[2].slice(0,m[2].length-m[3].length)}},D.sep="\\",D.delimiter=";";var O=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,R={};function C(h){return O.exec(h).slice(1)}R.resolve=function(){for(var h="",m=!1,M=arguments.length-1;M>=-1&&!m;M--){var V=M>=0?arguments[M]:K.cwd();if(!z.isString(V))throw new TypeError("Arguments to path.resolve must be strings");V&&(h=V+"/"+h,m=V[0]==="/")}return(m?"/":"")+(h=P(h.split("/"),!m).join("/"))||"."},R.normalize=function(h){var m=R.isAbsolute(h),M=h&&h[h.length-1]==="/";return(h=P(h.split("/"),!m).join("/"))||m||(h="."),h&&M&&(h+="/"),(m?"/":"")+h},R.isAbsolute=function(h){return h.charAt(0)==="/"},R.join=function(){for(var h="",m=0;m<arguments.length;m++){var M=arguments[m];if(!z.isString(M))throw new TypeError("Arguments to path.join must be strings");M&&(h+=h?"/"+M:M)}return R.normalize(h)},R.relative=function(h,m){h=R.resolve(h).substr(1),m=R.resolve(m).substr(1);for(var M=H(h.split("/")),V=H(m.split("/")),G=Math.min(M.length,V.length),ae=G,ce=0;ce<G;ce++)if(M[ce]!==V[ce]){ae=ce;break}var ye=[];for(ce=ae;ce<M.length;ce++)ye.push("..");return(ye=ye.concat(V.slice(ae))).join("/")},R._makeLong=function(h){return h},R.dirname=function(h){var m=C(h),M=m[0],V=m[1];return M||V?(V&&(V=V.substr(0,V.length-1)),M+V):"."},R.basename=function(h,m){var M=C(h)[2];return m&&M.substr(-1*m.length)===m&&(M=M.substr(0,M.length-m.length)),M},R.extname=function(h){return C(h)[3]},R.format=function(h){if(!z.isObject(h))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof h);var m=h.root||"";if(!z.isString(m))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof h.root);return(h.dir?h.dir+R.sep:"")+(h.base||"")},R.parse=function(h){if(!z.isString(h))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof h);var m=C(h);if(!m||m.length!==4)throw new TypeError("Invalid path '"+h+"'");return m[1]=m[1]||"",m[2]=m[2]||"",m[3]=m[3]||"",{root:m[0],dir:m[0]+m[1].slice(0,-1),base:m[2],ext:m[3],name:m[2].slice(0,m[2].length-m[3].length)}},R.sep="/",R.delimiter=":",_.exports=B?D:R,_.exports.posix=R,_.exports.win32=D},155:_=>{var k,I,K=_.exports={};function B(){throw new Error("setTimeout has not been defined")}function z(){throw new Error("clearTimeout has not been defined")}function P(R){if(k===setTimeout)return setTimeout(R,0);if((k===B||!k)&&setTimeout)return k=setTimeout,setTimeout(R,0);try{return k(R,0)}catch{try{return k.call(null,R,0)}catch{return k.call(this,R,0)}}}(function(){try{k=typeof setTimeout=="function"?setTimeout:B}catch{k=B}try{I=typeof clearTimeout=="function"?clearTimeout:z}catch{I=z}})();var H,$=[],Q=!1,D=-1;function F(){Q&&H&&(Q=!1,H.length?$=H.concat($):D=-1,$.length&&E())}function E(){if(!Q){var R=P(F);Q=!0;for(var C=$.length;C;){for(H=$,$=[];++D<C;)H&&H[D].run();D=-1,C=$.length}H=null,Q=!1,function(h){if(I===clearTimeout)return clearTimeout(h);if((I===z||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(h);try{I(h)}catch{try{return I.call(null,h)}catch{return I.call(this,h)}}}(R)}}function w(R,C){this.fun=R,this.array=C}function O(){}K.nextTick=function(R){var C=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)C[h-1]=arguments[h];$.push(new w(R,C)),$.length!==1||Q||P(E)},w.prototype.run=function(){this.fun.apply(null,this.array)},K.title="browser",K.browser=!0,K.env={},K.argv=[],K.version="",K.versions={},K.on=O,K.addListener=O,K.once=O,K.off=O,K.removeListener=O,K.removeAllListeners=O,K.emit=O,K.prependListener=O,K.prependOnceListener=O,K.listeners=function(R){return[]},K.binding=function(R){throw new Error("process.binding is not supported")},K.cwd=function(){return"/"},K.chdir=function(R){throw new Error("process.chdir is not supported")},K.umask=function(){return 0}},496:_=>{typeof Object.create=="function"?_.exports=function(k,I){k.super_=I,k.prototype=Object.create(I.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}})}:_.exports=function(k,I){k.super_=I;var K=function(){};K.prototype=I.prototype,k.prototype=new K,k.prototype.constructor=k}},384:_=>{_.exports=function(k){return k&&typeof k=="object"&&typeof k.copy=="function"&&typeof k.fill=="function"&&typeof k.readUInt8=="function"}},539:(_,k,I)=>{var K=I(155),B=/%[sdj%]/g;k.format=function(re){if(!h(re)){for(var se=[],Te=0;Te<arguments.length;Te++)se.push(H(arguments[Te]));return se.join(" ")}Te=1;for(var U=arguments,A=U.length,we=String(re).replace(B,function(Ne){if(Ne==="%%")return"%";if(Te>=A)return Ne;switch(Ne){case"%s":return String(U[Te++]);case"%d":return Number(U[Te++]);case"%j":try{return JSON.stringify(U[Te++])}catch{return"[Circular]"}default:return Ne}}),ke=U[Te];Te<A;ke=U[++Te])R(ke)||!V(ke)?we+=" "+ke:we+=" "+H(ke);return we},k.deprecate=function(re,se){if(m(I.g.process))return function(){return k.deprecate(re,se).apply(this,arguments)};if(K.noDeprecation===!0)return re;var Te=!1;return function(){if(!Te){if(K.throwDeprecation)throw new Error(se);K.traceDeprecation?console.trace(se):console.error(se),Te=!0}return re.apply(this,arguments)}};var z,P={};function H(re,se){var Te={seen:[],stylize:Q};return arguments.length>=3&&(Te.depth=arguments[2]),arguments.length>=4&&(Te.colors=arguments[3]),O(se)?Te.showHidden=se:se&&k._extend(Te,se),m(Te.showHidden)&&(Te.showHidden=!1),m(Te.depth)&&(Te.depth=2),m(Te.colors)&&(Te.colors=!1),m(Te.customInspect)&&(Te.customInspect=!0),Te.colors&&(Te.stylize=$),D(Te,re,Te.depth)}function $(re,se){var Te=H.styles[se];return Te?"\x1B["+H.colors[Te][0]+"m"+re+"\x1B["+H.colors[Te][1]+"m":re}function Q(re,se){return re}function D(re,se,Te){if(re.customInspect&&se&&ce(se.inspect)&&se.inspect!==k.inspect&&(!se.constructor||se.constructor.prototype!==se)){var U=se.inspect(Te,re);return h(U)||(U=D(re,U,Te)),U}var A=function(Ze,Ie){if(m(Ie))return Ze.stylize("undefined","undefined");if(h(Ie)){var Me="'"+JSON.stringify(Ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Ze.stylize(Me,"string")}return C(Ie)?Ze.stylize(""+Ie,"number"):O(Ie)?Ze.stylize(""+Ie,"boolean"):R(Ie)?Ze.stylize("null","null"):void 0}(re,se);if(A)return A;var we=Object.keys(se),ke=function(Ze){var Ie={};return Ze.forEach(function(Me,vt){Ie[Me]=!0}),Ie}(we);if(re.showHidden&&(we=Object.getOwnPropertyNames(se)),ae(se)&&(we.indexOf("message")>=0||we.indexOf("description")>=0))return F(se);if(we.length===0){if(ce(se)){var Ne=se.name?": "+se.name:"";return re.stylize("[Function"+Ne+"]","special")}if(M(se))return re.stylize(RegExp.prototype.toString.call(se),"regexp");if(G(se))return re.stylize(Date.prototype.toString.call(se),"date");if(ae(se))return F(se)}var Ve,it="",At=!1,me=["{","}"];return w(se)&&(At=!0,me=["[","]"]),ce(se)&&(it=" [Function"+(se.name?": "+se.name:"")+"]"),M(se)&&(it=" "+RegExp.prototype.toString.call(se)),G(se)&&(it=" "+Date.prototype.toUTCString.call(se)),ae(se)&&(it=" "+F(se)),we.length!==0||At&&se.length!=0?Te<0?M(se)?re.stylize(RegExp.prototype.toString.call(se),"regexp"):re.stylize("[Object]","special"):(re.seen.push(se),Ve=At?function(Ze,Ie,Me,vt,pt){for(var et=[],Nt=0,qt=Ie.length;Nt<qt;++Nt)_e(Ie,String(Nt))?et.push(E(Ze,Ie,Me,vt,String(Nt),!0)):et.push("");return pt.forEach(function(Rt){Rt.match(/^\d+$/)||et.push(E(Ze,Ie,Me,vt,Rt,!0))}),et}(re,se,Te,ke,we):we.map(function(Ze){return E(re,se,Te,ke,Ze,At)}),re.seen.pop(),function(Ze,Ie,Me){return Ze.reduce(function(vt,pt){return pt.indexOf(`
`),vt+pt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Me[0]+(Ie===""?"":Ie+`
 `)+" "+Ze.join(`,
  `)+" "+Me[1]:Me[0]+Ie+" "+Ze.join(", ")+" "+Me[1]}(Ve,it,me)):me[0]+it+me[1]}function F(re){return"["+Error.prototype.toString.call(re)+"]"}function E(re,se,Te,U,A,we){var ke,Ne,Ve;if((Ve=Object.getOwnPropertyDescriptor(se,A)||{value:se[A]}).get?Ne=Ve.set?re.stylize("[Getter/Setter]","special"):re.stylize("[Getter]","special"):Ve.set&&(Ne=re.stylize("[Setter]","special")),_e(U,A)||(ke="["+A+"]"),Ne||(re.seen.indexOf(Ve.value)<0?(Ne=R(Te)?D(re,Ve.value,null):D(re,Ve.value,Te-1)).indexOf(`
`)>-1&&(Ne=we?Ne.split(`
`).map(function(it){return"  "+it}).join(`
`).substr(2):`
`+Ne.split(`
`).map(function(it){return"   "+it}).join(`
`)):Ne=re.stylize("[Circular]","special")),m(ke)){if(we&&A.match(/^\d+$/))return Ne;(ke=JSON.stringify(""+A)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ke=ke.substr(1,ke.length-2),ke=re.stylize(ke,"name")):(ke=ke.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ke=re.stylize(ke,"string"))}return ke+": "+Ne}function w(re){return Array.isArray(re)}function O(re){return typeof re=="boolean"}function R(re){return re===null}function C(re){return typeof re=="number"}function h(re){return typeof re=="string"}function m(re){return re===void 0}function M(re){return V(re)&&ye(re)==="[object RegExp]"}function V(re){return typeof re=="object"&&re!==null}function G(re){return V(re)&&ye(re)==="[object Date]"}function ae(re){return V(re)&&(ye(re)==="[object Error]"||re instanceof Error)}function ce(re){return typeof re=="function"}function ye(re){return Object.prototype.toString.call(re)}function Z(re){return re<10?"0"+re.toString(10):re.toString(10)}k.debuglog=function(re){if(m(z)&&(z=K.env.NODE_DEBUG||""),re=re.toUpperCase(),!P[re])if(new RegExp("\\b"+re+"\\b","i").test(z)){var se=K.pid;P[re]=function(){var Te=k.format.apply(k,arguments);console.error("%s %d: %s",re,se,Te)}}else P[re]=function(){};return P[re]},k.inspect=H,H.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},H.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},k.isArray=w,k.isBoolean=O,k.isNull=R,k.isNullOrUndefined=function(re){return re==null},k.isNumber=C,k.isString=h,k.isSymbol=function(re){return typeof re=="symbol"},k.isUndefined=m,k.isRegExp=M,k.isObject=V,k.isDate=G,k.isError=ae,k.isFunction=ce,k.isPrimitive=function(re){return re===null||typeof re=="boolean"||typeof re=="number"||typeof re=="string"||typeof re=="symbol"||re===void 0},k.isBuffer=I(384);var fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ie(){var re=new Date,se=[Z(re.getHours()),Z(re.getMinutes()),Z(re.getSeconds())].join(":");return[re.getDate(),fe[re.getMonth()],se].join(" ")}function _e(re,se){return Object.prototype.hasOwnProperty.call(re,se)}k.log=function(){console.log("%s - %s",ie(),k.format.apply(k,arguments))},k.inherits=I(496),k._extend=function(re,se){if(!se||!V(se))return re;for(var Te=Object.keys(se),U=Te.length;U--;)re[Te[U]]=se[Te[U]];return re}}},y={};function v(_){var k=y[_];if(k!==void 0)return k.exports;var I=y[_]={exports:{}};return l[_].call(I.exports,I,I.exports,v),I.exports}v.n=_=>{var k=_&&_.__esModule?()=>_.default:()=>_;return v.d(k,{a:k}),k},v.d=(_,k)=>{for(var I in k)v.o(k,I)&&!v.o(_,I)&&Object.defineProperty(_,I,{enumerable:!0,get:k[I]})},v.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),v.o=(_,k)=>Object.prototype.hasOwnProperty.call(_,k),v.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var b={};return(()=>{v.r(b),v.d(b,{LSPluginUser:()=>Qe,setupPluginUserInstance:()=>mt});var _=v(520);v(856);const k=function(t,r){return t===r||t!=t&&r!=r},I=function(t,r){for(var i=t.length;i--;)if(k(t[i][0],r))return i;return-1};var K=Array.prototype.splice;function B(t){var r=-1,i=t==null?0:t.length;for(this.clear();++r<i;){var a=t[r];this.set(a[0],a[1])}}B.prototype.clear=function(){this.__data__=[],this.size=0},B.prototype.delete=function(t){var r=this.__data__,i=I(r,t);return!(i<0||(i==r.length-1?r.pop():K.call(r,i,1),--this.size,0))},B.prototype.get=function(t){var r=this.__data__,i=I(r,t);return i<0?void 0:r[i][1]},B.prototype.has=function(t){return I(this.__data__,t)>-1},B.prototype.set=function(t,r){var i=this.__data__,a=I(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this};const z=B,P=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;var H=typeof self=="object"&&self&&self.Object===Object&&self;const $=P||H||Function("return this")(),Q=$.Symbol;var D=Object.prototype,F=D.hasOwnProperty,E=D.toString,w=Q?Q.toStringTag:void 0,O=Object.prototype.toString,R=Q?Q.toStringTag:void 0;const C=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":R&&R in Object(t)?function(r){var i=F.call(r,w),a=r[w];try{r[w]=void 0;var s=!0}catch{}var u=E.call(r);return s&&(i?r[w]=a:delete r[w]),u}(t):function(r){return O.call(r)}(t)},h=function(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")},m=function(t){if(!h(t))return!1;var r=C(t);return r=="[object Function]"||r=="[object GeneratorFunction]"||r=="[object AsyncFunction]"||r=="[object Proxy]"},M=$["__core-js_shared__"];var V,G=(V=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",ae=Function.prototype.toString,ce=/^\[object .+?Constructor\]$/,ye=Function.prototype,Z=Object.prototype,fe=ye.toString,ie=Z.hasOwnProperty,_e=RegExp("^"+fe.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const re=function(t){return!(!h(t)||(r=t,G&&G in r))&&(m(t)?_e:ce).test(function(i){if(i!=null){try{return ae.call(i)}catch{}try{return i+""}catch{}}return""}(t));var r},se=function(t,r){var i=function(a,s){return a?.[s]}(t,r);return re(i)?i:void 0},Te=se($,"Map"),U=se(Object,"create");var A=Object.prototype.hasOwnProperty,we=Object.prototype.hasOwnProperty;function ke(t){var r=-1,i=t==null?0:t.length;for(this.clear();++r<i;){var a=t[r];this.set(a[0],a[1])}}ke.prototype.clear=function(){this.__data__=U?U(null):{},this.size=0},ke.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},ke.prototype.get=function(t){var r=this.__data__;if(U){var i=r[t];return i==="__lodash_hash_undefined__"?void 0:i}return A.call(r,t)?r[t]:void 0},ke.prototype.has=function(t){var r=this.__data__;return U?r[t]!==void 0:we.call(r,t)},ke.prototype.set=function(t,r){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=U&&r===void 0?"__lodash_hash_undefined__":r,this};const Ne=ke,Ve=function(t,r){var i,a,s=t.__data__;return((a=typeof(i=r))=="string"||a=="number"||a=="symbol"||a=="boolean"?i!=="__proto__":i===null)?s[typeof r=="string"?"string":"hash"]:s.map};function it(t){var r=-1,i=t==null?0:t.length;for(this.clear();++r<i;){var a=t[r];this.set(a[0],a[1])}}it.prototype.clear=function(){this.size=0,this.__data__={hash:new Ne,map:new(Te||z),string:new Ne}},it.prototype.delete=function(t){var r=Ve(this,t).delete(t);return this.size-=r?1:0,r},it.prototype.get=function(t){return Ve(this,t).get(t)},it.prototype.has=function(t){return Ve(this,t).has(t)},it.prototype.set=function(t,r){var i=Ve(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this};const At=it;function me(t){var r=this.__data__=new z(t);this.size=r.size}me.prototype.clear=function(){this.__data__=new z,this.size=0},me.prototype.delete=function(t){var r=this.__data__,i=r.delete(t);return this.size=r.size,i},me.prototype.get=function(t){return this.__data__.get(t)},me.prototype.has=function(t){return this.__data__.has(t)},me.prototype.set=function(t,r){var i=this.__data__;if(i instanceof z){var a=i.__data__;if(!Te||a.length<199)return a.push([t,r]),this.size=++i.size,this;i=this.__data__=new At(a)}return i.set(t,r),this.size=i.size,this};const Ze=me,Ie=function(){try{var t=se(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Me=function(t,r,i){r=="__proto__"&&Ie?Ie(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i},vt=function(t,r,i){(i!==void 0&&!k(t[r],i)||i===void 0&&!(r in t))&&Me(t,r,i)},pt=function(t,r,i){for(var a=-1,s=Object(t),u=i(t),p=u.length;p--;){var T=u[++a];if(r(s[T],T,s)===!1)break}return t};var et=d&&!d.nodeType&&d,Nt=et&&!0&&f&&!f.nodeType&&f,qt=Nt&&Nt.exports===et?$.Buffer:void 0,Rt=qt?qt.allocUnsafe:void 0;const ct=$.Uint8Array,Ct=function(t,r){var i,a,s=r?(i=t.buffer,a=new i.constructor(i.byteLength),new ct(a).set(new ct(i)),a):t.buffer;return new t.constructor(s,t.byteOffset,t.length)};var zt=Object.create;const lr=function(){function t(){}return function(r){if(!h(r))return{};if(zt)return zt(r);t.prototype=r;var i=new t;return t.prototype=void 0,i}}(),Fe=(xe=Object.getPrototypeOf,Ae=Object,function(t){return xe(Ae(t))});var xe,Ae,ze=Object.prototype;const He=function(t){var r=t&&t.constructor;return t===(typeof r=="function"&&r.prototype||ze)},St=function(t){return t!=null&&typeof t=="object"},ft=function(t){return St(t)&&C(t)=="[object Arguments]"};var an=Object.prototype,ur=an.hasOwnProperty,Zn=an.propertyIsEnumerable;const Cn=ft(function(){return arguments}())?ft:function(t){return St(t)&&ur.call(t,"callee")&&!Zn.call(t,"callee")},tt=Array.isArray,Ot=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},ht=function(t){return t!=null&&Ot(t.length)&&!m(t)};var Ut=d&&!d.nodeType&&d,Jt=Ut&&!0&&f&&!f.nodeType&&f,cr=Jt&&Jt.exports===Ut?$.Buffer:void 0;const yt=(cr?cr.isBuffer:void 0)||function(){return!1};var Lr=Function.prototype,Nr=Object.prototype,fr=Lr.toString,sn=Nr.hasOwnProperty,hr=fr.call(Object),ot={};ot["[object Float32Array]"]=ot["[object Float64Array]"]=ot["[object Int8Array]"]=ot["[object Int16Array]"]=ot["[object Int32Array]"]=ot["[object Uint8Array]"]=ot["[object Uint8ClampedArray]"]=ot["[object Uint16Array]"]=ot["[object Uint32Array]"]=!0,ot["[object Arguments]"]=ot["[object Array]"]=ot["[object ArrayBuffer]"]=ot["[object Boolean]"]=ot["[object DataView]"]=ot["[object Date]"]=ot["[object Error]"]=ot["[object Function]"]=ot["[object Map]"]=ot["[object Number]"]=ot["[object Object]"]=ot["[object RegExp]"]=ot["[object Set]"]=ot["[object String]"]=ot["[object WeakMap]"]=!1;var dr=d&&!d.nodeType&&d,Bn=dr&&!0&&f&&!f.nodeType&&f,Qn=Bn&&Bn.exports===dr&&P.process,An=function(){try{return Bn&&Bn.require&&Bn.require("util").types||Qn&&Qn.binding&&Qn.binding("util")}catch{}}(),Yn=An&&An.isTypedArray;const pr=Yn?function(t){return function(r){return t(r)}}(Yn):function(t){return St(t)&&Ot(t.length)&&!!ot[C(t)]},_t=function(t,r){if((r!=="constructor"||typeof t[r]!="function")&&r!="__proto__")return t[r]};var Xn=Object.prototype.hasOwnProperty;const En=function(t,r,i){var a=t[r];Xn.call(t,r)&&k(a,i)&&(i!==void 0||r in t)||Me(t,r,i)};var Kt=/^(?:0|[1-9]\d*)$/;const Sn=function(t,r){var i=typeof t;return!!(r=r??9007199254740991)&&(i=="number"||i!="symbol"&&Kt.test(t))&&t>-1&&t%1==0&&t<r};var oi=Object.prototype.hasOwnProperty;const Vr=function(t,r){var i=tt(t),a=!i&&Cn(t),s=!i&&!a&&yt(t),u=!i&&!a&&!s&&pr(t),p=i||a||s||u,T=p?function(W,Y){for(var oe=-1,te=Array(W);++oe<W;)te[oe]=Y(oe);return te}(t.length,String):[],x=T.length;for(var N in t)!r&&!oi.call(t,N)||p&&(N=="length"||s&&(N=="offset"||N=="parent")||u&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||Sn(N,x))||T.push(N);return T};var Or=Object.prototype.hasOwnProperty;const Gr=function(t){if(!h(t))return function(s){var u=[];if(s!=null)for(var p in Object(s))u.push(p);return u}(t);var r=He(t),i=[];for(var a in t)(a!="constructor"||!r&&Or.call(t,a))&&i.push(a);return i},er=function(t){return ht(t)?Vr(t,!0):Gr(t)},Et=function(t){return function(r,i,a,s){var u=!a;a||(a={});for(var p=-1,T=i.length;++p<T;){var x=i[p],N=s?s(a[x],r[x],x,a,r):void 0;N===void 0&&(N=r[x]),u?Me(a,x,N):En(a,x,N)}return a}(t,er(t))},Jr=function(t,r,i,a,s,u,p){var T,x=_t(t,i),N=_t(r,i),W=p.get(N);if(W)vt(t,i,W);else{var Y=u?u(x,N,i+"",t,r,p):void 0,oe=Y===void 0;if(oe){var te=tt(N),ne=!te&&yt(N),ve=!te&&!ne&&pr(N);Y=N,te||ne||ve?tt(x)?Y=x:St(T=x)&&ht(T)?Y=function(ue,Re){var Se=-1,Pe=ue.length;for(Re||(Re=Array(Pe));++Se<Pe;)Re[Se]=ue[Se];return Re}(x):ne?(oe=!1,Y=function(ue,Re){if(Re)return ue.slice();var Se=ue.length,Pe=Rt?Rt(Se):new ue.constructor(Se);return ue.copy(Pe),Pe}(N,!0)):ve?(oe=!1,Y=Ct(N,!0)):Y=[]:function(ue){if(!St(ue)||C(ue)!="[object Object]")return!1;var Re=Fe(ue);if(Re===null)return!0;var Se=sn.call(Re,"constructor")&&Re.constructor;return typeof Se=="function"&&Se instanceof Se&&fr.call(Se)==hr}(N)||Cn(N)?(Y=x,Cn(x)?Y=Et(x):h(x)&&!m(x)||(Y=function(ue){return typeof ue.constructor!="function"||He(ue)?{}:lr(Fe(ue))}(N))):oe=!1}oe&&(p.set(N,Y),s(Y,N,a,u,p),p.delete(N)),vt(t,i,Y)}},kt=function t(r,i,a,s,u){r!==i&&pt(i,function(p,T){if(u||(u=new Ze),h(p))Jr(r,i,T,a,t,s,u);else{var x=s?s(_t(r,T),p,T+"",r,i,u):void 0;x===void 0&&(x=p),vt(r,T,x)}},er)},gr=function(t){return t},lt=function(t,r,i){switch(i.length){case 0:return t.call(r);case 1:return t.call(r,i[0]);case 2:return t.call(r,i[0],i[1]);case 3:return t.call(r,i[0],i[1],i[2])}return t.apply(r,i)};var Wn=Math.max;const Wt=Ie?function(t,r){return Ie(t,"toString",{configurable:!0,enumerable:!1,value:(i=r,function(){return i}),writable:!0});var i}:gr;var Zr=Date.now;const mr=function(t){var r=0,i=0;return function(){var a=Zr(),s=16-(a-i);if(i=a,s>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(Wt),Ir=function(t,r){return mr(function(i,a,s){return a=Wn(a===void 0?i.length-1:a,0),function(){for(var u=arguments,p=-1,T=Wn(u.length-a,0),x=Array(T);++p<T;)x[p]=u[a+p];p=-1;for(var N=Array(a+1);++p<a;)N[p]=u[p];return N[a]=s(x),lt(i,this,N)}}(t,r,gr),t+"")},kn=(Xt=function(t,r,i){kt(t,r,i)},Ir(function(t,r){var i=-1,a=r.length,s=a>1?r[a-1]:void 0,u=a>2?r[2]:void 0;for(s=Xt.length>3&&typeof s=="function"?(a--,s):void 0,u&&function(T,x,N){if(!h(N))return!1;var W=typeof x;return!!(W=="number"?ht(N)&&Sn(x,N.length):W=="string"&&x in N)&&k(N[x],T)}(r[0],r[1],u)&&(s=a<3?void 0:s,a=1),t=Object(t);++i<a;){var p=r[i];p&&Xt(t,p,i)}return t}));var Xt,Tn=function(){return Tn=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var s in r=arguments[i])Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);return t},Tn.apply(this,arguments)};function vr(t){return t.toLowerCase()}var It=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],yr=/[^A-Z0-9]+/gi;function tr(t,r,i){return r instanceof RegExp?t.replace(r,i):r.reduce(function(a,s){return a.replace(s,i)},t)}const nr=navigator.platform.toLowerCase()==="win32"?_.win32:_.posix,pn=function(t,r){return r===void 0&&(r={}),function(i,a){return a===void 0&&(a={}),function(s,u){u===void 0&&(u={});for(var p=u.splitRegexp,T=p===void 0?It:p,x=u.stripRegexp,N=x===void 0?yr:x,W=u.transform,Y=W===void 0?vr:W,oe=u.delimiter,te=oe===void 0?" ":oe,ne=tr(tr(s,T,"$1\0$2"),N,"\0"),ve=0,ue=ne.length;ne.charAt(ve)==="\0";)ve++;for(;ne.charAt(ue-1)==="\0";)ue--;return ne.slice(ve,ue).split("\0").map(Y).join(te)}(i,Tn({delimiter:"."},a))}(t,Tn({delimiter:"_"},r))},$n=kn;function Zt(t,r){let i,a,s=!1;const u=T=>x=>{t&&clearTimeout(t),T(x),s=!0},p=new Promise((T,x)=>{i=u(T),a=u(x),t&&(t=setTimeout(()=>a(new Error(`[deferred timeout] ${r}`)),t))});return{created:Date.now(),setTag:T=>r=T,resolve:i,reject:a,promise:p,get settled(){return s}}}const Un=new Map;window.__injectedUIEffects=Un;var _r=v(227),Hn=v.n(_r);const ln="application/x-postmate-v1+json";let en=0;const at={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},jn=(t,r)=>!(typeof r=="string"&&t.origin!==r||!t.data||typeof t.data=="object"&&!("postmate"in t.data)||t.data.type!==ln||!at[t.data.postmate]);class gn{parent;frame;child;events={};childOrigin;listener;constructor(r){this.parent=r.parent,this.frame=r.frame,this.child=r.child,this.childOrigin=r.childOrigin,this.listener=i=>{if(!jn(i,this.childOrigin))return!1;const{data:a,name:s}=((i||{}).data||{}).value||{};i.data.postmate==="emit"&&s in this.events&&this.events[s].forEach(u=>{u.call(this,a)})},this.parent.addEventListener("message",this.listener,!1)}get(r){return new Promise(i=>{const a=++en,s=u=>{u.data.uid===a&&u.data.postmate==="reply"&&(this.parent.removeEventListener("message",s,!1),i(u.data.value))};this.parent.addEventListener("message",s,!1),this.child.postMessage({postmate:"request",type:ln,property:r,uid:a},this.childOrigin)})}call(r,i){this.child.postMessage({postmate:"call",type:ln,property:r,data:i},this.childOrigin)}on(r,i){this.events[r]||(this.events[r]=[]),this.events[r].push(i)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class mn{model;parent;parentOrigin;child;constructor(r){this.model=r.model,this.parent=r.parent,this.parentOrigin=r.parentOrigin,this.child=r.child,this.child.addEventListener("message",i=>{if(!jn(i,this.parentOrigin))return;const{property:a,uid:s,data:u}=i.data;i.data.postmate!=="call"?((p,T)=>{const x=typeof p[T]=="function"?p[T]():p[T];return Promise.resolve(x)})(this.model,a).then(p=>{i.source.postMessage({property:a,postmate:"reply",type:ln,uid:s,value:p},i.origin)}):a in this.model&&typeof this.model[a]=="function"&&this.model[a](u)})}emit(r,i){this.parent.postMessage({postmate:"emit",type:ln,value:{name:r,data:i}},this.parentOrigin)}}class un{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(r){this.container=r.container,this.url=r.url,this.parent=window,this.frame=document.createElement("iframe"),r.id&&(this.frame.id=r.id),r.name&&(this.frame.name=r.name),this.frame.classList.add.apply(this.frame.classList,r.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=r.model||{}}sendHandshake(r){const i=(u=>{const p=document.createElement("a");p.href=u;const T=p.protocol.length>4?p.protocol:window.location.protocol,x=p.host.length?p.port==="80"||p.port==="443"?p.hostname:p.host:window.location.host;return p.origin||`${T}//${x}`})(r=r||this.url);let a,s=0;return new Promise((u,p)=>{const T=N=>!!jn(N,i)&&(N.data.postmate==="handshake-reply"?(clearInterval(a),this.parent.removeEventListener("message",T,!1),this.childOrigin=N.origin,u(new gn(this))):p("Failed handshake"));this.parent.addEventListener("message",T,!1);const x=()=>{s++,this.child.postMessage({postmate:"handshake",type:ln,model:this.model},i),s===5&&clearInterval(a)};this.frame.addEventListener("load",()=>{x(),a=setInterval(x,500)}),this.frame.src=r})}destroy(){this.frame.parentNode.removeChild(this.frame)}}class wr{child;model;parent;parentOrigin;constructor(r){this.child=window,this.model=r,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((r,i)=>{const a=s=>{if(s.data.postmate){if(s.data.postmate==="handshake"){this.child.removeEventListener("message",a,!1),s.source.postMessage({postmate:"handshake-reply",type:ln},s.origin),this.parentOrigin=s.origin;const u=s.data.model;return u&&Object.keys(u).forEach(p=>{this.model[p]=u[p]}),r(new mn(this))}return i("Handshake Reply Failed")}};this.child.addEventListener("message",a,!1)})}}var Rn=v(729),cn=v.n(Rn);const{importHTML:vn,createSandboxContainer:Qr}=window.QSandbox||{};function br(t,r){return t.startsWith("http")?fetch(t,r):(t=t.replace("file://",""),new Promise(async(i,a)=>{try{const s=await window.apis.doAction(["readFile",t]);i({text:()=>s})}catch(s){console.error(s),a(s)}}))}class xr extends cn(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(r){super(),this._pluginLocal=r,r._dispose(()=>{this._unmount()})}async load(){const{name:r,entry:i}=this._pluginLocal.options;if(this.loaded||!i)return;const{template:a,execScripts:s}=await vn(i,{fetch:br});this._mount(a,document.body);const u=Qr(r,{elementGetter:()=>this._root?.firstChild}).instance.proxy;u.__shadow_mode__=!0,u.LSPluginLocal=this._pluginLocal,u.LSPluginShadow=this,u.LSPluginUser=u.logseq=new Qe(this._pluginLocal.toJSON(),this._pluginLocal.caller);const p=await s(u,!0);this._unmountFns.push(p.unmount),this._loaded=!0}_mount(r,i){const a=this._frame=document.createElement("div");a.classList.add("lsp-shadow-sandbox"),a.id=this._pluginLocal.id,this._root=a.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${r}</div>`,i.appendChild(a),this.emit("mounted")}_unmount(){for(const r of this._unmountFns)r&&r.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const Vt=Hn()("LSPlugin:caller"),Ln="#await#response#",Cr="#lspmsg#error#",yn=t=>`#lspmsg#${t}`;class Ar extends cn(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(r){super(),this._pluginLocal=r,r&&(this._debugTag=r.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:r}=this._pluginLocal;r?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(r={}){if(this._connected)return;const i=this,a=this._pluginLocal!=null;let s=0;const u=new Map,p=Zt(6e4),T=this._extendUserModel({"#lspmsg#ready#":async N=>{T[yn(N?.pid)]=({type:W,payload:Y})=>{Vt(`[host (_call) -> *user] ${this._debugTag}`,W,Y),i.emit(W,Y)},await p.resolve()},"#lspmsg#beforeunload#":async N=>{const W=Zt(1e4);i.emit("beforeunload",Object.assign({actor:W},N)),await W.promise},"#lspmsg#settings#":async({type:N,payload:W})=>{i.emit("settings:changed",W)},"#lspmsg#":async({ns:N,type:W,payload:Y})=>{Vt(`[host (async) -> *user] ${this._debugTag} ns=${N} type=${W}`,Y),N&&N.startsWith("hook")?i.emit(`${N}:${W}`,Y):i.emit(W,Y)},"#lspmsg#reply#":({_sync:N,result:W})=>{if(Vt(`[sync host -> *user] #${N}`,W),u.has(N)){const Y=u.get(N);Y&&(W?.hasOwnProperty(Cr)?Y.reject(W[Cr]):Y.resolve(W),u.delete(N))}},...r});if(a)return await p.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const x=new wr(T).sendHandshakeReply();return this._status="pending",await x.then(N=>{this._child=N,this._connected=!0,this._call=async(W,Y={},oe)=>{if(oe){const te=++s;u.set(te,oe),Y._sync=te,oe.setTag(`async call #${te}`),Vt(`async call #${te}`)}return N.emit(yn(T.baseInfo.id),{type:W,payload:Y}),oe?.promise},this._callUserModel=async(W,Y)=>{try{T[W](Y)}catch{Vt(`[model method] #${W} not existed`)}},setInterval(()=>{if(u.size>100)for(const[W,Y]of u)Y.settled&&u.delete(W)},18e5)}).finally(()=>{this._status=void 0}),await p.promise,T.baseInfo}async call(r,i={}){return this._call?.call(this,r,i)}async callAsync(r,i={}){const a=Zt(1e4);return this._call?.call(this,r,i,a)}async callUserModel(r,i={}){return this._callUserModel?.call(this,r,i)}async _setupIframeSandbox(){const r=this._pluginLocal,i=r.id,a=`${i}_lsp_main`,s=new URL(r.options.entry);s.searchParams.set("__v__",r.options.version);const u=document.querySelector(`#${a}`);u&&u.parentElement.removeChild(u);const p=document.createElement("div");p.classList.add("lsp-iframe-sandbox-container"),p.id=a,p.dataset.pid=i;try{const W=(await this._pluginLocal._loadLayoutsData())?.$$0;if(W){p.dataset.inited_layout="true";const{width:Y,height:oe,left:te,top:ne}=W;Object.assign(p.style,{width:Y+"px",height:oe+"px",left:te+"px",top:ne+"px"})}}catch(W){console.error("[Restore Layout Error]",W)}document.body.appendChild(p);const T=new un({id:i+"_iframe",container:p,url:s.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(r.toJSON()))}});let x,N=T.sendHandshake();return this._status="pending",new Promise((W,Y)=>{x=setTimeout(()=>{Y(new Error("handshake Timeout")),T.destroy()},4e3),N.then(oe=>{this._parent=oe,this._connected=!0,this.emit("connected"),oe.on(yn(r.id),({type:te,payload:ne})=>{Vt("[user -> *host] ",te,ne),this._pluginLocal?.emit(te,ne||{})}),this._call=async(...te)=>{await oe.call(yn(r.id),{type:te[0],payload:Object.assign(te[1]||{},{$$pid:r.id})})},this._callUserModel=async(te,ne)=>{if(te.startsWith(Ln))return await oe.get(te.replace(Ln,""));oe.call(te,ne)},W(null)}).catch(oe=>{Y(oe)}).finally(()=>{clearTimeout(x)})}).catch(W=>{throw Vt("[iframe sandbox] error",W),W}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const r=this._pluginLocal,i=this._shadow=new xr(r);try{this._status="pending",await i.load(),this._connected=!0,this.emit("connected"),this._call=async(a,s={},u)=>(u&&(s.actor=u),this._pluginLocal?.emit(a,Object.assign(s,{$$pid:r.id})),u?.promise),this._callUserModel=async(...a)=>{let s=a[0];s?.startsWith(Ln)&&(s=s.replace(Ln,""));const u=a[1]||{},p=this._userModel[s];typeof p=="function"&&await p.call(null,u)}}catch(a){throw Vt("[shadow sandbox] error",a),a}finally{this._status=void 0}}_extendUserModel(r){return Object.assign(this._userModel,r)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(r){this._debugTag=r}async destroy(){let r=null;this._parent&&(r=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(r=this._getSandboxShadowContainer(),this._shadow.destroy()),r?.parentNode.removeChild(r)}}class Qt{ctx;opts;constructor(r,i){this.ctx=r,this.opts=i}get ctxId(){return this.ctx.baseInfo.id}setItem(r,i){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,r,i,this.opts?.assets]})}getItem(r){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,r,this.opts?.assets]})}removeItem(r){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,r,this.opts?.assets]})}allKeys(){return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,this.opts?.assets]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,this.opts?.assets]})}hasItem(r){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,r,this.opts?.assets]})}}class tn{ctx;constructor(r){this.ctx=r}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(r,...i){const a=this.ensureHostScope();return r=pn(r)?.toLowerCase(),a.logseq.api["exper_"+r]?.apply(a,i)}async loadScripts(...r){(r=r.map(i=>i?.startsWith("http")?i:this.ctx.resolveResourceFullUrl(i))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...r)}registerFencedCodeRenderer(r,i){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,r,i)}registerExtensionsEnhancer(r,i){const a=this.ensureHostScope();return r==="katex"&&a.katex&&i(a.katex).catch(console.error),a.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,r,i)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const Nn=t=>`task_callback_${t}`;class Mr{_client;_requestId;_requestOptions;_promise;_aborted=!1;constructor(r,i,a={}){this._client=r,this._requestId=i,this._requestOptions=a,this._promise=new Promise((T,x)=>{if(!this._requestId)return x(null);this._client.once(Nn(this._requestId),N=>{N&&N instanceof Error?x(N):T(N)})});const{success:s,fail:u,final:p}=this._requestOptions;this._promise.then(T=>{s?.(T)}).catch(T=>{u?.(T)}).finally(()=>{p?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class Er extends Rn.EventEmitter{_ctx;constructor(r){super(),this._ctx=r,this.ctx.caller.on("#lsp#request#callback",i=>{const a=i?.requestId;a&&this.emit(Nn(a),i?.payload)})}static createRequestTask(r,i,a){return new Mr(r,i,a)}async _request(r){const i=this.ctx.baseInfo.id,{success:a,fail:s,final:u,...p}=r,T=this.ctx.Experiments.invokeExperMethod("request",i,p),x=Er.createRequestTask(this.ctx.Request,T,r);return p.abortable?x:x.promise}get ctx(){return this._ctx}}const ai=Symbol.for("proxy-continue"),On=Hn()("LSPlugin:user");function $t(t,r,i){if(typeof i!="function")return!1;const{key:a,label:s,desc:u,palette:p,keybinding:T,extras:x}=r,N=`SimpleCommandHook${a}${++Sr}`;this.Editor["on"+N](i),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:a,label:s,type:t,desc:u,keybinding:T,extras:x},["editor/hook",N]],p]})}let rr=null;const Fr={async getInfo(t){return rr||(rr=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?rr[t]:rr},registerCommand:$t,registerCommandPalette(t,r){const{key:i,label:a,keybinding:s}=t;return $t.call(this,"$palette$",{key:i,label:a,palette:!0,keybinding:s},r)},registerCommandShortcut(t,r){const{binding:i}=t,a="$shortcut$",s=a+pn(i);return $t.call(this,a,{key:s,palette:!1,keybinding:t},r)},registerUIItem(t,r){const i=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[i,t,r]})},registerPageMenuItem(t,r){if(typeof r!="function")return!1;const i=t+"_"+this.baseInfo.id,a=t;$t.call(this,"page-menu-item",{key:i,label:a},r)},setFullScreen(t){const r=(...i)=>this._callWin("setFullScreen",...i);t==="toggle"?this._callWin("isFullScreen").then(i=>{i?r():r(!0)}):t?r(!0):r()}};let Sr=0;const Pr={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,r){On("Register slash command #",this.baseInfo.id,t,r),typeof r=="function"&&(r=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",r]]),r=r.map(i=>{const[a,...s]=i;if(a==="editor/hook"){let u=s[0],p=()=>{this.caller?.callUserModel(u)};typeof u=="function"&&(p=u);const T=`SlashCommandHook${a}${++Sr}`;i[1]=T,this.Editor["on"+T](p)}return i}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,r]]})},registerBlockContextMenuItem(t,r){if(typeof r!="function")return!1;const i=t+"_"+this.baseInfo.id;$t.call(this,"block-context-menu-item",{key:i,label:t},r)},registerHighlightContextMenuItem(t,r,i){if(typeof r!="function")return!1;const a=t+"_"+this.baseInfo.id;$t.call(this,"highlight-context-menu-item",{key:a,label:t,extras:i},r)},scrollToBlockInPage(t,r,i){const a="block-content-"+r;i?.replaceState?this.App.replaceState("page",{name:t},{anchor:a}):this.App.pushState("page",{name:t},{anchor:a})}},st={onBlockChanged(t,r){const i=this.baseInfo.id,a=`hook:db:${pn(`block:${t}`)}`,s=({block:u,txData:p,txMeta:T})=>{u.uuid===t&&r(u,p,T)};return this.caller.on(a,s),this.App._installPluginHook(i,a),()=>{this.caller.off(a,s),this.App._uninstallPluginHook(i,a)}}},q={},Ce={},be={makeSandboxStorage(){return new Qt(this,{assets:!0})}};class Qe extends cn(){_baseInfo;_caller;_version="0.0.10";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mRequest;_mExperiments;_beforeunloadCallback;constructor(r,i){super(),this._baseInfo=r,this._caller=i,i.on("sys:ui:visible",a=>{a?.toggle&&this.toggleMainUI()}),i.on("settings:changed",a=>{const s=Object.assign({},this.settings),u=Object.assign(this._baseInfo.settings,a);this.emit("settings:changed",{...u},s)}),i.on("beforeunload",async a=>{const{actor:s,...u}=a,p=this._beforeunloadCallback;try{p&&await p(u),s?.resolve(null)}catch(T){console.debug(`${i.debugTag} [beforeunload] `,T),s?.reject(T)}})}async ready(r,i){if(!this._connected)try{typeof r=="function"&&(i=r,r={});let a=await this._caller.connectToParent(r);this._connected=!0,a=$n(this._baseInfo,a),this._settingsSchema&&(a.settings=function(s,u){const p=(u||[]).reduce((T,x)=>("default"in x&&(T[x.key]=x.default),T),{});return Object.assign(p,s)}(a.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),a?.id&&(this._debugTag=this._caller.debugTag=`#${a.id} [${a.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(s){console.warn(s)}i&&i.call(this,a)}catch(a){console.error(`${this._debugTag} [Ready Error]`,a)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(r){typeof r=="function"&&(this._beforeunloadCallback=r)}provideModel(r){return this.caller._extendUserModel(r),this}provideTheme(r){return this.caller.call("provider:theme",r),this}provideStyle(r){return this.caller.call("provider:style",r),this}provideUI(r){return this.caller.call("provider:ui",r),this}useSettingsSchema(r){return this.connected&&this.caller.call("settings:schema",{schema:r,isSync:!0}),this._settingsSchema=r,this}updateSettings(r){this.caller.call("settings:update",r)}onSettingsChanged(r){const i="settings:changed";return this.on(i,r),()=>this.off(i,r)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(r){this.caller.call("main-ui:attrs",r)}setMainUIInlineStyle(r){this.caller.call("main-ui:style",r)}hideMainUI(r){const i={key:0,visible:!1,cursor:r?.restoreEditingCursor};this.caller.call("main-ui:visible",i),this.emit("ui:visible:changed",i),this._ui.set(i.key,i)}showMainUI(r){const i={key:0,visible:!0,autoFocus:r?.autoFocus};this.caller.call("main-ui:visible",i),this.emit("ui:visible:changed",i),this._ui.set(i.key,i)}toggleMainUI(){const r=this._ui.get(0);r&&r.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const r=this._ui.get(0);return Boolean(r&&r.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(r){if(this.ensureConnected(),r)return r=r.replace(/^[.\\/]+/,""),function(i,...a){try{const s=new URL(i);if(!s.origin)throw new Error(null);const u=nr.join(i.substr(s.origin.length),...a);return s.origin+u}catch{return nr.join(i,...a)}}(this._baseInfo.lsr,r)}_makeUserProxy(r,i){const a=this,s=this.caller;return new Proxy(r,{get(u,p,T){const x=u[p];return function(...N){if(x){const Y=x.apply(a,N.concat(i));if(Y!==ai)return Y}if(i){const Y=p.toString().match(/^(once|off|on)/i);if(Y!=null){const oe=Y[0].toLowerCase(),te=Y.input.slice(oe.length),ne=oe==="off",ve=a.baseInfo.id,ue=`hook:${i}:${pn(te)}`,Re=N[0];s[oe](ue,Re);const Se=()=>{s.off(ue,Re),s.listenerCount(ue)||a.App._uninstallPluginHook(ve,ue)};return ne?void Se():(a.App._installPluginHook(ve,ue),Se)}}let W=p;return["git","ui","assets"].includes(i)&&(W=i+"_"+W),s.callAsync("api:call",{tag:i,method:W,args:N})}}})}_execCallableAPIAsync(r,...i){return this._caller.callAsync("api:call",{method:r,args:i})}_execCallableAPI(r,...i){this._caller.call("api:call",{method:r,args:i})}_callWin(...r){return this._execCallableAPIAsync("_callMainWin",...r)}get App(){return this._makeUserProxy(Fr,"app")}get Editor(){return this._makeUserProxy(Pr,"editor")}get DB(){return this._makeUserProxy(st,"db")}get Git(){return this._makeUserProxy(q,"git")}get UI(){return this._makeUserProxy(Ce,"ui")}get Assets(){return this._makeUserProxy(be,"assets")}get FileStorage(){let r=this._mFileStorage;return r||(r=this._mFileStorage=new Qt(this)),r}get Request(){let r=this._mRequest;return r||(r=this._mRequest=new Er(this)),r}get Experiments(){let r=this._mExperiments;return r||(r=this._mExperiments=new tn(this)),r}}function mt(t,r){return new Qe(t,r)}if(window.__LSP__HOST__==null){const t=new Ar(null);window.logseq=mt({},t)}})(),b})())})(lsplugin_user,lsplugin_user.exports);var isVue2=!1;/*!
  * pinia v2.0.23
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=f=>activePinia=f,piniaSymbol=Symbol();function isPlainObject(f){return f&&typeof f=="object"&&Object.prototype.toString.call(f)==="[object Object]"&&typeof f.toJSON!="function"}var MutationType;(function(f){f.direct="direct",f.patchObject="patch object",f.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const f=effectScope(!0),d=f.run(()=>ref({}));let l=[],y=[];const v=markRaw({install(b){setActivePinia(v),v._a=b,b.provide(piniaSymbol,v),b.config.globalProperties.$pinia=v,y.forEach(_=>l.push(_)),y=[]},use(b){return!this._a&&!isVue2?y.push(b):l.push(b),this},_p:l,_a:null,_e:f,_s:new Map,state:d});return v}const noop=()=>{};function addSubscription(f,d,l,y=noop){f.push(d);const v=()=>{const b=f.indexOf(d);b>-1&&(f.splice(b,1),y())};return!l&&getCurrentInstance()&&onUnmounted(v),v}function triggerSubscriptions(f,...d){f.slice().forEach(l=>{l(...d)})}function mergeReactiveObjects(f,d){f instanceof Map&&d instanceof Map&&d.forEach((l,y)=>f.set(y,l)),f instanceof Set&&d instanceof Set&&d.forEach(f.add,f);for(const l in d){if(!d.hasOwnProperty(l))continue;const y=d[l],v=f[l];isPlainObject(v)&&isPlainObject(y)&&f.hasOwnProperty(l)&&!isRef(y)&&!isReactive(y)?f[l]=mergeReactiveObjects(v,y):f[l]=y}return f}const skipHydrateSymbol=Symbol();function shouldHydrate(f){return!isPlainObject(f)||!f.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(f){return!!(isRef(f)&&f.effect)}function createOptionsStore(f,d,l,y){const{state:v,actions:b,getters:_}=d,k=l.state.value[f];let I;function K(){k||(l.state.value[f]=v?v():{});const B=toRefs(l.state.value[f]);return assign(B,b,Object.keys(_||{}).reduce((z,P)=>(z[P]=markRaw(computed(()=>{setActivePinia(l);const H=l._s.get(f);return _[P].call(H,H)})),z),{}))}return I=createSetupStore(f,K,d,l,y,!0),I.$reset=function(){const z=v?v():{};this.$patch(P=>{assign(P,z)})},I}function createSetupStore(f,d,l={},y,v,b){let _;const k=assign({actions:{}},l),I={deep:!0};let K,B,z=markRaw([]),P=markRaw([]),H;const $=y.state.value[f];!b&&!$&&(y.state.value[f]={}),ref({});let Q;function D(h){let m;K=B=!1,typeof h=="function"?(h(y.state.value[f]),m={type:MutationType.patchFunction,storeId:f,events:H}):(mergeReactiveObjects(y.state.value[f],h),m={type:MutationType.patchObject,payload:h,storeId:f,events:H});const M=Q=Symbol();nextTick().then(()=>{Q===M&&(K=!0)}),B=!0,triggerSubscriptions(z,m,y.state.value[f])}const F=noop;function E(){_.stop(),z=[],P=[],y._s.delete(f)}function w(h,m){return function(){setActivePinia(y);const M=Array.from(arguments),V=[],G=[];function ae(Z){V.push(Z)}function ce(Z){G.push(Z)}triggerSubscriptions(P,{args:M,name:h,store:R,after:ae,onError:ce});let ye;try{ye=m.apply(this&&this.$id===f?this:R,M)}catch(Z){throw triggerSubscriptions(G,Z),Z}return ye instanceof Promise?ye.then(Z=>(triggerSubscriptions(V,Z),Z)).catch(Z=>(triggerSubscriptions(G,Z),Promise.reject(Z))):(triggerSubscriptions(V,ye),ye)}}const O={_p:y,$id:f,$onAction:addSubscription.bind(null,P),$patch:D,$reset:F,$subscribe(h,m={}){const M=addSubscription(z,h,m.detached,()=>V()),V=_.run(()=>watch(()=>y.state.value[f],G=>{(m.flush==="sync"?B:K)&&h({storeId:f,type:MutationType.direct,events:H},G)},assign({},I,m)));return M},$dispose:E},R=reactive(O);y._s.set(f,R);const C=y._e.run(()=>(_=effectScope(),_.run(()=>d())));for(const h in C){const m=C[h];if(isRef(m)&&!isComputed(m)||isReactive(m))b||($&&shouldHydrate(m)&&(isRef(m)?m.value=$[h]:mergeReactiveObjects(m,$[h])),y.state.value[f][h]=m);else if(typeof m=="function"){const M=w(h,m);C[h]=M,k.actions[h]=m}}return assign(R,C),assign(toRaw(R),C),Object.defineProperty(R,"$state",{get:()=>y.state.value[f],set:h=>{D(m=>{assign(m,h)})}}),y._p.forEach(h=>{assign(R,_.run(()=>h({store:R,app:y._a,pinia:y,options:k})))}),$&&b&&l.hydrate&&l.hydrate(R.$state,$),K=!0,B=!0,R}function defineStore(f,d,l){let y,v;const b=typeof d=="function";typeof f=="string"?(y=f,v=b?l:d):(v=f,y=f.id);function _(k,I){const K=getCurrentInstance();return k=k||K&&inject(piniaSymbol),k&&setActivePinia(k),k=activePinia,k._s.has(y)||(b?createSetupStore(y,d,v,k):createOptionsStore(y,v,k)),k._s.get(y)}return _.$id=y,_}const version$1="0.0.6",useHelpStore=defineStore("help",{state:()=>({version:version$1,visible:!1,bordered:!1,segmented:!1,size:"huge",preset:"card",transformOrigin:"center",bodyStyle:{width:"600px"}}),actions:{open(){this.visible=!0}}}),_hoisted_1$3={class:"font-bold"},_hoisted_2$2={class:"text-gray-500 text-xs mr-2"},_hoisted_3$2=createBaseVNode("a",{href:"https://github.com/vipzhicheng/logseq-plugin-vim-editor",target:"_blank"},[createBaseVNode("svg",{t:"1645855006893",class:"icon inline-block",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2750",width:"16",height:"16"},[createBaseVNode("path",{d:"M512 42.666667A464.64 464.64 0 0 0 42.666667 502.186667 460.373333 460.373333 0 0 0 363.52 938.666667c23.466667 4.266667 32-9.813333 32-22.186667v-78.08c-130.56 27.733333-158.293333-61.44-158.293333-61.44a122.026667 122.026667 0 0 0-52.053334-67.413333c-42.666667-28.16 3.413333-27.733333 3.413334-27.733334a98.56 98.56 0 0 1 71.68 47.36 101.12 101.12 0 0 0 136.533333 37.973334 99.413333 99.413333 0 0 1 29.866667-61.44c-104.106667-11.52-213.333333-50.773333-213.333334-226.986667a177.066667 177.066667 0 0 1 47.36-124.16 161.28 161.28 0 0 1 4.693334-121.173333s39.68-12.373333 128 46.933333a455.68 455.68 0 0 1 234.666666 0c89.6-59.306667 128-46.933333 128-46.933333a161.28 161.28 0 0 1 4.693334 121.173333A177.066667 177.066667 0 0 1 810.666667 477.866667c0 176.64-110.08 215.466667-213.333334 226.986666a106.666667 106.666667 0 0 1 32 85.333334v125.866666c0 14.933333 8.533333 26.88 32 22.186667A460.8 460.8 0 0 0 981.333333 502.186667 464.64 464.64 0 0 0 512 42.666667","p-id":"2751"})])],-1),_hoisted_4$1=createBaseVNode("div",{class:"flex flex-col gap-4"},[createBaseVNode("p",null," Logseq VIM Editor is a tool to help you editing Logseq blocks in a VIM Editor, you can edit one block or select more blocks to edit. "),createBaseVNode("p",null,[createBaseVNode("span",{class:"text-red-500 font-bold"},"Note"),createTextVNode(": If you use multiple blocks editing mode, do not change block ids on the above, and the order maybe different, and hierarchy of blocks will be flattened. You may not need to choose too many blocks to edit at a time. ")]),createBaseVNode("p",{class:"text-gray-400 text-sm"},[createTextVNode(" If you like this plugin and would like to support me to keep working on this plugin, you can "),createBaseVNode("a",{class:"font-bold text-gray-600",href:"https://www.buymeacoffee.com/vipzhicheng",target:"_blank"},"buy me a coffee"),createTextVNode(", that would be very kind and appreciated! ")])],-1),_sfc_main$3=defineComponent({__name:"Help",setup(f){const d=useHelpStore();return(l,y)=>{const v=__unplugin_components_0;return openBlock(),createBlock(v,{show:unref(d).visible,"onUpdate:show":y[0]||(y[0]=b=>unref(d).visible=b),preset:unref(d).preset,style:normalizeStyle(unref(d).bodyStyle),size:unref(d).size,bordered:unref(d).bordered,segmented:unref(d).segmented,"transform-origin":unref(d).transformOrigin,"auto-focus":!1},{header:withCtx(()=>[createBaseVNode("div",_hoisted_1$3,[createTextVNode(" Logseq VIM Editor "),createBaseVNode("span",_hoisted_2$2,"v"+toDisplayString(unref(d).version),1),_hoisted_3$2])]),default:withCtx(()=>[_hoisted_4$1]),_:1},8,["show","preset","style","size","bordered","segmented","transform-origin"])}}}),useTitleBarStore=defineStore("titleBar",{state:()=>({title:"",mode:""}),actions:{setTitle(f){this.title=f},setMode(f){this.mode=f}}});var lib$1={},point={};Object.defineProperty(point,"__esModule",{value:!0});point.Point=void 0;class Point{constructor(d,l){this.row=d,this.column=l}equals(d){return this.row===d.row&&this.column===d.column}}point.Point=Point;var range$1={};Object.defineProperty(range$1,"__esModule",{value:!0});range$1.Range=void 0;class Range$1{constructor(d,l){this.start=d,this.end=l}}range$1.Range=Range$1;var focus={};Object.defineProperty(focus,"__esModule",{value:!0});focus.Focus=void 0;class Focus{constructor(d,l,y){this.row=d,this.column=l,this.offset=y}posEquals(d){return this.row===d.row&&this.column===d.column}setRow(d){return new Focus(d,this.column,this.offset)}setColumn(d){return new Focus(this.row,d,this.offset)}setOffset(d){return new Focus(this.row,this.column,d)}}focus.Focus=Focus;var alignment={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.HeaderAlignment=f.DefaultAlignment=f.Alignment=void 0,function(d){d.NONE="none",d.LEFT="left",d.RIGHT="right",d.CENTER="center"}(f.Alignment||(f.Alignment={})),function(d){d.LEFT="left",d.RIGHT="right",d.CENTER="center"}(f.DefaultAlignment||(f.DefaultAlignment={})),function(d){d.FOLLOW="follow",d.LEFT="left",d.RIGHT="right",d.CENTER="center"}(f.HeaderAlignment||(f.HeaderAlignment={}))})(alignment);var tableCell={};Object.defineProperty(tableCell,"__esModule",{value:!0});tableCell.TableCell=void 0;const alignment_1=alignment;class TableCell{constructor(d){this.rawContent=d,this.content=d.trim(),this.paddingLeft=this.content===""?this.rawContent===""?0:1:this.rawContent.length-this.rawContent.trimLeft().length,this.paddingRight=this.rawContent.length-this.content.length-this.paddingLeft}toText(){return this.rawContent}isDelimiter(){return/^\s*:?-+:?\s*$/.test(this.rawContent)}getAlignment(){if(!!this.isDelimiter())return this.content[0]===":"?this.content[this.content.length-1]===":"?alignment_1.Alignment.CENTER:alignment_1.Alignment.LEFT:this.content[this.content.length-1]===":"?alignment_1.Alignment.RIGHT:alignment_1.Alignment.NONE}computeContentOffset(d){return this.content===""||d<this.paddingLeft?0:d<this.paddingLeft+this.content.length?d-this.paddingLeft:this.content.length}computeRawOffset(d){return d+this.paddingLeft}}tableCell.TableCell=TableCell;var tableRow={};Object.defineProperty(tableRow,"__esModule",{value:!0});tableRow.TableRow=void 0;const table_cell_1=tableCell;class TableRow{constructor(d,l,y){this._cells=d.slice(),this.marginLeft=l,this.marginRight=y}getWidth(){return this._cells.length}getCells(){return this._cells.slice()}getCellAt(d){return this._cells[d]}setCellAt(d,l){const y=this.getCells();return y[d]=new table_cell_1.TableCell(l),new TableRow(y,this.marginLeft,this.marginRight)}toText(){if(this._cells.length===0)return this.marginLeft;const d=this._cells.map(l=>l.toText()).join("|");return`${this.marginLeft}|${d}|${this.marginRight}`}isDelimiter(){return this._cells.every(d=>d.isDelimiter())}}tableRow.TableRow=TableRow;var table={},calc={},neverthrow={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.Err=f.Ok=f.err=f.ok=void 0;const d=b=>new y(b);f.ok=d;const l=b=>new v(b);f.err=l;class y{constructor(_){this.value=_,this.match=(k,I)=>k(this.value)}isOk(){return!0}isErr(){return!this.isOk()}map(_){return f.ok(_(this.value))}mapErr(_){return f.ok(this.value)}andThen(_){return _(this.value)}unwrapOr(_){return this.value}_unsafeUnwrap(){return this.value}_unsafeUnwrapErr(){throw new Error("Called `_unsafeUnwrapErr` on an Ok")}}f.Ok=y;class v{constructor(_){this.error=_,this.match=(k,I)=>I(this.error)}isOk(){return!1}isErr(){return!this.isOk()}map(_){return f.err(this.error)}mapErr(_){return f.err(_(this.error))}andThen(_){return f.err(this.error)}unwrapOr(_){return _}_unsafeUnwrap(){throw new Error("Called `_unsafeUnwrap` on an Err")}_unsafeUnwrapErr(){return this.error}}f.Err=v})(neverthrow);var algebraic_operation={},ast_utils={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.prettyPrintAST=f.checkChildLength=f.checkType=f.errRelativeReferenceIndex=f.errIndex0=void 0,f.errIndex0=new Error("Index 0 used to create a reference"),f.errRelativeReferenceIndex=new Error("Can not use relative reference where absolute reference is required");const d=(v,...b)=>{if(!(b.indexOf(v.type)>=0))return new Error(`Formula element '${v.text}' is a ${v.type} but expected one of ${b} in this position.`)};f.checkType=d;const l=(v,b)=>{if(v.children.length!==b)return new Error(`Formula element '${v.text}' was expected to have ${b} elements, but had ${v.children.length}`)};f.checkChildLength=l;const y=(v,b=0)=>{console.log("  ".repeat(b)+`|-${v.type}${v.children.length===0?"="+v.text:""}`),v.children&&v.children.forEach(_=>{f.prettyPrintAST(_,b+1)})};f.prettyPrintAST=y})(ast_utils);var results={},lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(f,d){(function(){var l,y="4.17.20",v=200,b="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",_="Expected a function",k="__lodash_hash_undefined__",I=500,K="__lodash_placeholder__",B=1,z=2,P=4,H=1,$=2,Q=1,D=2,F=4,E=8,w=16,O=32,R=64,C=128,h=256,m=512,M=30,V="...",G=800,ae=16,ce=1,ye=2,Z=3,fe=1/0,ie=9007199254740991,_e=17976931348623157e292,re=0/0,se=4294967295,Te=se-1,U=se>>>1,A=[["ary",C],["bind",Q],["bindKey",D],["curry",E],["curryRight",w],["flip",m],["partial",O],["partialRight",R],["rearg",h]],we="[object Arguments]",ke="[object Array]",Ne="[object AsyncFunction]",Ve="[object Boolean]",it="[object Date]",At="[object DOMException]",me="[object Error]",Ze="[object Function]",Ie="[object GeneratorFunction]",Me="[object Map]",vt="[object Number]",pt="[object Null]",et="[object Object]",Nt="[object Promise]",qt="[object Proxy]",Rt="[object RegExp]",ct="[object Set]",Ct="[object String]",zt="[object Symbol]",lr="[object Undefined]",Fe="[object WeakMap]",xe="[object WeakSet]",Ae="[object ArrayBuffer]",ze="[object DataView]",He="[object Float32Array]",St="[object Float64Array]",ft="[object Int8Array]",an="[object Int16Array]",ur="[object Int32Array]",Zn="[object Uint8Array]",Cn="[object Uint8ClampedArray]",tt="[object Uint16Array]",Ot="[object Uint32Array]",ht=/\b__p \+= '';/g,Ut=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cr=/&(?:amp|lt|gt|quot|#39);/g,yt=/[&<>"']/g,Lr=RegExp(cr.source),Nr=RegExp(yt.source),fr=/<%-([\s\S]+?)%>/g,sn=/<%([\s\S]+?)%>/g,hr=/<%=([\s\S]+?)%>/g,ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dr=/^\w*$/,Bn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/[\\^$.*+?()[\]{}|]/g,An=RegExp(Qn.source),Yn=/^\s+|\s+$/g,pr=/^\s+/,_t=/\s+$/,Xn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,En=/\{\n\/\* \[wrapped with (.+)\] \*/,Kt=/,? & /,Sn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oi=/\\(\\)?/g,Vr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,Gr=/^[-+]0x[0-9a-f]+$/i,er=/^0b[01]+$/i,Et=/^\[object .+?Constructor\]$/,Jr=/^0o[0-7]+$/i,kt=/^(?:0|[1-9]\d*)$/,gr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,Wn=/['\n\r\u2028\u2029\\]/g,Wt="\\ud800-\\udfff",Zr="\\u0300-\\u036f",mr="\\ufe20-\\ufe2f",Ir="\\u20d0-\\u20ff",kn=Zr+mr+Ir,Xt="\\u2700-\\u27bf",Tn="a-z\\xdf-\\xf6\\xf8-\\xff",vr="\\xac\\xb1\\xd7\\xf7",It="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yr="\\u2000-\\u206f",tr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nr="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",$n=vr+It+yr+tr,Zt="['\u2019]",Un="["+Wt+"]",_r="["+$n+"]",Hn="["+kn+"]",ln="\\d+",en="["+Xt+"]",at="["+Tn+"]",jn="[^"+Wt+$n+ln+Xt+Tn+nr+"]",gn="\\ud83c[\\udffb-\\udfff]",mn="(?:"+Hn+"|"+gn+")",un="[^"+Wt+"]",wr="(?:\\ud83c[\\udde6-\\uddff]){2}",Rn="[\\ud800-\\udbff][\\udc00-\\udfff]",cn="["+nr+"]",vn="\\u200d",Qr="(?:"+at+"|"+jn+")",br="(?:"+cn+"|"+jn+")",xr="(?:"+Zt+"(?:d|ll|m|re|s|t|ve))?",Vt="(?:"+Zt+"(?:D|LL|M|RE|S|T|VE))?",Ln=mn+"?",Cr="["+pn+"]?",yn="(?:"+vn+"(?:"+[un,wr,Rn].join("|")+")"+Cr+Ln+")*",Ar="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tn=Cr+Ln+yn,Nn="(?:"+[en,wr,Rn].join("|")+")"+tn,Mr="(?:"+[un+Hn+"?",Hn,wr,Rn,Un].join("|")+")",Er=RegExp(Zt,"g"),ai=RegExp(Hn,"g"),On=RegExp(gn+"(?="+gn+")|"+Mr+tn,"g"),$t=RegExp([cn+"?"+at+"+"+xr+"(?="+[_r,cn,"$"].join("|")+")",br+"+"+Vt+"(?="+[_r,cn+Qr,"$"].join("|")+")",cn+"?"+Qr+"+"+xr,cn+"+"+Vt,Qt,Ar,ln,Nn].join("|"),"g"),rr=RegExp("["+vn+Wt+kn+pn+"]"),Fr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Pr=-1,st={};st[He]=st[St]=st[ft]=st[an]=st[ur]=st[Zn]=st[Cn]=st[tt]=st[Ot]=!0,st[we]=st[ke]=st[Ae]=st[Ve]=st[ze]=st[it]=st[me]=st[Ze]=st[Me]=st[vt]=st[et]=st[Rt]=st[ct]=st[Ct]=st[Fe]=!1;var q={};q[we]=q[ke]=q[Ae]=q[ze]=q[Ve]=q[it]=q[He]=q[St]=q[ft]=q[an]=q[ur]=q[Me]=q[vt]=q[et]=q[Rt]=q[ct]=q[Ct]=q[zt]=q[Zn]=q[Cn]=q[tt]=q[Ot]=!0,q[me]=q[Ze]=q[Fe]=!1;var Ce={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t=parseFloat,r=parseInt,i=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,a=typeof self=="object"&&self&&self.Object===Object&&self,s=i||a||Function("return this")(),u=d&&!d.nodeType&&d,p=u&&!0&&f&&!f.nodeType&&f,T=p&&p.exports===u,x=T&&i.process,N=function(){try{var ee=p&&p.require&&p.require("util").types;return ee||x&&x.binding&&x.binding("util")}catch{}}(),W=N&&N.isArrayBuffer,Y=N&&N.isDate,oe=N&&N.isMap,te=N&&N.isRegExp,ne=N&&N.isSet,ve=N&&N.isTypedArray;function ue(ee,he,le){switch(le.length){case 0:return ee.call(he);case 1:return ee.call(he,le[0]);case 2:return ee.call(he,le[0],le[1]);case 3:return ee.call(he,le[0],le[1],le[2])}return ee.apply(he,le)}function Re(ee,he,le,Le){for(var je=-1,ut=ee==null?0:ee.length;++je<ut;){var Ht=ee[je];he(Le,Ht,le(Ht),ee)}return Le}function Se(ee,he){for(var le=-1,Le=ee==null?0:ee.length;++le<Le&&he(ee[le],le,ee)!==!1;);return ee}function Pe(ee,he){for(var le=ee==null?0:ee.length;le--&&he(ee[le],le,ee)!==!1;);return ee}function nt(ee,he){for(var le=-1,Le=ee==null?0:ee.length;++le<Le;)if(!he(ee[le],le,ee))return!1;return!0}function wt(ee,he){for(var le=-1,Le=ee==null?0:ee.length,je=0,ut=[];++le<Le;){var Ht=ee[le];he(Ht,le,ee)&&(ut[je++]=Ht)}return ut}function bt(ee,he){var le=ee==null?0:ee.length;return!!le&&mi(ee,he,0)>-1}function Mt(ee,he,le){for(var Le=-1,je=ee==null?0:ee.length;++Le<je;)if(le(he,ee[Le]))return!0;return!1}function De(ee,he){for(var le=-1,Le=ee==null?0:ee.length,je=Array(Le);++le<Le;)je[le]=he(ee[le],le,ee);return je}function Ue(ee,he){for(var le=-1,Le=he.length,je=ee.length;++le<Le;)ee[je+le]=he[le];return ee}function Ft(ee,he,le,Le){var je=-1,ut=ee==null?0:ee.length;for(Le&&ut&&(le=ee[++je]);++je<ut;)le=he(le,ee[je],je,ee);return le}function nn(ee,he,le,Le){var je=ee==null?0:ee.length;for(Le&&je&&(le=ee[--je]);je--;)le=he(le,ee[je],je,ee);return le}function Pt(ee,he){for(var le=-1,Le=ee==null?0:ee.length;++le<Le;)if(he(ee[le],le,ee))return!0;return!1}var Dr=Lo("length");function si(ee){return ee.split("")}function Ri(ee){return ee.match(Sn)||[]}function La(ee,he,le){var Le;return le(ee,function(je,ut,Ht){if(he(je,ut,Ht))return Le=ut,!1}),Le}function zi(ee,he,le,Le){for(var je=ee.length,ut=le+(Le?1:-1);Le?ut--:++ut<je;)if(he(ee[ut],ut,ee))return ut;return-1}function mi(ee,he,le){return he===he?Dl(ee,he,le):zi(ee,Na,le)}function Sl(ee,he,le,Le){for(var je=le-1,ut=ee.length;++je<ut;)if(Le(ee[je],he))return je;return-1}function Na(ee){return ee!==ee}function Oa(ee,he){var le=ee==null?0:ee.length;return le?Oo(ee,he)/le:re}function Lo(ee){return function(he){return he==null?l:he[ee]}}function No(ee){return function(he){return ee==null?l:ee[he]}}function Ia(ee,he,le,Le,je){return je(ee,function(ut,Ht,xt){le=Le?(Le=!1,ut):he(le,ut,Ht,xt)}),le}function kl(ee,he){var le=ee.length;for(ee.sort(he);le--;)ee[le]=ee[le].value;return ee}function Oo(ee,he){for(var le,Le=-1,je=ee.length;++Le<je;){var ut=he(ee[Le]);ut!==l&&(le=le===l?ut:le+ut)}return le}function Io(ee,he){for(var le=-1,Le=Array(ee);++le<ee;)Le[le]=he(le);return Le}function Tl(ee,he){return De(he,function(le){return[le,ee[le]]})}function In(ee){return function(he){return ee(he)}}function Mo(ee,he){return De(he,function(le){return ee[le]})}function Li(ee,he){return ee.has(he)}function Ma(ee,he){for(var le=-1,Le=ee.length;++le<Le&&mi(he,ee[le],0)>-1;);return le}function Fa(ee,he){for(var le=ee.length;le--&&mi(he,ee[le],0)>-1;);return le}function Rl(ee,he){for(var le=ee.length,Le=0;le--;)ee[le]===he&&++Le;return Le}var Ll=No(Ce),Nl=No(be);function Ol(ee){return"\\"+mt[ee]}function Il(ee,he){return ee==null?l:ee[he]}function vi(ee){return rr.test(ee)}function Ml(ee){return Fr.test(ee)}function Fl(ee){for(var he,le=[];!(he=ee.next()).done;)le.push(he.value);return le}function Fo(ee){var he=-1,le=Array(ee.size);return ee.forEach(function(Le,je){le[++he]=[je,Le]}),le}function Pa(ee,he){return function(le){return ee(he(le))}}function Yr(ee,he){for(var le=-1,Le=ee.length,je=0,ut=[];++le<Le;){var Ht=ee[le];(Ht===he||Ht===K)&&(ee[le]=K,ut[je++]=le)}return ut}function Ki(ee){var he=-1,le=Array(ee.size);return ee.forEach(function(Le){le[++he]=Le}),le}function Pl(ee){var he=-1,le=Array(ee.size);return ee.forEach(function(Le){le[++he]=[Le,Le]}),le}function Dl(ee,he,le){for(var Le=le-1,je=ee.length;++Le<je;)if(ee[Le]===he)return Le;return-1}function Bl(ee,he,le){for(var Le=le+1;Le--;)if(ee[Le]===he)return Le;return Le}function yi(ee){return vi(ee)?$l(ee):Dr(ee)}function ir(ee){return vi(ee)?Ul(ee):si(ee)}var Wl=No(Qe);function $l(ee){for(var he=On.lastIndex=0;On.test(ee);)++he;return he}function Ul(ee){return ee.match(On)||[]}function Hl(ee){return ee.match($t)||[]}var jl=function ee(he){he=he==null?s:_i.defaults(s.Object(),he,_i.pick(s,Sr));var le=he.Array,Le=he.Date,je=he.Error,ut=he.Function,Ht=he.Math,xt=he.Object,Po=he.RegExp,ql=he.String,qn=he.TypeError,Vi=le.prototype,zl=ut.prototype,wi=xt.prototype,Gi=he["__core-js_shared__"],Ji=zl.toString,gt=wi.hasOwnProperty,Kl=0,Da=function(){var e=/[^.]+$/.exec(Gi&&Gi.keys&&Gi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Zi=wi.toString,Vl=Ji.call(xt),Gl=s._,Jl=Po("^"+Ji.call(gt).replace(Qn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qi=T?he.Buffer:l,Xr=he.Symbol,Yi=he.Uint8Array,Ba=Qi?Qi.allocUnsafe:l,Xi=Pa(xt.getPrototypeOf,xt),Wa=xt.create,$a=wi.propertyIsEnumerable,eo=Vi.splice,Ua=Xr?Xr.isConcatSpreadable:l,Ni=Xr?Xr.iterator:l,li=Xr?Xr.toStringTag:l,to=function(){try{var e=di(xt,"defineProperty");return e({},"",{}),e}catch{}}(),Zl=he.clearTimeout!==s.clearTimeout&&he.clearTimeout,Ql=Le&&Le.now!==s.Date.now&&Le.now,Yl=he.setTimeout!==s.setTimeout&&he.setTimeout,no=Ht.ceil,ro=Ht.floor,Do=xt.getOwnPropertySymbols,Xl=Qi?Qi.isBuffer:l,Ha=he.isFinite,eu=Vi.join,tu=Pa(xt.keys,xt),jt=Ht.max,rn=Ht.min,nu=Le.now,ru=he.parseInt,ja=Ht.random,iu=Vi.reverse,Bo=di(he,"DataView"),Oi=di(he,"Map"),Wo=di(he,"Promise"),bi=di(he,"Set"),Ii=di(he,"WeakMap"),Mi=di(xt,"create"),io=Ii&&new Ii,xi={},ou=pi(Bo),au=pi(Oi),su=pi(Wo),lu=pi(bi),uu=pi(Ii),oo=Xr?Xr.prototype:l,Fi=oo?oo.valueOf:l,qa=oo?oo.toString:l;function S(e){if(Lt(e)&&!qe(e)&&!(e instanceof Xe)){if(e instanceof zn)return e;if(gt.call(e,"__wrapped__"))return zs(e)}return new zn(e)}var Ci=function(){function e(){}return function(n){if(!Tt(n))return{};if(Wa)return Wa(n);e.prototype=n;var o=new e;return e.prototype=l,o}}();function ao(){}function zn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=l}S.templateSettings={escape:fr,evaluate:sn,interpolate:hr,variable:"",imports:{_:S}},S.prototype=ao.prototype,S.prototype.constructor=S,zn.prototype=Ci(ao.prototype),zn.prototype.constructor=zn;function Xe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function cu(){var e=new Xe(this.__wrapped__);return e.__actions__=_n(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=_n(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=_n(this.__views__),e}function fu(){if(this.__filtered__){var e=new Xe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function hu(){var e=this.__wrapped__.value(),n=this.__dir__,o=qe(e),c=n<0,g=o?e.length:0,L=Ac(0,g,this.__views__),j=L.start,J=L.end,X=J-j,de=c?J:j-1,pe=this.__iteratees__,ge=pe.length,Ee=0,Oe=rn(X,this.__takeCount__);if(!o||!c&&g==X&&Oe==X)return ps(e,this.__actions__);var $e=[];e:for(;X--&&Ee<Oe;){de+=n;for(var Ge=-1,We=e[de];++Ge<ge;){var Ye=pe[Ge],rt=Ye.iteratee,Pn=Ye.type,dn=rt(We);if(Pn==ye)We=dn;else if(!dn){if(Pn==ce)continue e;break e}}$e[Ee++]=We}return $e}Xe.prototype=Ci(ao.prototype),Xe.prototype.constructor=Xe;function ui(e){var n=-1,o=e==null?0:e.length;for(this.clear();++n<o;){var c=e[n];this.set(c[0],c[1])}}function du(){this.__data__=Mi?Mi(null):{},this.size=0}function pu(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function gu(e){var n=this.__data__;if(Mi){var o=n[e];return o===k?l:o}return gt.call(n,e)?n[e]:l}function mu(e){var n=this.__data__;return Mi?n[e]!==l:gt.call(n,e)}function vu(e,n){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Mi&&n===l?k:n,this}ui.prototype.clear=du,ui.prototype.delete=pu,ui.prototype.get=gu,ui.prototype.has=mu,ui.prototype.set=vu;function Br(e){var n=-1,o=e==null?0:e.length;for(this.clear();++n<o;){var c=e[n];this.set(c[0],c[1])}}function yu(){this.__data__=[],this.size=0}function _u(e){var n=this.__data__,o=so(n,e);if(o<0)return!1;var c=n.length-1;return o==c?n.pop():eo.call(n,o,1),--this.size,!0}function wu(e){var n=this.__data__,o=so(n,e);return o<0?l:n[o][1]}function bu(e){return so(this.__data__,e)>-1}function xu(e,n){var o=this.__data__,c=so(o,e);return c<0?(++this.size,o.push([e,n])):o[c][1]=n,this}Br.prototype.clear=yu,Br.prototype.delete=_u,Br.prototype.get=wu,Br.prototype.has=bu,Br.prototype.set=xu;function Wr(e){var n=-1,o=e==null?0:e.length;for(this.clear();++n<o;){var c=e[n];this.set(c[0],c[1])}}function Cu(){this.size=0,this.__data__={hash:new ui,map:new(Oi||Br),string:new ui}}function Au(e){var n=wo(this,e).delete(e);return this.size-=n?1:0,n}function Eu(e){return wo(this,e).get(e)}function Su(e){return wo(this,e).has(e)}function ku(e,n){var o=wo(this,e),c=o.size;return o.set(e,n),this.size+=o.size==c?0:1,this}Wr.prototype.clear=Cu,Wr.prototype.delete=Au,Wr.prototype.get=Eu,Wr.prototype.has=Su,Wr.prototype.set=ku;function ci(e){var n=-1,o=e==null?0:e.length;for(this.__data__=new Wr;++n<o;)this.add(e[n])}function Tu(e){return this.__data__.set(e,k),this}function Ru(e){return this.__data__.has(e)}ci.prototype.add=ci.prototype.push=Tu,ci.prototype.has=Ru;function or(e){var n=this.__data__=new Br(e);this.size=n.size}function Lu(){this.__data__=new Br,this.size=0}function Nu(e){var n=this.__data__,o=n.delete(e);return this.size=n.size,o}function Ou(e){return this.__data__.get(e)}function Iu(e){return this.__data__.has(e)}function Mu(e,n){var o=this.__data__;if(o instanceof Br){var c=o.__data__;if(!Oi||c.length<v-1)return c.push([e,n]),this.size=++o.size,this;o=this.__data__=new Wr(c)}return o.set(e,n),this.size=o.size,this}or.prototype.clear=Lu,or.prototype.delete=Nu,or.prototype.get=Ou,or.prototype.has=Iu,or.prototype.set=Mu;function za(e,n){var o=qe(e),c=!o&&gi(e),g=!o&&!c&&ii(e),L=!o&&!c&&!g&&ki(e),j=o||c||g||L,J=j?Io(e.length,ql):[],X=J.length;for(var de in e)(n||gt.call(e,de))&&!(j&&(de=="length"||g&&(de=="offset"||de=="parent")||L&&(de=="buffer"||de=="byteLength"||de=="byteOffset")||jr(de,X)))&&J.push(de);return J}function Ka(e){var n=e.length;return n?e[Zo(0,n-1)]:l}function Fu(e,n){return bo(_n(e),fi(n,0,e.length))}function Pu(e){return bo(_n(e))}function $o(e,n,o){(o!==l&&!ar(e[n],o)||o===l&&!(n in e))&&$r(e,n,o)}function Pi(e,n,o){var c=e[n];(!(gt.call(e,n)&&ar(c,o))||o===l&&!(n in e))&&$r(e,n,o)}function so(e,n){for(var o=e.length;o--;)if(ar(e[o][0],n))return o;return-1}function Du(e,n,o,c){return ei(e,function(g,L,j){n(c,g,o(g),j)}),c}function Va(e,n){return e&&Tr(n,Gt(n),e)}function Bu(e,n){return e&&Tr(n,bn(n),e)}function $r(e,n,o){n=="__proto__"&&to?to(e,n,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[n]=o}function Uo(e,n){for(var o=-1,c=n.length,g=le(c),L=e==null;++o<c;)g[o]=L?l:ba(e,n[o]);return g}function fi(e,n,o){return e===e&&(o!==l&&(e=e<=o?e:o),n!==l&&(e=e>=n?e:n)),e}function Kn(e,n,o,c,g,L){var j,J=n&B,X=n&z,de=n&P;if(o&&(j=g?o(e,c,g,L):o(e)),j!==l)return j;if(!Tt(e))return e;var pe=qe(e);if(pe){if(j=Sc(e),!J)return _n(e,j)}else{var ge=on(e),Ee=ge==Ze||ge==Ie;if(ii(e))return vs(e,J);if(ge==et||ge==we||Ee&&!g){if(j=X||Ee?{}:Ps(e),!J)return X?gc(e,Bu(j,e)):pc(e,Va(j,e))}else{if(!q[ge])return g?e:{};j=kc(e,ge,J)}}L||(L=new or);var Oe=L.get(e);if(Oe)return Oe;L.set(e,j),fl(e)?e.forEach(function(We){j.add(Kn(We,n,o,We,e,L))}):ul(e)&&e.forEach(function(We,Ye){j.set(Ye,Kn(We,n,o,Ye,e,L))});var $e=de?X?sa:aa:X?bn:Gt,Ge=pe?l:$e(e);return Se(Ge||e,function(We,Ye){Ge&&(Ye=We,We=e[Ye]),Pi(j,Ye,Kn(We,n,o,Ye,e,L))}),j}function Wu(e){var n=Gt(e);return function(o){return Ga(o,e,n)}}function Ga(e,n,o){var c=o.length;if(e==null)return!c;for(e=xt(e);c--;){var g=o[c],L=n[g],j=e[g];if(j===l&&!(g in e)||!L(j))return!1}return!0}function Ja(e,n,o){if(typeof e!="function")throw new qn(_);return ji(function(){e.apply(l,o)},n)}function Di(e,n,o,c){var g=-1,L=bt,j=!0,J=e.length,X=[],de=n.length;if(!J)return X;o&&(n=De(n,In(o))),c?(L=Mt,j=!1):n.length>=v&&(L=Li,j=!1,n=new ci(n));e:for(;++g<J;){var pe=e[g],ge=o==null?pe:o(pe);if(pe=c||pe!==0?pe:0,j&&ge===ge){for(var Ee=de;Ee--;)if(n[Ee]===ge)continue e;X.push(pe)}else L(n,ge,c)||X.push(pe)}return X}var ei=xs(kr),Za=xs(jo,!0);function $u(e,n){var o=!0;return ei(e,function(c,g,L){return o=!!n(c,g,L),o}),o}function lo(e,n,o){for(var c=-1,g=e.length;++c<g;){var L=e[c],j=n(L);if(j!=null&&(J===l?j===j&&!Fn(j):o(j,J)))var J=j,X=L}return X}function Uu(e,n,o,c){var g=e.length;for(o=Ke(o),o<0&&(o=-o>g?0:g+o),c=c===l||c>g?g:Ke(c),c<0&&(c+=g),c=o>c?0:dl(c);o<c;)e[o++]=n;return e}function Qa(e,n){var o=[];return ei(e,function(c,g,L){n(c,g,L)&&o.push(c)}),o}function Yt(e,n,o,c,g){var L=-1,j=e.length;for(o||(o=Rc),g||(g=[]);++L<j;){var J=e[L];n>0&&o(J)?n>1?Yt(J,n-1,o,c,g):Ue(g,J):c||(g[g.length]=J)}return g}var Ho=Cs(),Ya=Cs(!0);function kr(e,n){return e&&Ho(e,n,Gt)}function jo(e,n){return e&&Ya(e,n,Gt)}function uo(e,n){return wt(n,function(o){return qr(e[o])})}function hi(e,n){n=ni(n,e);for(var o=0,c=n.length;e!=null&&o<c;)e=e[Rr(n[o++])];return o&&o==c?e:l}function Xa(e,n,o){var c=n(e);return qe(e)?c:Ue(c,o(e))}function fn(e){return e==null?e===l?lr:pt:li&&li in xt(e)?Cc(e):Pc(e)}function qo(e,n){return e>n}function Hu(e,n){return e!=null&&gt.call(e,n)}function ju(e,n){return e!=null&&n in xt(e)}function qu(e,n,o){return e>=rn(n,o)&&e<jt(n,o)}function zo(e,n,o){for(var c=o?Mt:bt,g=e[0].length,L=e.length,j=L,J=le(L),X=1/0,de=[];j--;){var pe=e[j];j&&n&&(pe=De(pe,In(n))),X=rn(pe.length,X),J[j]=!o&&(n||g>=120&&pe.length>=120)?new ci(j&&pe):l}pe=e[0];var ge=-1,Ee=J[0];e:for(;++ge<g&&de.length<X;){var Oe=pe[ge],$e=n?n(Oe):Oe;if(Oe=o||Oe!==0?Oe:0,!(Ee?Li(Ee,$e):c(de,$e,o))){for(j=L;--j;){var Ge=J[j];if(!(Ge?Li(Ge,$e):c(e[j],$e,o)))continue e}Ee&&Ee.push($e),de.push(Oe)}}return de}function zu(e,n,o,c){return kr(e,function(g,L,j){n(c,o(g),L,j)}),c}function Bi(e,n,o){n=ni(n,e),e=$s(e,n);var c=e==null?e:e[Rr(Gn(n))];return c==null?l:ue(c,e,o)}function es(e){return Lt(e)&&fn(e)==we}function Ku(e){return Lt(e)&&fn(e)==Ae}function Vu(e){return Lt(e)&&fn(e)==it}function Wi(e,n,o,c,g){return e===n?!0:e==null||n==null||!Lt(e)&&!Lt(n)?e!==e&&n!==n:Gu(e,n,o,c,Wi,g)}function Gu(e,n,o,c,g,L){var j=qe(e),J=qe(n),X=j?ke:on(e),de=J?ke:on(n);X=X==we?et:X,de=de==we?et:de;var pe=X==et,ge=de==et,Ee=X==de;if(Ee&&ii(e)){if(!ii(n))return!1;j=!0,pe=!1}if(Ee&&!pe)return L||(L=new or),j||ki(e)?Is(e,n,o,c,g,L):bc(e,n,X,o,c,g,L);if(!(o&H)){var Oe=pe&&gt.call(e,"__wrapped__"),$e=ge&&gt.call(n,"__wrapped__");if(Oe||$e){var Ge=Oe?e.value():e,We=$e?n.value():n;return L||(L=new or),g(Ge,We,o,c,L)}}return Ee?(L||(L=new or),xc(e,n,o,c,g,L)):!1}function Ju(e){return Lt(e)&&on(e)==Me}function Ko(e,n,o,c){var g=o.length,L=g,j=!c;if(e==null)return!L;for(e=xt(e);g--;){var J=o[g];if(j&&J[2]?J[1]!==e[J[0]]:!(J[0]in e))return!1}for(;++g<L;){J=o[g];var X=J[0],de=e[X],pe=J[1];if(j&&J[2]){if(de===l&&!(X in e))return!1}else{var ge=new or;if(c)var Ee=c(de,pe,X,e,n,ge);if(!(Ee===l?Wi(pe,de,H|$,c,ge):Ee))return!1}}return!0}function ts(e){if(!Tt(e)||Nc(e))return!1;var n=qr(e)?Jl:Et;return n.test(pi(e))}function Zu(e){return Lt(e)&&fn(e)==Rt}function Qu(e){return Lt(e)&&on(e)==ct}function Yu(e){return Lt(e)&&ko(e.length)&&!!st[fn(e)]}function ns(e){return typeof e=="function"?e:e==null?xn:typeof e=="object"?qe(e)?os(e[0],e[1]):is(e):Al(e)}function Vo(e){if(!Hi(e))return tu(e);var n=[];for(var o in xt(e))gt.call(e,o)&&o!="constructor"&&n.push(o);return n}function Xu(e){if(!Tt(e))return Fc(e);var n=Hi(e),o=[];for(var c in e)c=="constructor"&&(n||!gt.call(e,c))||o.push(c);return o}function Go(e,n){return e<n}function rs(e,n){var o=-1,c=wn(e)?le(e.length):[];return ei(e,function(g,L,j){c[++o]=n(g,L,j)}),c}function is(e){var n=ua(e);return n.length==1&&n[0][2]?Bs(n[0][0],n[0][1]):function(o){return o===e||Ko(o,e,n)}}function os(e,n){return fa(e)&&Ds(n)?Bs(Rr(e),n):function(o){var c=ba(o,e);return c===l&&c===n?xa(o,e):Wi(n,c,H|$)}}function co(e,n,o,c,g){e!==n&&Ho(n,function(L,j){if(g||(g=new or),Tt(L))ec(e,n,j,o,co,c,g);else{var J=c?c(da(e,j),L,j+"",e,n,g):l;J===l&&(J=L),$o(e,j,J)}},bn)}function ec(e,n,o,c,g,L,j){var J=da(e,o),X=da(n,o),de=j.get(X);if(de){$o(e,o,de);return}var pe=L?L(J,X,o+"",e,n,j):l,ge=pe===l;if(ge){var Ee=qe(X),Oe=!Ee&&ii(X),$e=!Ee&&!Oe&&ki(X);pe=X,Ee||Oe||$e?qe(J)?pe=J:Dt(J)?pe=_n(J):Oe?(ge=!1,pe=vs(X,!0)):$e?(ge=!1,pe=ys(X,!0)):pe=[]:qi(X)||gi(X)?(pe=J,gi(J)?pe=pl(J):(!Tt(J)||qr(J))&&(pe=Ps(X))):ge=!1}ge&&(j.set(X,pe),g(pe,X,c,L,j),j.delete(X)),$o(e,o,pe)}function as(e,n){var o=e.length;if(!!o)return n+=n<0?o:0,jr(n,o)?e[n]:l}function ss(e,n,o){n.length?n=De(n,function(L){return qe(L)?function(j){return hi(j,L.length===1?L[0]:L)}:L}):n=[xn];var c=-1;n=De(n,In(Be()));var g=rs(e,function(L,j,J){var X=De(n,function(de){return de(L)});return{criteria:X,index:++c,value:L}});return kl(g,function(L,j){return dc(L,j,o)})}function tc(e,n){return ls(e,n,function(o,c){return xa(e,c)})}function ls(e,n,o){for(var c=-1,g=n.length,L={};++c<g;){var j=n[c],J=hi(e,j);o(J,j)&&$i(L,ni(j,e),J)}return L}function nc(e){return function(n){return hi(n,e)}}function Jo(e,n,o,c){var g=c?Sl:mi,L=-1,j=n.length,J=e;for(e===n&&(n=_n(n)),o&&(J=De(e,In(o)));++L<j;)for(var X=0,de=n[L],pe=o?o(de):de;(X=g(J,pe,X,c))>-1;)J!==e&&eo.call(J,X,1),eo.call(e,X,1);return e}function us(e,n){for(var o=e?n.length:0,c=o-1;o--;){var g=n[o];if(o==c||g!==L){var L=g;jr(g)?eo.call(e,g,1):Xo(e,g)}}return e}function Zo(e,n){return e+ro(ja()*(n-e+1))}function rc(e,n,o,c){for(var g=-1,L=jt(no((n-e)/(o||1)),0),j=le(L);L--;)j[c?L:++g]=e,e+=o;return j}function Qo(e,n){var o="";if(!e||n<1||n>ie)return o;do n%2&&(o+=e),n=ro(n/2),n&&(e+=e);while(n);return o}function Je(e,n){return pa(Ws(e,n,xn),e+"")}function ic(e){return Ka(Ti(e))}function oc(e,n){var o=Ti(e);return bo(o,fi(n,0,o.length))}function $i(e,n,o,c){if(!Tt(e))return e;n=ni(n,e);for(var g=-1,L=n.length,j=L-1,J=e;J!=null&&++g<L;){var X=Rr(n[g]),de=o;if(X==="__proto__"||X==="constructor"||X==="prototype")return e;if(g!=j){var pe=J[X];de=c?c(pe,X,J):l,de===l&&(de=Tt(pe)?pe:jr(n[g+1])?[]:{})}Pi(J,X,de),J=J[X]}return e}var cs=io?function(e,n){return io.set(e,n),e}:xn,ac=to?function(e,n){return to(e,"toString",{configurable:!0,enumerable:!1,value:Aa(n),writable:!0})}:xn;function sc(e){return bo(Ti(e))}function Vn(e,n,o){var c=-1,g=e.length;n<0&&(n=-n>g?0:g+n),o=o>g?g:o,o<0&&(o+=g),g=n>o?0:o-n>>>0,n>>>=0;for(var L=le(g);++c<g;)L[c]=e[c+n];return L}function lc(e,n){var o;return ei(e,function(c,g,L){return o=n(c,g,L),!o}),!!o}function fo(e,n,o){var c=0,g=e==null?c:e.length;if(typeof n=="number"&&n===n&&g<=U){for(;c<g;){var L=c+g>>>1,j=e[L];j!==null&&!Fn(j)&&(o?j<=n:j<n)?c=L+1:g=L}return g}return Yo(e,n,xn,o)}function Yo(e,n,o,c){var g=0,L=e==null?0:e.length;if(L===0)return 0;n=o(n);for(var j=n!==n,J=n===null,X=Fn(n),de=n===l;g<L;){var pe=ro((g+L)/2),ge=o(e[pe]),Ee=ge!==l,Oe=ge===null,$e=ge===ge,Ge=Fn(ge);if(j)var We=c||$e;else de?We=$e&&(c||Ee):J?We=$e&&Ee&&(c||!Oe):X?We=$e&&Ee&&!Oe&&(c||!Ge):Oe||Ge?We=!1:We=c?ge<=n:ge<n;We?g=pe+1:L=pe}return rn(L,Te)}function fs(e,n){for(var o=-1,c=e.length,g=0,L=[];++o<c;){var j=e[o],J=n?n(j):j;if(!o||!ar(J,X)){var X=J;L[g++]=j===0?0:j}}return L}function hs(e){return typeof e=="number"?e:Fn(e)?re:+e}function Mn(e){if(typeof e=="string")return e;if(qe(e))return De(e,Mn)+"";if(Fn(e))return qa?qa.call(e):"";var n=e+"";return n=="0"&&1/e==-fe?"-0":n}function ti(e,n,o){var c=-1,g=bt,L=e.length,j=!0,J=[],X=J;if(o)j=!1,g=Mt;else if(L>=v){var de=n?null:_c(e);if(de)return Ki(de);j=!1,g=Li,X=new ci}else X=n?[]:J;e:for(;++c<L;){var pe=e[c],ge=n?n(pe):pe;if(pe=o||pe!==0?pe:0,j&&ge===ge){for(var Ee=X.length;Ee--;)if(X[Ee]===ge)continue e;n&&X.push(ge),J.push(pe)}else g(X,ge,o)||(X!==J&&X.push(ge),J.push(pe))}return J}function Xo(e,n){return n=ni(n,e),e=$s(e,n),e==null||delete e[Rr(Gn(n))]}function ds(e,n,o,c){return $i(e,n,o(hi(e,n)),c)}function ho(e,n,o,c){for(var g=e.length,L=c?g:-1;(c?L--:++L<g)&&n(e[L],L,e););return o?Vn(e,c?0:L,c?L+1:g):Vn(e,c?L+1:0,c?g:L)}function ps(e,n){var o=e;return o instanceof Xe&&(o=o.value()),Ft(n,function(c,g){return g.func.apply(g.thisArg,Ue([c],g.args))},o)}function ea(e,n,o){var c=e.length;if(c<2)return c?ti(e[0]):[];for(var g=-1,L=le(c);++g<c;)for(var j=e[g],J=-1;++J<c;)J!=g&&(L[g]=Di(L[g]||j,e[J],n,o));return ti(Yt(L,1),n,o)}function gs(e,n,o){for(var c=-1,g=e.length,L=n.length,j={};++c<g;){var J=c<L?n[c]:l;o(j,e[c],J)}return j}function ta(e){return Dt(e)?e:[]}function na(e){return typeof e=="function"?e:xn}function ni(e,n){return qe(e)?e:fa(e,n)?[e]:qs(dt(e))}var uc=Je;function ri(e,n,o){var c=e.length;return o=o===l?c:o,!n&&o>=c?e:Vn(e,n,o)}var ms=Zl||function(e){return s.clearTimeout(e)};function vs(e,n){if(n)return e.slice();var o=e.length,c=Ba?Ba(o):new e.constructor(o);return e.copy(c),c}function ra(e){var n=new e.constructor(e.byteLength);return new Yi(n).set(new Yi(e)),n}function cc(e,n){var o=n?ra(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function fc(e){var n=new e.constructor(e.source,Or.exec(e));return n.lastIndex=e.lastIndex,n}function hc(e){return Fi?xt(Fi.call(e)):{}}function ys(e,n){var o=n?ra(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function _s(e,n){if(e!==n){var o=e!==l,c=e===null,g=e===e,L=Fn(e),j=n!==l,J=n===null,X=n===n,de=Fn(n);if(!J&&!de&&!L&&e>n||L&&j&&X&&!J&&!de||c&&j&&X||!o&&X||!g)return 1;if(!c&&!L&&!de&&e<n||de&&o&&g&&!c&&!L||J&&o&&g||!j&&g||!X)return-1}return 0}function dc(e,n,o){for(var c=-1,g=e.criteria,L=n.criteria,j=g.length,J=o.length;++c<j;){var X=_s(g[c],L[c]);if(X){if(c>=J)return X;var de=o[c];return X*(de=="desc"?-1:1)}}return e.index-n.index}function ws(e,n,o,c){for(var g=-1,L=e.length,j=o.length,J=-1,X=n.length,de=jt(L-j,0),pe=le(X+de),ge=!c;++J<X;)pe[J]=n[J];for(;++g<j;)(ge||g<L)&&(pe[o[g]]=e[g]);for(;de--;)pe[J++]=e[g++];return pe}function bs(e,n,o,c){for(var g=-1,L=e.length,j=-1,J=o.length,X=-1,de=n.length,pe=jt(L-J,0),ge=le(pe+de),Ee=!c;++g<pe;)ge[g]=e[g];for(var Oe=g;++X<de;)ge[Oe+X]=n[X];for(;++j<J;)(Ee||g<L)&&(ge[Oe+o[j]]=e[g++]);return ge}function _n(e,n){var o=-1,c=e.length;for(n||(n=le(c));++o<c;)n[o]=e[o];return n}function Tr(e,n,o,c){var g=!o;o||(o={});for(var L=-1,j=n.length;++L<j;){var J=n[L],X=c?c(o[J],e[J],J,o,e):l;X===l&&(X=e[J]),g?$r(o,J,X):Pi(o,J,X)}return o}function pc(e,n){return Tr(e,ca(e),n)}function gc(e,n){return Tr(e,Ms(e),n)}function po(e,n){return function(o,c){var g=qe(o)?Re:Du,L=n?n():{};return g(o,e,Be(c,2),L)}}function Ai(e){return Je(function(n,o){var c=-1,g=o.length,L=g>1?o[g-1]:l,j=g>2?o[2]:l;for(L=e.length>3&&typeof L=="function"?(g--,L):l,j&&hn(o[0],o[1],j)&&(L=g<3?l:L,g=1),n=xt(n);++c<g;){var J=o[c];J&&e(n,J,c,L)}return n})}function xs(e,n){return function(o,c){if(o==null)return o;if(!wn(o))return e(o,c);for(var g=o.length,L=n?g:-1,j=xt(o);(n?L--:++L<g)&&c(j[L],L,j)!==!1;);return o}}function Cs(e){return function(n,o,c){for(var g=-1,L=xt(n),j=c(n),J=j.length;J--;){var X=j[e?J:++g];if(o(L[X],X,L)===!1)break}return n}}function mc(e,n,o){var c=n&Q,g=Ui(e);function L(){var j=this&&this!==s&&this instanceof L?g:e;return j.apply(c?o:this,arguments)}return L}function As(e){return function(n){n=dt(n);var o=vi(n)?ir(n):l,c=o?o[0]:n.charAt(0),g=o?ri(o,1).join(""):n.slice(1);return c[e]()+g}}function Ei(e){return function(n){return Ft(xl(bl(n).replace(Er,"")),e,"")}}function Ui(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var o=Ci(e.prototype),c=e.apply(o,n);return Tt(c)?c:o}}function vc(e,n,o){var c=Ui(e);function g(){for(var L=arguments.length,j=le(L),J=L,X=Si(g);J--;)j[J]=arguments[J];var de=L<3&&j[0]!==X&&j[L-1]!==X?[]:Yr(j,X);if(L-=de.length,L<o)return Rs(e,n,go,g.placeholder,l,j,de,l,l,o-L);var pe=this&&this!==s&&this instanceof g?c:e;return ue(pe,this,j)}return g}function Es(e){return function(n,o,c){var g=xt(n);if(!wn(n)){var L=Be(o,3);n=Gt(n),o=function(J){return L(g[J],J,g)}}var j=e(n,o,c);return j>-1?g[L?n[j]:j]:l}}function Ss(e){return Hr(function(n){var o=n.length,c=o,g=zn.prototype.thru;for(e&&n.reverse();c--;){var L=n[c];if(typeof L!="function")throw new qn(_);if(g&&!j&&_o(L)=="wrapper")var j=new zn([],!0)}for(c=j?c:o;++c<o;){L=n[c];var J=_o(L),X=J=="wrapper"?la(L):l;X&&ha(X[0])&&X[1]==(C|E|O|h)&&!X[4].length&&X[9]==1?j=j[_o(X[0])].apply(j,X[3]):j=L.length==1&&ha(L)?j[J]():j.thru(L)}return function(){var de=arguments,pe=de[0];if(j&&de.length==1&&qe(pe))return j.plant(pe).value();for(var ge=0,Ee=o?n[ge].apply(this,de):pe;++ge<o;)Ee=n[ge].call(this,Ee);return Ee}})}function go(e,n,o,c,g,L,j,J,X,de){var pe=n&C,ge=n&Q,Ee=n&D,Oe=n&(E|w),$e=n&m,Ge=Ee?l:Ui(e);function We(){for(var Ye=arguments.length,rt=le(Ye),Pn=Ye;Pn--;)rt[Pn]=arguments[Pn];if(Oe)var dn=Si(We),Dn=Rl(rt,dn);if(c&&(rt=ws(rt,c,g,Oe)),L&&(rt=bs(rt,L,j,Oe)),Ye-=Dn,Oe&&Ye<de){var Bt=Yr(rt,dn);return Rs(e,n,go,We.placeholder,o,rt,Bt,J,X,de-Ye)}var sr=ge?o:this,Kr=Ee?sr[e]:e;return Ye=rt.length,J?rt=Dc(rt,J):$e&&Ye>1&&rt.reverse(),pe&&X<Ye&&(rt.length=X),this&&this!==s&&this instanceof We&&(Kr=Ge||Ui(Kr)),Kr.apply(sr,rt)}return We}function ks(e,n){return function(o,c){return zu(o,e,n(c),{})}}function mo(e,n){return function(o,c){var g;if(o===l&&c===l)return n;if(o!==l&&(g=o),c!==l){if(g===l)return c;typeof o=="string"||typeof c=="string"?(o=Mn(o),c=Mn(c)):(o=hs(o),c=hs(c)),g=e(o,c)}return g}}function ia(e){return Hr(function(n){return n=De(n,In(Be())),Je(function(o){var c=this;return e(n,function(g){return ue(g,c,o)})})})}function vo(e,n){n=n===l?" ":Mn(n);var o=n.length;if(o<2)return o?Qo(n,e):n;var c=Qo(n,no(e/yi(n)));return vi(n)?ri(ir(c),0,e).join(""):c.slice(0,e)}function yc(e,n,o,c){var g=n&Q,L=Ui(e);function j(){for(var J=-1,X=arguments.length,de=-1,pe=c.length,ge=le(pe+X),Ee=this&&this!==s&&this instanceof j?L:e;++de<pe;)ge[de]=c[de];for(;X--;)ge[de++]=arguments[++J];return ue(Ee,g?o:this,ge)}return j}function Ts(e){return function(n,o,c){return c&&typeof c!="number"&&hn(n,o,c)&&(o=c=l),n=zr(n),o===l?(o=n,n=0):o=zr(o),c=c===l?n<o?1:-1:zr(c),rc(n,o,c,e)}}function yo(e){return function(n,o){return typeof n=="string"&&typeof o=="string"||(n=Jn(n),o=Jn(o)),e(n,o)}}function Rs(e,n,o,c,g,L,j,J,X,de){var pe=n&E,ge=pe?j:l,Ee=pe?l:j,Oe=pe?L:l,$e=pe?l:L;n|=pe?O:R,n&=~(pe?R:O),n&F||(n&=~(Q|D));var Ge=[e,n,g,Oe,ge,$e,Ee,J,X,de],We=o.apply(l,Ge);return ha(e)&&Us(We,Ge),We.placeholder=c,Hs(We,e,n)}function oa(e){var n=Ht[e];return function(o,c){if(o=Jn(o),c=c==null?0:rn(Ke(c),292),c&&Ha(o)){var g=(dt(o)+"e").split("e"),L=n(g[0]+"e"+(+g[1]+c));return g=(dt(L)+"e").split("e"),+(g[0]+"e"+(+g[1]-c))}return n(o)}}var _c=bi&&1/Ki(new bi([,-0]))[1]==fe?function(e){return new bi(e)}:ka;function Ls(e){return function(n){var o=on(n);return o==Me?Fo(n):o==ct?Pl(n):Tl(n,e(n))}}function Ur(e,n,o,c,g,L,j,J){var X=n&D;if(!X&&typeof e!="function")throw new qn(_);var de=c?c.length:0;if(de||(n&=~(O|R),c=g=l),j=j===l?j:jt(Ke(j),0),J=J===l?J:Ke(J),de-=g?g.length:0,n&R){var pe=c,ge=g;c=g=l}var Ee=X?l:la(e),Oe=[e,n,o,c,g,pe,ge,L,j,J];if(Ee&&Mc(Oe,Ee),e=Oe[0],n=Oe[1],o=Oe[2],c=Oe[3],g=Oe[4],J=Oe[9]=Oe[9]===l?X?0:e.length:jt(Oe[9]-de,0),!J&&n&(E|w)&&(n&=~(E|w)),!n||n==Q)var $e=mc(e,n,o);else n==E||n==w?$e=vc(e,n,J):(n==O||n==(Q|O))&&!g.length?$e=yc(e,n,o,c):$e=go.apply(l,Oe);var Ge=Ee?cs:Us;return Hs(Ge($e,Oe),e,n)}function Ns(e,n,o,c){return e===l||ar(e,wi[o])&&!gt.call(c,o)?n:e}function Os(e,n,o,c,g,L){return Tt(e)&&Tt(n)&&(L.set(n,e),co(e,n,l,Os,L),L.delete(n)),e}function wc(e){return qi(e)?l:e}function Is(e,n,o,c,g,L){var j=o&H,J=e.length,X=n.length;if(J!=X&&!(j&&X>J))return!1;var de=L.get(e),pe=L.get(n);if(de&&pe)return de==n&&pe==e;var ge=-1,Ee=!0,Oe=o&$?new ci:l;for(L.set(e,n),L.set(n,e);++ge<J;){var $e=e[ge],Ge=n[ge];if(c)var We=j?c(Ge,$e,ge,n,e,L):c($e,Ge,ge,e,n,L);if(We!==l){if(We)continue;Ee=!1;break}if(Oe){if(!Pt(n,function(Ye,rt){if(!Li(Oe,rt)&&($e===Ye||g($e,Ye,o,c,L)))return Oe.push(rt)})){Ee=!1;break}}else if(!($e===Ge||g($e,Ge,o,c,L))){Ee=!1;break}}return L.delete(e),L.delete(n),Ee}function bc(e,n,o,c,g,L,j){switch(o){case ze:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Ae:return!(e.byteLength!=n.byteLength||!L(new Yi(e),new Yi(n)));case Ve:case it:case vt:return ar(+e,+n);case me:return e.name==n.name&&e.message==n.message;case Rt:case Ct:return e==n+"";case Me:var J=Fo;case ct:var X=c&H;if(J||(J=Ki),e.size!=n.size&&!X)return!1;var de=j.get(e);if(de)return de==n;c|=$,j.set(e,n);var pe=Is(J(e),J(n),c,g,L,j);return j.delete(e),pe;case zt:if(Fi)return Fi.call(e)==Fi.call(n)}return!1}function xc(e,n,o,c,g,L){var j=o&H,J=aa(e),X=J.length,de=aa(n),pe=de.length;if(X!=pe&&!j)return!1;for(var ge=X;ge--;){var Ee=J[ge];if(!(j?Ee in n:gt.call(n,Ee)))return!1}var Oe=L.get(e),$e=L.get(n);if(Oe&&$e)return Oe==n&&$e==e;var Ge=!0;L.set(e,n),L.set(n,e);for(var We=j;++ge<X;){Ee=J[ge];var Ye=e[Ee],rt=n[Ee];if(c)var Pn=j?c(rt,Ye,Ee,n,e,L):c(Ye,rt,Ee,e,n,L);if(!(Pn===l?Ye===rt||g(Ye,rt,o,c,L):Pn)){Ge=!1;break}We||(We=Ee=="constructor")}if(Ge&&!We){var dn=e.constructor,Dn=n.constructor;dn!=Dn&&"constructor"in e&&"constructor"in n&&!(typeof dn=="function"&&dn instanceof dn&&typeof Dn=="function"&&Dn instanceof Dn)&&(Ge=!1)}return L.delete(e),L.delete(n),Ge}function Hr(e){return pa(Ws(e,l,Gs),e+"")}function aa(e){return Xa(e,Gt,ca)}function sa(e){return Xa(e,bn,Ms)}var la=io?function(e){return io.get(e)}:ka;function _o(e){for(var n=e.name+"",o=xi[n],c=gt.call(xi,n)?o.length:0;c--;){var g=o[c],L=g.func;if(L==null||L==e)return g.name}return n}function Si(e){var n=gt.call(S,"placeholder")?S:e;return n.placeholder}function Be(){var e=S.iteratee||Ea;return e=e===Ea?ns:e,arguments.length?e(arguments[0],arguments[1]):e}function wo(e,n){var o=e.__data__;return Lc(n)?o[typeof n=="string"?"string":"hash"]:o.map}function ua(e){for(var n=Gt(e),o=n.length;o--;){var c=n[o],g=e[c];n[o]=[c,g,Ds(g)]}return n}function di(e,n){var o=Il(e,n);return ts(o)?o:l}function Cc(e){var n=gt.call(e,li),o=e[li];try{e[li]=l;var c=!0}catch{}var g=Zi.call(e);return c&&(n?e[li]=o:delete e[li]),g}var ca=Do?function(e){return e==null?[]:(e=xt(e),wt(Do(e),function(n){return $a.call(e,n)}))}:Ta,Ms=Do?function(e){for(var n=[];e;)Ue(n,ca(e)),e=Xi(e);return n}:Ta,on=fn;(Bo&&on(new Bo(new ArrayBuffer(1)))!=ze||Oi&&on(new Oi)!=Me||Wo&&on(Wo.resolve())!=Nt||bi&&on(new bi)!=ct||Ii&&on(new Ii)!=Fe)&&(on=function(e){var n=fn(e),o=n==et?e.constructor:l,c=o?pi(o):"";if(c)switch(c){case ou:return ze;case au:return Me;case su:return Nt;case lu:return ct;case uu:return Fe}return n});function Ac(e,n,o){for(var c=-1,g=o.length;++c<g;){var L=o[c],j=L.size;switch(L.type){case"drop":e+=j;break;case"dropRight":n-=j;break;case"take":n=rn(n,e+j);break;case"takeRight":e=jt(e,n-j);break}}return{start:e,end:n}}function Ec(e){var n=e.match(En);return n?n[1].split(Kt):[]}function Fs(e,n,o){n=ni(n,e);for(var c=-1,g=n.length,L=!1;++c<g;){var j=Rr(n[c]);if(!(L=e!=null&&o(e,j)))break;e=e[j]}return L||++c!=g?L:(g=e==null?0:e.length,!!g&&ko(g)&&jr(j,g)&&(qe(e)||gi(e)))}function Sc(e){var n=e.length,o=new e.constructor(n);return n&&typeof e[0]=="string"&&gt.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function Ps(e){return typeof e.constructor=="function"&&!Hi(e)?Ci(Xi(e)):{}}function kc(e,n,o){var c=e.constructor;switch(n){case Ae:return ra(e);case Ve:case it:return new c(+e);case ze:return cc(e,o);case He:case St:case ft:case an:case ur:case Zn:case Cn:case tt:case Ot:return ys(e,o);case Me:return new c;case vt:case Ct:return new c(e);case Rt:return fc(e);case ct:return new c;case zt:return hc(e)}}function Tc(e,n){var o=n.length;if(!o)return e;var c=o-1;return n[c]=(o>1?"& ":"")+n[c],n=n.join(o>2?", ":" "),e.replace(Xn,`{
/* [wrapped with `+n+`] */
`)}function Rc(e){return qe(e)||gi(e)||!!(Ua&&e&&e[Ua])}function jr(e,n){var o=typeof e;return n=n??ie,!!n&&(o=="number"||o!="symbol"&&kt.test(e))&&e>-1&&e%1==0&&e<n}function hn(e,n,o){if(!Tt(o))return!1;var c=typeof n;return(c=="number"?wn(o)&&jr(n,o.length):c=="string"&&n in o)?ar(o[n],e):!1}function fa(e,n){if(qe(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||Fn(e)?!0:dr.test(e)||!ot.test(e)||n!=null&&e in xt(n)}function Lc(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function ha(e){var n=_o(e),o=S[n];if(typeof o!="function"||!(n in Xe.prototype))return!1;if(e===o)return!0;var c=la(o);return!!c&&e===c[0]}function Nc(e){return!!Da&&Da in e}var Oc=Gi?qr:Ra;function Hi(e){var n=e&&e.constructor,o=typeof n=="function"&&n.prototype||wi;return e===o}function Ds(e){return e===e&&!Tt(e)}function Bs(e,n){return function(o){return o==null?!1:o[e]===n&&(n!==l||e in xt(o))}}function Ic(e){var n=Eo(e,function(c){return o.size===I&&o.clear(),c}),o=n.cache;return n}function Mc(e,n){var o=e[1],c=n[1],g=o|c,L=g<(Q|D|C),j=c==C&&o==E||c==C&&o==h&&e[7].length<=n[8]||c==(C|h)&&n[7].length<=n[8]&&o==E;if(!(L||j))return e;c&Q&&(e[2]=n[2],g|=o&Q?0:F);var J=n[3];if(J){var X=e[3];e[3]=X?ws(X,J,n[4]):J,e[4]=X?Yr(e[3],K):n[4]}return J=n[5],J&&(X=e[5],e[5]=X?bs(X,J,n[6]):J,e[6]=X?Yr(e[5],K):n[6]),J=n[7],J&&(e[7]=J),c&C&&(e[8]=e[8]==null?n[8]:rn(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=g,e}function Fc(e){var n=[];if(e!=null)for(var o in xt(e))n.push(o);return n}function Pc(e){return Zi.call(e)}function Ws(e,n,o){return n=jt(n===l?e.length-1:n,0),function(){for(var c=arguments,g=-1,L=jt(c.length-n,0),j=le(L);++g<L;)j[g]=c[n+g];g=-1;for(var J=le(n+1);++g<n;)J[g]=c[g];return J[n]=o(j),ue(e,this,J)}}function $s(e,n){return n.length<2?e:hi(e,Vn(n,0,-1))}function Dc(e,n){for(var o=e.length,c=rn(n.length,o),g=_n(e);c--;){var L=n[c];e[c]=jr(L,o)?g[L]:l}return e}function da(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var Us=js(cs),ji=Yl||function(e,n){return s.setTimeout(e,n)},pa=js(ac);function Hs(e,n,o){var c=n+"";return pa(e,Tc(c,Bc(Ec(c),o)))}function js(e){var n=0,o=0;return function(){var c=nu(),g=ae-(c-o);if(o=c,g>0){if(++n>=G)return arguments[0]}else n=0;return e.apply(l,arguments)}}function bo(e,n){var o=-1,c=e.length,g=c-1;for(n=n===l?c:n;++o<n;){var L=Zo(o,g),j=e[L];e[L]=e[o],e[o]=j}return e.length=n,e}var qs=Ic(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Bn,function(o,c,g,L){n.push(g?L.replace(oi,"$1"):c||o)}),n});function Rr(e){if(typeof e=="string"||Fn(e))return e;var n=e+"";return n=="0"&&1/e==-fe?"-0":n}function pi(e){if(e!=null){try{return Ji.call(e)}catch{}try{return e+""}catch{}}return""}function Bc(e,n){return Se(A,function(o){var c="_."+o[0];n&o[1]&&!bt(e,c)&&e.push(c)}),e.sort()}function zs(e){if(e instanceof Xe)return e.clone();var n=new zn(e.__wrapped__,e.__chain__);return n.__actions__=_n(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function Wc(e,n,o){(o?hn(e,n,o):n===l)?n=1:n=jt(Ke(n),0);var c=e==null?0:e.length;if(!c||n<1)return[];for(var g=0,L=0,j=le(no(c/n));g<c;)j[L++]=Vn(e,g,g+=n);return j}function $c(e){for(var n=-1,o=e==null?0:e.length,c=0,g=[];++n<o;){var L=e[n];L&&(g[c++]=L)}return g}function Uc(){var e=arguments.length;if(!e)return[];for(var n=le(e-1),o=arguments[0],c=e;c--;)n[c-1]=arguments[c];return Ue(qe(o)?_n(o):[o],Yt(n,1))}var Hc=Je(function(e,n){return Dt(e)?Di(e,Yt(n,1,Dt,!0)):[]}),jc=Je(function(e,n){var o=Gn(n);return Dt(o)&&(o=l),Dt(e)?Di(e,Yt(n,1,Dt,!0),Be(o,2)):[]}),qc=Je(function(e,n){var o=Gn(n);return Dt(o)&&(o=l),Dt(e)?Di(e,Yt(n,1,Dt,!0),l,o):[]});function zc(e,n,o){var c=e==null?0:e.length;return c?(n=o||n===l?1:Ke(n),Vn(e,n<0?0:n,c)):[]}function Kc(e,n,o){var c=e==null?0:e.length;return c?(n=o||n===l?1:Ke(n),n=c-n,Vn(e,0,n<0?0:n)):[]}function Vc(e,n){return e&&e.length?ho(e,Be(n,3),!0,!0):[]}function Gc(e,n){return e&&e.length?ho(e,Be(n,3),!0):[]}function Jc(e,n,o,c){var g=e==null?0:e.length;return g?(o&&typeof o!="number"&&hn(e,n,o)&&(o=0,c=g),Uu(e,n,o,c)):[]}function Ks(e,n,o){var c=e==null?0:e.length;if(!c)return-1;var g=o==null?0:Ke(o);return g<0&&(g=jt(c+g,0)),zi(e,Be(n,3),g)}function Vs(e,n,o){var c=e==null?0:e.length;if(!c)return-1;var g=c-1;return o!==l&&(g=Ke(o),g=o<0?jt(c+g,0):rn(g,c-1)),zi(e,Be(n,3),g,!0)}function Gs(e){var n=e==null?0:e.length;return n?Yt(e,1):[]}function Zc(e){var n=e==null?0:e.length;return n?Yt(e,fe):[]}function Qc(e,n){var o=e==null?0:e.length;return o?(n=n===l?1:Ke(n),Yt(e,n)):[]}function Yc(e){for(var n=-1,o=e==null?0:e.length,c={};++n<o;){var g=e[n];c[g[0]]=g[1]}return c}function Js(e){return e&&e.length?e[0]:l}function Xc(e,n,o){var c=e==null?0:e.length;if(!c)return-1;var g=o==null?0:Ke(o);return g<0&&(g=jt(c+g,0)),mi(e,n,g)}function ef(e){var n=e==null?0:e.length;return n?Vn(e,0,-1):[]}var tf=Je(function(e){var n=De(e,ta);return n.length&&n[0]===e[0]?zo(n):[]}),nf=Je(function(e){var n=Gn(e),o=De(e,ta);return n===Gn(o)?n=l:o.pop(),o.length&&o[0]===e[0]?zo(o,Be(n,2)):[]}),rf=Je(function(e){var n=Gn(e),o=De(e,ta);return n=typeof n=="function"?n:l,n&&o.pop(),o.length&&o[0]===e[0]?zo(o,l,n):[]});function of(e,n){return e==null?"":eu.call(e,n)}function Gn(e){var n=e==null?0:e.length;return n?e[n-1]:l}function af(e,n,o){var c=e==null?0:e.length;if(!c)return-1;var g=c;return o!==l&&(g=Ke(o),g=g<0?jt(c+g,0):rn(g,c-1)),n===n?Bl(e,n,g):zi(e,Na,g,!0)}function sf(e,n){return e&&e.length?as(e,Ke(n)):l}var lf=Je(Zs);function Zs(e,n){return e&&e.length&&n&&n.length?Jo(e,n):e}function uf(e,n,o){return e&&e.length&&n&&n.length?Jo(e,n,Be(o,2)):e}function cf(e,n,o){return e&&e.length&&n&&n.length?Jo(e,n,l,o):e}var ff=Hr(function(e,n){var o=e==null?0:e.length,c=Uo(e,n);return us(e,De(n,function(g){return jr(g,o)?+g:g}).sort(_s)),c});function hf(e,n){var o=[];if(!(e&&e.length))return o;var c=-1,g=[],L=e.length;for(n=Be(n,3);++c<L;){var j=e[c];n(j,c,e)&&(o.push(j),g.push(c))}return us(e,g),o}function ga(e){return e==null?e:iu.call(e)}function df(e,n,o){var c=e==null?0:e.length;return c?(o&&typeof o!="number"&&hn(e,n,o)?(n=0,o=c):(n=n==null?0:Ke(n),o=o===l?c:Ke(o)),Vn(e,n,o)):[]}function pf(e,n){return fo(e,n)}function gf(e,n,o){return Yo(e,n,Be(o,2))}function mf(e,n){var o=e==null?0:e.length;if(o){var c=fo(e,n);if(c<o&&ar(e[c],n))return c}return-1}function vf(e,n){return fo(e,n,!0)}function yf(e,n,o){return Yo(e,n,Be(o,2),!0)}function _f(e,n){var o=e==null?0:e.length;if(o){var c=fo(e,n,!0)-1;if(ar(e[c],n))return c}return-1}function wf(e){return e&&e.length?fs(e):[]}function bf(e,n){return e&&e.length?fs(e,Be(n,2)):[]}function xf(e){var n=e==null?0:e.length;return n?Vn(e,1,n):[]}function Cf(e,n,o){return e&&e.length?(n=o||n===l?1:Ke(n),Vn(e,0,n<0?0:n)):[]}function Af(e,n,o){var c=e==null?0:e.length;return c?(n=o||n===l?1:Ke(n),n=c-n,Vn(e,n<0?0:n,c)):[]}function Ef(e,n){return e&&e.length?ho(e,Be(n,3),!1,!0):[]}function Sf(e,n){return e&&e.length?ho(e,Be(n,3)):[]}var kf=Je(function(e){return ti(Yt(e,1,Dt,!0))}),Tf=Je(function(e){var n=Gn(e);return Dt(n)&&(n=l),ti(Yt(e,1,Dt,!0),Be(n,2))}),Rf=Je(function(e){var n=Gn(e);return n=typeof n=="function"?n:l,ti(Yt(e,1,Dt,!0),l,n)});function Lf(e){return e&&e.length?ti(e):[]}function Nf(e,n){return e&&e.length?ti(e,Be(n,2)):[]}function Of(e,n){return n=typeof n=="function"?n:l,e&&e.length?ti(e,l,n):[]}function ma(e){if(!(e&&e.length))return[];var n=0;return e=wt(e,function(o){if(Dt(o))return n=jt(o.length,n),!0}),Io(n,function(o){return De(e,Lo(o))})}function Qs(e,n){if(!(e&&e.length))return[];var o=ma(e);return n==null?o:De(o,function(c){return ue(n,l,c)})}var If=Je(function(e,n){return Dt(e)?Di(e,n):[]}),Mf=Je(function(e){return ea(wt(e,Dt))}),Ff=Je(function(e){var n=Gn(e);return Dt(n)&&(n=l),ea(wt(e,Dt),Be(n,2))}),Pf=Je(function(e){var n=Gn(e);return n=typeof n=="function"?n:l,ea(wt(e,Dt),l,n)}),Df=Je(ma);function Bf(e,n){return gs(e||[],n||[],Pi)}function Wf(e,n){return gs(e||[],n||[],$i)}var $f=Je(function(e){var n=e.length,o=n>1?e[n-1]:l;return o=typeof o=="function"?(e.pop(),o):l,Qs(e,o)});function Ys(e){var n=S(e);return n.__chain__=!0,n}function Uf(e,n){return n(e),e}function xo(e,n){return n(e)}var Hf=Hr(function(e){var n=e.length,o=n?e[0]:0,c=this.__wrapped__,g=function(L){return Uo(L,e)};return n>1||this.__actions__.length||!(c instanceof Xe)||!jr(o)?this.thru(g):(c=c.slice(o,+o+(n?1:0)),c.__actions__.push({func:xo,args:[g],thisArg:l}),new zn(c,this.__chain__).thru(function(L){return n&&!L.length&&L.push(l),L}))});function jf(){return Ys(this)}function qf(){return new zn(this.value(),this.__chain__)}function zf(){this.__values__===l&&(this.__values__=hl(this.value()));var e=this.__index__>=this.__values__.length,n=e?l:this.__values__[this.__index__++];return{done:e,value:n}}function Kf(){return this}function Vf(e){for(var n,o=this;o instanceof ao;){var c=zs(o);c.__index__=0,c.__values__=l,n?g.__wrapped__=c:n=c;var g=c;o=o.__wrapped__}return g.__wrapped__=e,n}function Gf(){var e=this.__wrapped__;if(e instanceof Xe){var n=e;return this.__actions__.length&&(n=new Xe(this)),n=n.reverse(),n.__actions__.push({func:xo,args:[ga],thisArg:l}),new zn(n,this.__chain__)}return this.thru(ga)}function Jf(){return ps(this.__wrapped__,this.__actions__)}var Zf=po(function(e,n,o){gt.call(e,o)?++e[o]:$r(e,o,1)});function Qf(e,n,o){var c=qe(e)?nt:$u;return o&&hn(e,n,o)&&(n=l),c(e,Be(n,3))}function Yf(e,n){var o=qe(e)?wt:Qa;return o(e,Be(n,3))}var Xf=Es(Ks),eh=Es(Vs);function th(e,n){return Yt(Co(e,n),1)}function nh(e,n){return Yt(Co(e,n),fe)}function rh(e,n,o){return o=o===l?1:Ke(o),Yt(Co(e,n),o)}function Xs(e,n){var o=qe(e)?Se:ei;return o(e,Be(n,3))}function el(e,n){var o=qe(e)?Pe:Za;return o(e,Be(n,3))}var ih=po(function(e,n,o){gt.call(e,o)?e[o].push(n):$r(e,o,[n])});function oh(e,n,o,c){e=wn(e)?e:Ti(e),o=o&&!c?Ke(o):0;var g=e.length;return o<0&&(o=jt(g+o,0)),To(e)?o<=g&&e.indexOf(n,o)>-1:!!g&&mi(e,n,o)>-1}var ah=Je(function(e,n,o){var c=-1,g=typeof n=="function",L=wn(e)?le(e.length):[];return ei(e,function(j){L[++c]=g?ue(n,j,o):Bi(j,n,o)}),L}),sh=po(function(e,n,o){$r(e,o,n)});function Co(e,n){var o=qe(e)?De:rs;return o(e,Be(n,3))}function lh(e,n,o,c){return e==null?[]:(qe(n)||(n=n==null?[]:[n]),o=c?l:o,qe(o)||(o=o==null?[]:[o]),ss(e,n,o))}var uh=po(function(e,n,o){e[o?0:1].push(n)},function(){return[[],[]]});function ch(e,n,o){var c=qe(e)?Ft:Ia,g=arguments.length<3;return c(e,Be(n,4),o,g,ei)}function fh(e,n,o){var c=qe(e)?nn:Ia,g=arguments.length<3;return c(e,Be(n,4),o,g,Za)}function hh(e,n){var o=qe(e)?wt:Qa;return o(e,So(Be(n,3)))}function dh(e){var n=qe(e)?Ka:ic;return n(e)}function ph(e,n,o){(o?hn(e,n,o):n===l)?n=1:n=Ke(n);var c=qe(e)?Fu:oc;return c(e,n)}function gh(e){var n=qe(e)?Pu:sc;return n(e)}function mh(e){if(e==null)return 0;if(wn(e))return To(e)?yi(e):e.length;var n=on(e);return n==Me||n==ct?e.size:Vo(e).length}function vh(e,n,o){var c=qe(e)?Pt:lc;return o&&hn(e,n,o)&&(n=l),c(e,Be(n,3))}var yh=Je(function(e,n){if(e==null)return[];var o=n.length;return o>1&&hn(e,n[0],n[1])?n=[]:o>2&&hn(n[0],n[1],n[2])&&(n=[n[0]]),ss(e,Yt(n,1),[])}),Ao=Ql||function(){return s.Date.now()};function _h(e,n){if(typeof n!="function")throw new qn(_);return e=Ke(e),function(){if(--e<1)return n.apply(this,arguments)}}function tl(e,n,o){return n=o?l:n,n=e&&n==null?e.length:n,Ur(e,C,l,l,l,l,n)}function nl(e,n){var o;if(typeof n!="function")throw new qn(_);return e=Ke(e),function(){return--e>0&&(o=n.apply(this,arguments)),e<=1&&(n=l),o}}var va=Je(function(e,n,o){var c=Q;if(o.length){var g=Yr(o,Si(va));c|=O}return Ur(e,c,n,o,g)}),rl=Je(function(e,n,o){var c=Q|D;if(o.length){var g=Yr(o,Si(rl));c|=O}return Ur(n,c,e,o,g)});function il(e,n,o){n=o?l:n;var c=Ur(e,E,l,l,l,l,l,n);return c.placeholder=il.placeholder,c}function ol(e,n,o){n=o?l:n;var c=Ur(e,w,l,l,l,l,l,n);return c.placeholder=ol.placeholder,c}function al(e,n,o){var c,g,L,j,J,X,de=0,pe=!1,ge=!1,Ee=!0;if(typeof e!="function")throw new qn(_);n=Jn(n)||0,Tt(o)&&(pe=!!o.leading,ge="maxWait"in o,L=ge?jt(Jn(o.maxWait)||0,n):L,Ee="trailing"in o?!!o.trailing:Ee);function Oe(Bt){var sr=c,Kr=g;return c=g=l,de=Bt,j=e.apply(Kr,sr),j}function $e(Bt){return de=Bt,J=ji(Ye,n),pe?Oe(Bt):j}function Ge(Bt){var sr=Bt-X,Kr=Bt-de,El=n-sr;return ge?rn(El,L-Kr):El}function We(Bt){var sr=Bt-X,Kr=Bt-de;return X===l||sr>=n||sr<0||ge&&Kr>=L}function Ye(){var Bt=Ao();if(We(Bt))return rt(Bt);J=ji(Ye,Ge(Bt))}function rt(Bt){return J=l,Ee&&c?Oe(Bt):(c=g=l,j)}function Pn(){J!==l&&ms(J),de=0,c=X=g=J=l}function dn(){return J===l?j:rt(Ao())}function Dn(){var Bt=Ao(),sr=We(Bt);if(c=arguments,g=this,X=Bt,sr){if(J===l)return $e(X);if(ge)return ms(J),J=ji(Ye,n),Oe(X)}return J===l&&(J=ji(Ye,n)),j}return Dn.cancel=Pn,Dn.flush=dn,Dn}var wh=Je(function(e,n){return Ja(e,1,n)}),bh=Je(function(e,n,o){return Ja(e,Jn(n)||0,o)});function xh(e){return Ur(e,m)}function Eo(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new qn(_);var o=function(){var c=arguments,g=n?n.apply(this,c):c[0],L=o.cache;if(L.has(g))return L.get(g);var j=e.apply(this,c);return o.cache=L.set(g,j)||L,j};return o.cache=new(Eo.Cache||Wr),o}Eo.Cache=Wr;function So(e){if(typeof e!="function")throw new qn(_);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function Ch(e){return nl(2,e)}var Ah=uc(function(e,n){n=n.length==1&&qe(n[0])?De(n[0],In(Be())):De(Yt(n,1),In(Be()));var o=n.length;return Je(function(c){for(var g=-1,L=rn(c.length,o);++g<L;)c[g]=n[g].call(this,c[g]);return ue(e,this,c)})}),ya=Je(function(e,n){var o=Yr(n,Si(ya));return Ur(e,O,l,n,o)}),sl=Je(function(e,n){var o=Yr(n,Si(sl));return Ur(e,R,l,n,o)}),Eh=Hr(function(e,n){return Ur(e,h,l,l,l,n)});function Sh(e,n){if(typeof e!="function")throw new qn(_);return n=n===l?n:Ke(n),Je(e,n)}function kh(e,n){if(typeof e!="function")throw new qn(_);return n=n==null?0:jt(Ke(n),0),Je(function(o){var c=o[n],g=ri(o,0,n);return c&&Ue(g,c),ue(e,this,g)})}function Th(e,n,o){var c=!0,g=!0;if(typeof e!="function")throw new qn(_);return Tt(o)&&(c="leading"in o?!!o.leading:c,g="trailing"in o?!!o.trailing:g),al(e,n,{leading:c,maxWait:n,trailing:g})}function Rh(e){return tl(e,1)}function Lh(e,n){return ya(na(n),e)}function Nh(){if(!arguments.length)return[];var e=arguments[0];return qe(e)?e:[e]}function Oh(e){return Kn(e,P)}function Ih(e,n){return n=typeof n=="function"?n:l,Kn(e,P,n)}function Mh(e){return Kn(e,B|P)}function Fh(e,n){return n=typeof n=="function"?n:l,Kn(e,B|P,n)}function Ph(e,n){return n==null||Ga(e,n,Gt(n))}function ar(e,n){return e===n||e!==e&&n!==n}var Dh=yo(qo),Bh=yo(function(e,n){return e>=n}),gi=es(function(){return arguments}())?es:function(e){return Lt(e)&&gt.call(e,"callee")&&!$a.call(e,"callee")},qe=le.isArray,Wh=W?In(W):Ku;function wn(e){return e!=null&&ko(e.length)&&!qr(e)}function Dt(e){return Lt(e)&&wn(e)}function $h(e){return e===!0||e===!1||Lt(e)&&fn(e)==Ve}var ii=Xl||Ra,Uh=Y?In(Y):Vu;function Hh(e){return Lt(e)&&e.nodeType===1&&!qi(e)}function jh(e){if(e==null)return!0;if(wn(e)&&(qe(e)||typeof e=="string"||typeof e.splice=="function"||ii(e)||ki(e)||gi(e)))return!e.length;var n=on(e);if(n==Me||n==ct)return!e.size;if(Hi(e))return!Vo(e).length;for(var o in e)if(gt.call(e,o))return!1;return!0}function qh(e,n){return Wi(e,n)}function zh(e,n,o){o=typeof o=="function"?o:l;var c=o?o(e,n):l;return c===l?Wi(e,n,l,o):!!c}function _a(e){if(!Lt(e))return!1;var n=fn(e);return n==me||n==At||typeof e.message=="string"&&typeof e.name=="string"&&!qi(e)}function Kh(e){return typeof e=="number"&&Ha(e)}function qr(e){if(!Tt(e))return!1;var n=fn(e);return n==Ze||n==Ie||n==Ne||n==qt}function ll(e){return typeof e=="number"&&e==Ke(e)}function ko(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ie}function Tt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function Lt(e){return e!=null&&typeof e=="object"}var ul=oe?In(oe):Ju;function Vh(e,n){return e===n||Ko(e,n,ua(n))}function Gh(e,n,o){return o=typeof o=="function"?o:l,Ko(e,n,ua(n),o)}function Jh(e){return cl(e)&&e!=+e}function Zh(e){if(Oc(e))throw new je(b);return ts(e)}function Qh(e){return e===null}function Yh(e){return e==null}function cl(e){return typeof e=="number"||Lt(e)&&fn(e)==vt}function qi(e){if(!Lt(e)||fn(e)!=et)return!1;var n=Xi(e);if(n===null)return!0;var o=gt.call(n,"constructor")&&n.constructor;return typeof o=="function"&&o instanceof o&&Ji.call(o)==Vl}var wa=te?In(te):Zu;function Xh(e){return ll(e)&&e>=-ie&&e<=ie}var fl=ne?In(ne):Qu;function To(e){return typeof e=="string"||!qe(e)&&Lt(e)&&fn(e)==Ct}function Fn(e){return typeof e=="symbol"||Lt(e)&&fn(e)==zt}var ki=ve?In(ve):Yu;function ed(e){return e===l}function td(e){return Lt(e)&&on(e)==Fe}function nd(e){return Lt(e)&&fn(e)==xe}var rd=yo(Go),id=yo(function(e,n){return e<=n});function hl(e){if(!e)return[];if(wn(e))return To(e)?ir(e):_n(e);if(Ni&&e[Ni])return Fl(e[Ni]());var n=on(e),o=n==Me?Fo:n==ct?Ki:Ti;return o(e)}function zr(e){if(!e)return e===0?e:0;if(e=Jn(e),e===fe||e===-fe){var n=e<0?-1:1;return n*_e}return e===e?e:0}function Ke(e){var n=zr(e),o=n%1;return n===n?o?n-o:n:0}function dl(e){return e?fi(Ke(e),0,se):0}function Jn(e){if(typeof e=="number")return e;if(Fn(e))return re;if(Tt(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Tt(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(Yn,"");var o=er.test(e);return o||Jr.test(e)?r(e.slice(2),o?2:8):Gr.test(e)?re:+e}function pl(e){return Tr(e,bn(e))}function od(e){return e?fi(Ke(e),-ie,ie):e===0?e:0}function dt(e){return e==null?"":Mn(e)}var ad=Ai(function(e,n){if(Hi(n)||wn(n)){Tr(n,Gt(n),e);return}for(var o in n)gt.call(n,o)&&Pi(e,o,n[o])}),gl=Ai(function(e,n){Tr(n,bn(n),e)}),Ro=Ai(function(e,n,o,c){Tr(n,bn(n),e,c)}),sd=Ai(function(e,n,o,c){Tr(n,Gt(n),e,c)}),ld=Hr(Uo);function ud(e,n){var o=Ci(e);return n==null?o:Va(o,n)}var cd=Je(function(e,n){e=xt(e);var o=-1,c=n.length,g=c>2?n[2]:l;for(g&&hn(n[0],n[1],g)&&(c=1);++o<c;)for(var L=n[o],j=bn(L),J=-1,X=j.length;++J<X;){var de=j[J],pe=e[de];(pe===l||ar(pe,wi[de])&&!gt.call(e,de))&&(e[de]=L[de])}return e}),fd=Je(function(e){return e.push(l,Os),ue(ml,l,e)});function hd(e,n){return La(e,Be(n,3),kr)}function dd(e,n){return La(e,Be(n,3),jo)}function pd(e,n){return e==null?e:Ho(e,Be(n,3),bn)}function gd(e,n){return e==null?e:Ya(e,Be(n,3),bn)}function md(e,n){return e&&kr(e,Be(n,3))}function vd(e,n){return e&&jo(e,Be(n,3))}function yd(e){return e==null?[]:uo(e,Gt(e))}function _d(e){return e==null?[]:uo(e,bn(e))}function ba(e,n,o){var c=e==null?l:hi(e,n);return c===l?o:c}function wd(e,n){return e!=null&&Fs(e,n,Hu)}function xa(e,n){return e!=null&&Fs(e,n,ju)}var bd=ks(function(e,n,o){n!=null&&typeof n.toString!="function"&&(n=Zi.call(n)),e[n]=o},Aa(xn)),xd=ks(function(e,n,o){n!=null&&typeof n.toString!="function"&&(n=Zi.call(n)),gt.call(e,n)?e[n].push(o):e[n]=[o]},Be),Cd=Je(Bi);function Gt(e){return wn(e)?za(e):Vo(e)}function bn(e){return wn(e)?za(e,!0):Xu(e)}function Ad(e,n){var o={};return n=Be(n,3),kr(e,function(c,g,L){$r(o,n(c,g,L),c)}),o}function Ed(e,n){var o={};return n=Be(n,3),kr(e,function(c,g,L){$r(o,g,n(c,g,L))}),o}var Sd=Ai(function(e,n,o){co(e,n,o)}),ml=Ai(function(e,n,o,c){co(e,n,o,c)}),kd=Hr(function(e,n){var o={};if(e==null)return o;var c=!1;n=De(n,function(L){return L=ni(L,e),c||(c=L.length>1),L}),Tr(e,sa(e),o),c&&(o=Kn(o,B|z|P,wc));for(var g=n.length;g--;)Xo(o,n[g]);return o});function Td(e,n){return vl(e,So(Be(n)))}var Rd=Hr(function(e,n){return e==null?{}:tc(e,n)});function vl(e,n){if(e==null)return{};var o=De(sa(e),function(c){return[c]});return n=Be(n),ls(e,o,function(c,g){return n(c,g[0])})}function Ld(e,n,o){n=ni(n,e);var c=-1,g=n.length;for(g||(g=1,e=l);++c<g;){var L=e==null?l:e[Rr(n[c])];L===l&&(c=g,L=o),e=qr(L)?L.call(e):L}return e}function Nd(e,n,o){return e==null?e:$i(e,n,o)}function Od(e,n,o,c){return c=typeof c=="function"?c:l,e==null?e:$i(e,n,o,c)}var yl=Ls(Gt),_l=Ls(bn);function Id(e,n,o){var c=qe(e),g=c||ii(e)||ki(e);if(n=Be(n,4),o==null){var L=e&&e.constructor;g?o=c?new L:[]:Tt(e)?o=qr(L)?Ci(Xi(e)):{}:o={}}return(g?Se:kr)(e,function(j,J,X){return n(o,j,J,X)}),o}function Md(e,n){return e==null?!0:Xo(e,n)}function Fd(e,n,o){return e==null?e:ds(e,n,na(o))}function Pd(e,n,o,c){return c=typeof c=="function"?c:l,e==null?e:ds(e,n,na(o),c)}function Ti(e){return e==null?[]:Mo(e,Gt(e))}function Dd(e){return e==null?[]:Mo(e,bn(e))}function Bd(e,n,o){return o===l&&(o=n,n=l),o!==l&&(o=Jn(o),o=o===o?o:0),n!==l&&(n=Jn(n),n=n===n?n:0),fi(Jn(e),n,o)}function Wd(e,n,o){return n=zr(n),o===l?(o=n,n=0):o=zr(o),e=Jn(e),qu(e,n,o)}function $d(e,n,o){if(o&&typeof o!="boolean"&&hn(e,n,o)&&(n=o=l),o===l&&(typeof n=="boolean"?(o=n,n=l):typeof e=="boolean"&&(o=e,e=l)),e===l&&n===l?(e=0,n=1):(e=zr(e),n===l?(n=e,e=0):n=zr(n)),e>n){var c=e;e=n,n=c}if(o||e%1||n%1){var g=ja();return rn(e+g*(n-e+t("1e-"+((g+"").length-1))),n)}return Zo(e,n)}var Ud=Ei(function(e,n,o){return n=n.toLowerCase(),e+(o?wl(n):n)});function wl(e){return Ca(dt(e).toLowerCase())}function bl(e){return e=dt(e),e&&e.replace(gr,Ll).replace(ai,"")}function Hd(e,n,o){e=dt(e),n=Mn(n);var c=e.length;o=o===l?c:fi(Ke(o),0,c);var g=o;return o-=n.length,o>=0&&e.slice(o,g)==n}function jd(e){return e=dt(e),e&&Nr.test(e)?e.replace(yt,Nl):e}function qd(e){return e=dt(e),e&&An.test(e)?e.replace(Qn,"\\$&"):e}var zd=Ei(function(e,n,o){return e+(o?"-":"")+n.toLowerCase()}),Kd=Ei(function(e,n,o){return e+(o?" ":"")+n.toLowerCase()}),Vd=As("toLowerCase");function Gd(e,n,o){e=dt(e),n=Ke(n);var c=n?yi(e):0;if(!n||c>=n)return e;var g=(n-c)/2;return vo(ro(g),o)+e+vo(no(g),o)}function Jd(e,n,o){e=dt(e),n=Ke(n);var c=n?yi(e):0;return n&&c<n?e+vo(n-c,o):e}function Zd(e,n,o){e=dt(e),n=Ke(n);var c=n?yi(e):0;return n&&c<n?vo(n-c,o)+e:e}function Qd(e,n,o){return o||n==null?n=0:n&&(n=+n),ru(dt(e).replace(pr,""),n||0)}function Yd(e,n,o){return(o?hn(e,n,o):n===l)?n=1:n=Ke(n),Qo(dt(e),n)}function Xd(){var e=arguments,n=dt(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var ep=Ei(function(e,n,o){return e+(o?"_":"")+n.toLowerCase()});function tp(e,n,o){return o&&typeof o!="number"&&hn(e,n,o)&&(n=o=l),o=o===l?se:o>>>0,o?(e=dt(e),e&&(typeof n=="string"||n!=null&&!wa(n))&&(n=Mn(n),!n&&vi(e))?ri(ir(e),0,o):e.split(n,o)):[]}var np=Ei(function(e,n,o){return e+(o?" ":"")+Ca(n)});function rp(e,n,o){return e=dt(e),o=o==null?0:fi(Ke(o),0,e.length),n=Mn(n),e.slice(o,o+n.length)==n}function ip(e,n,o){var c=S.templateSettings;o&&hn(e,n,o)&&(n=l),e=dt(e),n=Ro({},n,c,Ns);var g=Ro({},n.imports,c.imports,Ns),L=Gt(g),j=Mo(g,L),J,X,de=0,pe=n.interpolate||lt,ge="__p += '",Ee=Po((n.escape||lt).source+"|"+pe.source+"|"+(pe===hr?Vr:lt).source+"|"+(n.evaluate||lt).source+"|$","g"),Oe="//# sourceURL="+(gt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Pr+"]")+`
`;e.replace(Ee,function(We,Ye,rt,Pn,dn,Dn){return rt||(rt=Pn),ge+=e.slice(de,Dn).replace(Wn,Ol),Ye&&(J=!0,ge+=`' +
__e(`+Ye+`) +
'`),dn&&(X=!0,ge+=`';
`+dn+`;
__p += '`),rt&&(ge+=`' +
((__t = (`+rt+`)) == null ? '' : __t) +
'`),de=Dn+We.length,We}),ge+=`';
`;var $e=gt.call(n,"variable")&&n.variable;$e||(ge=`with (obj) {
`+ge+`
}
`),ge=(X?ge.replace(ht,""):ge).replace(Ut,"$1").replace(Jt,"$1;"),ge="function("+($e||"obj")+`) {
`+($e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(X?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var Ge=Cl(function(){return ut(L,Oe+"return "+ge).apply(l,j)});if(Ge.source=ge,_a(Ge))throw Ge;return Ge}function op(e){return dt(e).toLowerCase()}function ap(e){return dt(e).toUpperCase()}function sp(e,n,o){if(e=dt(e),e&&(o||n===l))return e.replace(Yn,"");if(!e||!(n=Mn(n)))return e;var c=ir(e),g=ir(n),L=Ma(c,g),j=Fa(c,g)+1;return ri(c,L,j).join("")}function lp(e,n,o){if(e=dt(e),e&&(o||n===l))return e.replace(_t,"");if(!e||!(n=Mn(n)))return e;var c=ir(e),g=Fa(c,ir(n))+1;return ri(c,0,g).join("")}function up(e,n,o){if(e=dt(e),e&&(o||n===l))return e.replace(pr,"");if(!e||!(n=Mn(n)))return e;var c=ir(e),g=Ma(c,ir(n));return ri(c,g).join("")}function cp(e,n){var o=M,c=V;if(Tt(n)){var g="separator"in n?n.separator:g;o="length"in n?Ke(n.length):o,c="omission"in n?Mn(n.omission):c}e=dt(e);var L=e.length;if(vi(e)){var j=ir(e);L=j.length}if(o>=L)return e;var J=o-yi(c);if(J<1)return c;var X=j?ri(j,0,J).join(""):e.slice(0,J);if(g===l)return X+c;if(j&&(J+=X.length-J),wa(g)){if(e.slice(J).search(g)){var de,pe=X;for(g.global||(g=Po(g.source,dt(Or.exec(g))+"g")),g.lastIndex=0;de=g.exec(pe);)var ge=de.index;X=X.slice(0,ge===l?J:ge)}}else if(e.indexOf(Mn(g),J)!=J){var Ee=X.lastIndexOf(g);Ee>-1&&(X=X.slice(0,Ee))}return X+c}function fp(e){return e=dt(e),e&&Lr.test(e)?e.replace(cr,Wl):e}var hp=Ei(function(e,n,o){return e+(o?" ":"")+n.toUpperCase()}),Ca=As("toUpperCase");function xl(e,n,o){return e=dt(e),n=o?l:n,n===l?Ml(e)?Hl(e):Ri(e):e.match(n)||[]}var Cl=Je(function(e,n){try{return ue(e,l,n)}catch(o){return _a(o)?o:new je(o)}}),dp=Hr(function(e,n){return Se(n,function(o){o=Rr(o),$r(e,o,va(e[o],e))}),e});function pp(e){var n=e==null?0:e.length,o=Be();return e=n?De(e,function(c){if(typeof c[1]!="function")throw new qn(_);return[o(c[0]),c[1]]}):[],Je(function(c){for(var g=-1;++g<n;){var L=e[g];if(ue(L[0],this,c))return ue(L[1],this,c)}})}function gp(e){return Wu(Kn(e,B))}function Aa(e){return function(){return e}}function mp(e,n){return e==null||e!==e?n:e}var vp=Ss(),yp=Ss(!0);function xn(e){return e}function Ea(e){return ns(typeof e=="function"?e:Kn(e,B))}function _p(e){return is(Kn(e,B))}function wp(e,n){return os(e,Kn(n,B))}var bp=Je(function(e,n){return function(o){return Bi(o,e,n)}}),xp=Je(function(e,n){return function(o){return Bi(e,o,n)}});function Sa(e,n,o){var c=Gt(n),g=uo(n,c);o==null&&!(Tt(n)&&(g.length||!c.length))&&(o=n,n=e,e=this,g=uo(n,Gt(n)));var L=!(Tt(o)&&"chain"in o)||!!o.chain,j=qr(e);return Se(g,function(J){var X=n[J];e[J]=X,j&&(e.prototype[J]=function(){var de=this.__chain__;if(L||de){var pe=e(this.__wrapped__),ge=pe.__actions__=_n(this.__actions__);return ge.push({func:X,args:arguments,thisArg:e}),pe.__chain__=de,pe}return X.apply(e,Ue([this.value()],arguments))})}),e}function Cp(){return s._===this&&(s._=Gl),this}function ka(){}function Ap(e){return e=Ke(e),Je(function(n){return as(n,e)})}var Ep=ia(De),Sp=ia(nt),kp=ia(Pt);function Al(e){return fa(e)?Lo(Rr(e)):nc(e)}function Tp(e){return function(n){return e==null?l:hi(e,n)}}var Rp=Ts(),Lp=Ts(!0);function Ta(){return[]}function Ra(){return!1}function Np(){return{}}function Op(){return""}function Ip(){return!0}function Mp(e,n){if(e=Ke(e),e<1||e>ie)return[];var o=se,c=rn(e,se);n=Be(n),e-=se;for(var g=Io(c,n);++o<e;)n(o);return g}function Fp(e){return qe(e)?De(e,Rr):Fn(e)?[e]:_n(qs(dt(e)))}function Pp(e){var n=++Kl;return dt(e)+n}var Dp=mo(function(e,n){return e+n},0),Bp=oa("ceil"),Wp=mo(function(e,n){return e/n},1),$p=oa("floor");function Up(e){return e&&e.length?lo(e,xn,qo):l}function Hp(e,n){return e&&e.length?lo(e,Be(n,2),qo):l}function jp(e){return Oa(e,xn)}function qp(e,n){return Oa(e,Be(n,2))}function zp(e){return e&&e.length?lo(e,xn,Go):l}function Kp(e,n){return e&&e.length?lo(e,Be(n,2),Go):l}var Vp=mo(function(e,n){return e*n},1),Gp=oa("round"),Jp=mo(function(e,n){return e-n},0);function Zp(e){return e&&e.length?Oo(e,xn):0}function Qp(e,n){return e&&e.length?Oo(e,Be(n,2)):0}return S.after=_h,S.ary=tl,S.assign=ad,S.assignIn=gl,S.assignInWith=Ro,S.assignWith=sd,S.at=ld,S.before=nl,S.bind=va,S.bindAll=dp,S.bindKey=rl,S.castArray=Nh,S.chain=Ys,S.chunk=Wc,S.compact=$c,S.concat=Uc,S.cond=pp,S.conforms=gp,S.constant=Aa,S.countBy=Zf,S.create=ud,S.curry=il,S.curryRight=ol,S.debounce=al,S.defaults=cd,S.defaultsDeep=fd,S.defer=wh,S.delay=bh,S.difference=Hc,S.differenceBy=jc,S.differenceWith=qc,S.drop=zc,S.dropRight=Kc,S.dropRightWhile=Vc,S.dropWhile=Gc,S.fill=Jc,S.filter=Yf,S.flatMap=th,S.flatMapDeep=nh,S.flatMapDepth=rh,S.flatten=Gs,S.flattenDeep=Zc,S.flattenDepth=Qc,S.flip=xh,S.flow=vp,S.flowRight=yp,S.fromPairs=Yc,S.functions=yd,S.functionsIn=_d,S.groupBy=ih,S.initial=ef,S.intersection=tf,S.intersectionBy=nf,S.intersectionWith=rf,S.invert=bd,S.invertBy=xd,S.invokeMap=ah,S.iteratee=Ea,S.keyBy=sh,S.keys=Gt,S.keysIn=bn,S.map=Co,S.mapKeys=Ad,S.mapValues=Ed,S.matches=_p,S.matchesProperty=wp,S.memoize=Eo,S.merge=Sd,S.mergeWith=ml,S.method=bp,S.methodOf=xp,S.mixin=Sa,S.negate=So,S.nthArg=Ap,S.omit=kd,S.omitBy=Td,S.once=Ch,S.orderBy=lh,S.over=Ep,S.overArgs=Ah,S.overEvery=Sp,S.overSome=kp,S.partial=ya,S.partialRight=sl,S.partition=uh,S.pick=Rd,S.pickBy=vl,S.property=Al,S.propertyOf=Tp,S.pull=lf,S.pullAll=Zs,S.pullAllBy=uf,S.pullAllWith=cf,S.pullAt=ff,S.range=Rp,S.rangeRight=Lp,S.rearg=Eh,S.reject=hh,S.remove=hf,S.rest=Sh,S.reverse=ga,S.sampleSize=ph,S.set=Nd,S.setWith=Od,S.shuffle=gh,S.slice=df,S.sortBy=yh,S.sortedUniq=wf,S.sortedUniqBy=bf,S.split=tp,S.spread=kh,S.tail=xf,S.take=Cf,S.takeRight=Af,S.takeRightWhile=Ef,S.takeWhile=Sf,S.tap=Uf,S.throttle=Th,S.thru=xo,S.toArray=hl,S.toPairs=yl,S.toPairsIn=_l,S.toPath=Fp,S.toPlainObject=pl,S.transform=Id,S.unary=Rh,S.union=kf,S.unionBy=Tf,S.unionWith=Rf,S.uniq=Lf,S.uniqBy=Nf,S.uniqWith=Of,S.unset=Md,S.unzip=ma,S.unzipWith=Qs,S.update=Fd,S.updateWith=Pd,S.values=Ti,S.valuesIn=Dd,S.without=If,S.words=xl,S.wrap=Lh,S.xor=Mf,S.xorBy=Ff,S.xorWith=Pf,S.zip=Df,S.zipObject=Bf,S.zipObjectDeep=Wf,S.zipWith=$f,S.entries=yl,S.entriesIn=_l,S.extend=gl,S.extendWith=Ro,Sa(S,S),S.add=Dp,S.attempt=Cl,S.camelCase=Ud,S.capitalize=wl,S.ceil=Bp,S.clamp=Bd,S.clone=Oh,S.cloneDeep=Mh,S.cloneDeepWith=Fh,S.cloneWith=Ih,S.conformsTo=Ph,S.deburr=bl,S.defaultTo=mp,S.divide=Wp,S.endsWith=Hd,S.eq=ar,S.escape=jd,S.escapeRegExp=qd,S.every=Qf,S.find=Xf,S.findIndex=Ks,S.findKey=hd,S.findLast=eh,S.findLastIndex=Vs,S.findLastKey=dd,S.floor=$p,S.forEach=Xs,S.forEachRight=el,S.forIn=pd,S.forInRight=gd,S.forOwn=md,S.forOwnRight=vd,S.get=ba,S.gt=Dh,S.gte=Bh,S.has=wd,S.hasIn=xa,S.head=Js,S.identity=xn,S.includes=oh,S.indexOf=Xc,S.inRange=Wd,S.invoke=Cd,S.isArguments=gi,S.isArray=qe,S.isArrayBuffer=Wh,S.isArrayLike=wn,S.isArrayLikeObject=Dt,S.isBoolean=$h,S.isBuffer=ii,S.isDate=Uh,S.isElement=Hh,S.isEmpty=jh,S.isEqual=qh,S.isEqualWith=zh,S.isError=_a,S.isFinite=Kh,S.isFunction=qr,S.isInteger=ll,S.isLength=ko,S.isMap=ul,S.isMatch=Vh,S.isMatchWith=Gh,S.isNaN=Jh,S.isNative=Zh,S.isNil=Yh,S.isNull=Qh,S.isNumber=cl,S.isObject=Tt,S.isObjectLike=Lt,S.isPlainObject=qi,S.isRegExp=wa,S.isSafeInteger=Xh,S.isSet=fl,S.isString=To,S.isSymbol=Fn,S.isTypedArray=ki,S.isUndefined=ed,S.isWeakMap=td,S.isWeakSet=nd,S.join=of,S.kebabCase=zd,S.last=Gn,S.lastIndexOf=af,S.lowerCase=Kd,S.lowerFirst=Vd,S.lt=rd,S.lte=id,S.max=Up,S.maxBy=Hp,S.mean=jp,S.meanBy=qp,S.min=zp,S.minBy=Kp,S.stubArray=Ta,S.stubFalse=Ra,S.stubObject=Np,S.stubString=Op,S.stubTrue=Ip,S.multiply=Vp,S.nth=sf,S.noConflict=Cp,S.noop=ka,S.now=Ao,S.pad=Gd,S.padEnd=Jd,S.padStart=Zd,S.parseInt=Qd,S.random=$d,S.reduce=ch,S.reduceRight=fh,S.repeat=Yd,S.replace=Xd,S.result=Ld,S.round=Gp,S.runInContext=ee,S.sample=dh,S.size=mh,S.snakeCase=ep,S.some=vh,S.sortedIndex=pf,S.sortedIndexBy=gf,S.sortedIndexOf=mf,S.sortedLastIndex=vf,S.sortedLastIndexBy=yf,S.sortedLastIndexOf=_f,S.startCase=np,S.startsWith=rp,S.subtract=Jp,S.sum=Zp,S.sumBy=Qp,S.template=ip,S.times=Mp,S.toFinite=zr,S.toInteger=Ke,S.toLength=dl,S.toLower=op,S.toNumber=Jn,S.toSafeInteger=od,S.toString=dt,S.toUpper=ap,S.trim=sp,S.trimEnd=lp,S.trimStart=up,S.truncate=cp,S.unescape=fp,S.uniqueId=Pp,S.upperCase=hp,S.upperFirst=Ca,S.each=Xs,S.eachRight=el,S.first=Js,Sa(S,function(){var e={};return kr(S,function(n,o){gt.call(S.prototype,o)||(e[o]=n)}),e}(),{chain:!1}),S.VERSION=y,Se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){S[e].placeholder=S}),Se(["drop","take"],function(e,n){Xe.prototype[e]=function(o){o=o===l?1:jt(Ke(o),0);var c=this.__filtered__&&!n?new Xe(this):this.clone();return c.__filtered__?c.__takeCount__=rn(o,c.__takeCount__):c.__views__.push({size:rn(o,se),type:e+(c.__dir__<0?"Right":"")}),c},Xe.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),Se(["filter","map","takeWhile"],function(e,n){var o=n+1,c=o==ce||o==Z;Xe.prototype[e]=function(g){var L=this.clone();return L.__iteratees__.push({iteratee:Be(g,3),type:o}),L.__filtered__=L.__filtered__||c,L}}),Se(["head","last"],function(e,n){var o="take"+(n?"Right":"");Xe.prototype[e]=function(){return this[o](1).value()[0]}}),Se(["initial","tail"],function(e,n){var o="drop"+(n?"":"Right");Xe.prototype[e]=function(){return this.__filtered__?new Xe(this):this[o](1)}}),Xe.prototype.compact=function(){return this.filter(xn)},Xe.prototype.find=function(e){return this.filter(e).head()},Xe.prototype.findLast=function(e){return this.reverse().find(e)},Xe.prototype.invokeMap=Je(function(e,n){return typeof e=="function"?new Xe(this):this.map(function(o){return Bi(o,e,n)})}),Xe.prototype.reject=function(e){return this.filter(So(Be(e)))},Xe.prototype.slice=function(e,n){e=Ke(e);var o=this;return o.__filtered__&&(e>0||n<0)?new Xe(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),n!==l&&(n=Ke(n),o=n<0?o.dropRight(-n):o.take(n-e)),o)},Xe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Xe.prototype.toArray=function(){return this.take(se)},kr(Xe.prototype,function(e,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),c=/^(?:head|last)$/.test(n),g=S[c?"take"+(n=="last"?"Right":""):n],L=c||/^find/.test(n);!g||(S.prototype[n]=function(){var j=this.__wrapped__,J=c?[1]:arguments,X=j instanceof Xe,de=J[0],pe=X||qe(j),ge=function(Ye){var rt=g.apply(S,Ue([Ye],J));return c&&Ee?rt[0]:rt};pe&&o&&typeof de=="function"&&de.length!=1&&(X=pe=!1);var Ee=this.__chain__,Oe=!!this.__actions__.length,$e=L&&!Ee,Ge=X&&!Oe;if(!L&&pe){j=Ge?j:new Xe(this);var We=e.apply(j,J);return We.__actions__.push({func:xo,args:[ge],thisArg:l}),new zn(We,Ee)}return $e&&Ge?e.apply(this,J):(We=this.thru(ge),$e?c?We.value()[0]:We.value():We)})}),Se(["pop","push","shift","sort","splice","unshift"],function(e){var n=Vi[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",c=/^(?:pop|shift)$/.test(e);S.prototype[e]=function(){var g=arguments;if(c&&!this.__chain__){var L=this.value();return n.apply(qe(L)?L:[],g)}return this[o](function(j){return n.apply(qe(j)?j:[],g)})}}),kr(Xe.prototype,function(e,n){var o=S[n];if(o){var c=o.name+"";gt.call(xi,c)||(xi[c]=[]),xi[c].push({name:n,func:o})}}),xi[go(l,D).name]=[{name:"wrapper",func:l}],Xe.prototype.clone=cu,Xe.prototype.reverse=fu,Xe.prototype.value=hu,S.prototype.at=Hf,S.prototype.chain=jf,S.prototype.commit=qf,S.prototype.next=zf,S.prototype.plant=Vf,S.prototype.reverse=Gf,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=Jf,S.prototype.first=S.prototype.head,Ni&&(S.prototype[Ni]=Kf),S},_i=jl();p?((p.exports=_i)._=_i,u._=_i):s._=_i}).call(commonjsGlobal)})(lodash,lodash.exports);Object.defineProperty(results,"__esModule",{value:!0});results.Value=results.Arity=void 0;const lodash_1$2=lodash.exports;class Arity{constructor(d,l){this.isRow=()=>this.rows>1&&this.cols===1,this.isColumn=()=>this.rows===1&&this.cols>1,this.isCell=()=>this.rows===1&&this.cols===1,this.rows=d,this.cols=l}}results.Arity=Arity;class Value{constructor(d){this.get=(l,y)=>this.val[l][y],this.getAsFloat=(l,y)=>{const v=parseFloat(this.get(l,y));return isNaN(v)?0:v},this.getAsInt=(l,y)=>{const v=parseInt(this.get(l,y));return isNaN(v)?0:v},this.getArity=()=>{const l=this.val.reduce((y,v)=>Math.max(y,v.length),0);return new Arity(this.val.length,l)},this.toString=()=>this.getArity().isCell()?this.get(0,0):`[${lodash_1$2.flatten(this.val).map(l=>l.trim()).filter(l=>l!=="").join(", ")}]`,this.val=d}}results.Value=Value;var hasRequiredAlgebraic_operation;function requireAlgebraic_operation(){if(hasRequiredAlgebraic_operation)return algebraic_operation;hasRequiredAlgebraic_operation=1,Object.defineProperty(algebraic_operation,"__esModule",{value:!0}),algebraic_operation.AlgebraicOperation=void 0;const f=neverthrow,d=ast_utils,l=requireCalc(),y=results,v=lodash.exports;class b{constructor(k,I){this.getValue=(P,H)=>{switch(this.operator){case"+":return this.add(P,H);case"-":return this.subtract(P,H);case"*":return this.multiply(P,H);case"/":return this.divide(P,H);default:return f.err(Error("Invalid algbraic operator: "+this.operator))}},this.withCellAndRange=(P,H,$,Q,D)=>{const F=this.leftSource.getValue(P,H);if(F.isErr())return f.err(F.error);const E=this.rightSource.getValue(P,H);if(E.isErr())return f.err(E.error);const w=F.value.getArity(),O=E.value.getArity();if(!O.isCell()&&!w.isCell())return f.err(Error(`At least one operand in algebraic "${$}" must be a single cell.`));if(!O.isCell()&&!Q)return f.err(Error(`Right operand in algebraic "${$}" must be a single cell.`));if(O.isCell()){const h=E.value.getAsFloat(0,0),m=v.map(F.value.val,M=>v.map(M,V=>{let G=parseFloat(V);return isNaN(G)&&(G=0),D(G,h).toString()}));return f.ok(new y.Value(m))}const R=F.value.getAsFloat(0,0),C=v.map(E.value.val,h=>v.map(h,m=>{let M=parseFloat(m);return isNaN(R)&&(M=0),D(R,M).toString()}));return f.ok(new y.Value(C))},this.add=(P,H)=>this.withCellAndRange(P,H,"add",!0,($,Q)=>$+Q),this.subtract=(P,H)=>this.withCellAndRange(P,H,"subtract",!0,($,Q)=>$-Q),this.multiply=(P,H)=>this.withCellAndRange(P,H,"multiply",!0,($,Q)=>$*Q),this.divide=(P,H)=>this.withCellAndRange(P,H,"divide",!1,($,Q)=>$/Q);const K=d.checkType(k,"algebraic_operation");if(K)throw K;const B=d.checkChildLength(k,3);if(B)throw B;const z=d.checkType(k.children[1],"algebraic_operator");if(z)throw z;this.operator=k.children[1].text;try{this.leftSource=new l.Source(k.children[0],I),this.rightSource=new l.Source(k.children[2],I)}catch(P){throw P}}}return algebraic_operation.AlgebraicOperation=b,algebraic_operation}var conditional_function={},hasRequiredConditional_function;function requireConditional_function(){if(hasRequiredConditional_function)return conditional_function;hasRequiredConditional_function=1,Object.defineProperty(conditional_function,"__esModule",{value:!0}),conditional_function.ConditionalFunctionCall=void 0;const f=neverthrow,d=ast_utils,l=requireCalc();class y{constructor(_,k){this.getValue=(B,z)=>this.predicate.eval(B,z).andThen(P=>P?this.leftSource.getValue(B,z):this.rightSource.getValue(B,z));const I=d.checkType(_,"conditional_function_call");if(I)throw I;const K=d.checkChildLength(_,3);if(K)throw K;try{this.predicate=new v(_.children[0],k),this.leftSource=new l.Source(_.children[1],k),this.rightSource=new l.Source(_.children[2],k)}catch(B){throw B}}}conditional_function.ConditionalFunctionCall=y;class v{constructor(_,k){this.eval=(z,P)=>{const H=this.leftSource.getValue(z,P);if(H.isErr())return f.err(H.error);const $=this.rightSource.getValue(z,P);if($.isErr())return f.err($.error);const Q=H.value.getArity(),D=$.value.getArity();if(!Q.isCell())return f.err(Error("Can only use comparison operator on a single cell. Left side is not a cell."));if(!D.isCell())return f.err(Error("Can only use comparison operator on a single cell. Right side is not a cell."));const F=H.value.getAsFloat(0,0),E=$.value.getAsFloat(0,0);switch(this.operator){case">":return f.ok(F>E);case">=":return f.ok(F>=E);case"<":return f.ok(F<E);case"<=":return f.ok(F<=E);case"==":return f.ok(F===E);case"!=":return f.ok(F!==E);default:return f.err(Error("Invalid conditional operator: "+this.operator))}};const I=d.checkType(_,"predicate");if(I)throw I;const K=d.checkChildLength(_,3);if(K)throw K;const B=d.checkType(_.children[1],"conditional_operator");if(B)throw B;this.operator=_.children[1].text;try{this.leftSource=new l.Source(_.children[0],k),this.rightSource=new l.Source(_.children[2],k)}catch(z){throw z}}}return conditional_function}var constant={};Object.defineProperty(constant,"__esModule",{value:!0});constant.Constant=void 0;const neverthrow_1$5=neverthrow,ast_utils_1$6=ast_utils,results_1$4=results;class Constant{constructor(d,l){const y=ast_utils_1$6.checkType(d,"real","float");if(y)throw y;const v=d.text[0]==="-"?-1:1;d.type==="real"?this.value=v*parseInt(d.children[0].text):this.value=v*parseFloat(d.children[0].text+"."+d.children[1].text)}getValue(d,l){return neverthrow_1$5.ok(new results_1$4.Value([[this.value.toString()]]))}}constant.Constant=Constant;var destination={},column={};Object.defineProperty(column,"__esModule",{value:!0});column.AbsoluteColumn=column.Column=column.newColumn=void 0;const neverthrow_1$4=neverthrow,ast_utils_1$5=ast_utils,results_1$3=results,newColumn=(f,d)=>{try{switch(f.type){case"relative_column":return neverthrow_1$4.ok(new RelativeColumn(f,d));case"absolute_column":return neverthrow_1$4.ok(new AbsoluteColumn(f,d));default:return neverthrow_1$4.err(new Error(`Formula element '${f.text}' is a ${f.type} but expected an relatve_column or absolute_column in this position.`))}}catch(l){return neverthrow_1$4.err(l)}};column.newColumn=newColumn;class Column{constructor(){this.getValue=(d,l)=>{var y;const v=((y=d.getCellAt(l.row,this.getIndex(l)))===null||y===void 0?void 0:y.toText())||"";return neverthrow_1$4.ok(new results_1$3.Value([[v]]))}}}column.Column=Column;class RelativeColumn extends Column{constructor(d,l){super(),this.getIndex=_=>_.column+this.offset,this.getAbsoluteIndex=()=>neverthrow_1$4.err(ast_utils_1$5.errRelativeReferenceIndex);const y=ast_utils_1$5.checkType(d,"relative_column");if(y)throw y;const v=ast_utils_1$5.checkChildLength(d,1);if(v)throw v;const b=d.text[1]==="-"?-1:1;this.offset=b*parseInt(d.children[0].text)}}class AbsoluteColumn extends Column{constructor(d,l){super(),this.getIndex=b=>this.index,this.getAbsoluteIndex=()=>neverthrow_1$4.ok(this.index);let y=-1,v="";switch(d.children.length){case 0:v=d.text[1];break;case 1:const b=ast_utils_1$5.checkType(d.children[0],"int");if(b)throw neverthrow_1$4.err(b);y=parseInt(d.children[0].text);break;default:throw new Error(`Formula element '${d.text}' is a ${d.type} but expected a 'absolute_column' in this position.`)}switch(v){case"":break;case"<":y=1;break;case">":y=l.getWidth();break;default:throw new Error(`Invalid column symbol '${v}'`)}if(y===0)throw ast_utils_1$5.errIndex0;this.index=y-1}}column.AbsoluteColumn=AbsoluteColumn;var range={},reference={},row={};Object.defineProperty(row,"__esModule",{value:!0});row.AbsoluteRow=row.Row=row.newRow=void 0;const neverthrow_1$3=neverthrow,ast_utils_1$4=ast_utils,results_1$2=results,newRow=(f,d)=>{try{switch(f.type){case"relative_row":return neverthrow_1$3.ok(new RelativeRow(f,d));case"absolute_row":return neverthrow_1$3.ok(new AbsoluteRow(f,d));default:return neverthrow_1$3.err(new Error(`Formula element '${f.text}' is a ${f.type} but expected an relatve_row or absolute_row  in this position.`))}}catch(l){return neverthrow_1$3.err(l)}};row.newRow=newRow;class Row{constructor(){this.getValue=(d,l)=>{var y;const v=((y=d.getCellAt(this.getIndex(l),l.column))===null||y===void 0?void 0:y.toText())||"";return neverthrow_1$3.ok(new results_1$2.Value([[v]]))}}}row.Row=Row;class RelativeRow extends Row{constructor(d,l){super(),this.getIndex=_=>_.row+this.offset,this.getAbsoluteIndex=()=>neverthrow_1$3.err(ast_utils_1$4.errRelativeReferenceIndex);const y=ast_utils_1$4.checkType(d,"relative_row");if(y)throw y;const v=ast_utils_1$4.checkChildLength(d,1);if(v)throw v;const b=d.text[1]==="-"?-1:1;this.offset=b*parseInt(d.children[0].text)}}class AbsoluteRow extends Row{constructor(d,l){super(),this.getIndex=b=>this.index,this.getAbsoluteIndex=()=>neverthrow_1$3.ok(this.index);let y=-1,v="";switch(d.children.length){case 0:v=d.text[1];break;case 1:const b=ast_utils_1$4.checkType(d.children[0],"int");if(b)throw neverthrow_1$3.err(b);y=parseInt(d.children[0].text);break;default:throw new Error(`Formula element '${d.text}' is a ${d.type} but expected a 'absolute_row' in this position.`)}switch(v){case"":break;case"<":y=1;break;case">":y=l.getHeight()-1;break;case"I":y=2;break;default:throw new Error(`Invalid row symbol '${v}'`)}if(y===0)throw ast_utils_1$4.errIndex0;y===1?this.index=0:this.index=y}}row.AbsoluteRow=AbsoluteRow;Object.defineProperty(reference,"__esModule",{value:!0});reference.Reference=void 0;const neverthrow_1$2=neverthrow,ast_utils_1$3=ast_utils,column_1$1=column,results_1$1=results,row_1$1=row;class Reference{constructor(d,l){this.getValue=(v,b)=>{var _;const k={row:this.row?this.row.getIndex(b):b.row,column:this.column?this.column.getIndex(b):b.column},I=((_=v.getCellAt(k.row,k.column))===null||_===void 0?void 0:_.toText())||"";return neverthrow_1$2.ok(new results_1$1.Value([[I]]))};const y=ast_utils_1$3.checkType(d,"source_reference","absolute_reference","relative_reference");if(y)throw y;for(let v=0;v<d.children.length;v++){const b=d.children[v];switch(b.type){case"relative_row":case"absolute_row":if(this.row!==void 0)throw Error("Reference may only have at most 1 row, more than 1 provided");const _=row_1$1.newRow(b,l);if(_.isErr()){if(_.error===ast_utils_1$3.errIndex0)break;throw _.error}this.row=_.value;break;case"relative_column":case"absolute_column":if(this.column!==void 0)throw Error("Reference may only have at most 1 column, more than 1 provided");const k=column_1$1.newColumn(b,l);if(k.isErr()){if(k.error===ast_utils_1$3.errIndex0)break;throw k.error}this.column=k.value;break}}}}reference.Reference=Reference;Object.defineProperty(range,"__esModule",{value:!0});range.Range=void 0;const neverthrow_1$1=neverthrow,ast_utils_1$2=ast_utils,reference_1=reference,results_1=results,lodash_1$1=lodash.exports;class Range{constructor(d,l){this.getValue=(K,B)=>{const z=this.startColumn?this.startColumn.getIndex(B):B.column,P=this.endColumn?this.endColumn.getIndex(B):z,H=this.startRow?this.startRow.getIndex(B):B.row,$=this.endRow?this.endRow.getIndex(B):B.row;return neverthrow_1$1.ok(new results_1.Value(lodash_1$1.map(lodash_1$1.range(H,$+1),Q=>lodash_1$1.map(lodash_1$1.range(z,P+1),D=>{var F;return((F=K.getCellAt(Q,D))===null||F===void 0?void 0:F.toText())||""}))))},this.asCells=()=>{if(!this.startColumn||!this.startRow||!this.endRow)return neverthrow_1$1.err(new Error("A range used as a desintation must define rows and cells"));let K=this.endColumn;K||(K=this.startColumn);const B=this.startRow.getAbsoluteIndex(),z=this.endRow.getAbsoluteIndex(),P=this.startColumn.getAbsoluteIndex(),H=K.getAbsoluteIndex();if(B.isErr()||z.isErr()||P.isErr()||H.isErr())return neverthrow_1$1.err(new Error("A relative range can not be used in a formula destination"));const $=Math.min(B.value,z.value),Q=Math.max(B.value,z.value),D=Math.min(P.value,H.value),F=Math.max(P.value,H.value);return neverthrow_1$1.ok(lodash_1$1.flatMap(lodash_1$1.range($,Q+1),E=>lodash_1$1.range(D,F+1).map(w=>({row:E,column:w}))))};let y=ast_utils_1$2.checkType(d,"range");if(y)throw y;let v=ast_utils_1$2.checkChildLength(d,2);if(v)throw v;const b=d.children[0],_=d.children[1];if(y=ast_utils_1$2.checkType(b,"source_reference"),y||(y=ast_utils_1$2.checkType(_,"source_reference"),y))throw y;if(v=ast_utils_1$2.checkChildLength(b,1),v||(v=ast_utils_1$2.checkChildLength(_,1),v))throw v;const k=new reference_1.Reference(b.children[0],l),I=new reference_1.Reference(_.children[0],l);if(k.row&&!I.row||I.row&&!k.row)throw new Error("Range must use references of the same kind");if(!k.row&&!k.column)throw console.log(k),new Error("Range must have a row or a column defined");k.row&&(this.startRow=k.row),k.column&&(this.startColumn=k.column),I.row&&(this.endRow=I.row),I.column?this.endColumn=I.column:this.endColumn=k.column}}range.Range=Range;Object.defineProperty(destination,"__esModule",{value:!0});destination.RangeDestination=destination.CellDestination=destination.ColumnDestination=destination.RowDestination=destination.newDestination=void 0;const neverthrow_1=neverthrow,ast_utils_1$1=ast_utils,column_1=column,range_1$1=range,row_1=row,lodash_1=lodash.exports,newDestination=(f,d,l)=>{const y=ast_utils_1$1.checkType(f,"destination");if(y)return neverthrow_1.err(y);const v=ast_utils_1$1.checkChildLength(f,1);if(v)return neverthrow_1.err(v);const b=f.children[0];if(b.type==="range")return neverthrow_1.ok(new RangeDestination(b,d,l));try{switch(b.children.length){case 2:return neverthrow_1.ok(new CellDestination(b,d,l));case 1:const _=b.children[0];if(_.type==="absolute_row")return neverthrow_1.ok(new RowDestination(b,d,l));if(_.type==="absolute_column")return neverthrow_1.ok(new ColumnDestination(b,d,l));default:return neverthrow_1.err(new Error("Unexpected destination type "+b.type))}}catch(_){return _===ast_utils_1$1.errIndex0?neverthrow_1.err(new Error("Index 0 may not be used in a destination")):neverthrow_1.err(_)}};destination.newDestination=newDestination;class RowDestination{constructor(d,l,y){this.merge=(k,I)=>{const K=lodash_1.range(0,I.getWidth()).map(B=>({row:this.row.index,column:B}));return mergeForCells(k,I,K,this.formatter)},this.formatter=y;const v=ast_utils_1$1.checkType(d,"absolute_reference");if(v)throw v;const b=ast_utils_1$1.checkChildLength(d,1);if(b)throw b;const _=d.children[0];try{this.row=new row_1.AbsoluteRow(_,l)}catch(k){throw k}}}destination.RowDestination=RowDestination;class ColumnDestination{constructor(d,l,y){this.merge=(k,I)=>{const K=lodash_1.range(2,I.getHeight()).map(B=>({row:B,column:this.column.index}));return mergeForCells(k,I,K,this.formatter)},this.formatter=y;const v=ast_utils_1$1.checkType(d,"absolute_reference");if(v)throw v;const b=ast_utils_1$1.checkChildLength(d,1);if(b)throw b;const _=d.children[0];try{this.column=new column_1.AbsoluteColumn(_,l)}catch(k){throw k}}}destination.ColumnDestination=ColumnDestination;class CellDestination{constructor(d,l,y){this.merge=(I,K)=>{const B={row:this.row.index,column:this.column.index};return mergeForCells(I,K,[B],this.formatter)},this.formatter=y;const v=ast_utils_1$1.checkType(d,"absolute_reference");if(v)throw v;const b=ast_utils_1$1.checkChildLength(d,2);if(b)throw b;const _=d.children[0],k=d.children[1];try{this.row=new row_1.AbsoluteRow(_,l),this.column=new column_1.AbsoluteColumn(k,l)}catch(I){throw I}}}destination.CellDestination=CellDestination;class RangeDestination{constructor(d,l,y){this.merge=(_,k)=>this.range.asCells().andThen(I=>mergeForCells(_,k,I,this.formatter)),this.formatter=y;const v=ast_utils_1$1.checkType(d,"range");if(v)throw v;const b=ast_utils_1$1.checkChildLength(d,2);if(b)throw b;d.children.forEach(_=>{let k=ast_utils_1$1.checkType(_,"source_reference");if(k)throw k;const I=ast_utils_1$1.checkChildLength(_,1);if(I)throw I;if(k=ast_utils_1$1.checkType(_.children[0],"absolute_reference"),k)throw k}),this.range=new range_1$1.Range(d,l)}}destination.RangeDestination=RangeDestination;const mergeForCells=(f,d,l,y)=>l.reduce((v,b)=>v.andThen(_=>f.getValue(_,b).andThen(k=>neverthrow_1.ok(k.toString())).andThen(k=>neverthrow_1.ok(k.trim()===""?"0":k)).andThen(k=>neverthrow_1.ok(_.setCellAt(b.row,b.column,y.format(k))))),neverthrow_1.ok(d));var display_directive={};Object.defineProperty(display_directive,"__esModule",{value:!0});display_directive.DisplayDirective=display_directive.DefaultFormatter=void 0;const ast_utils_1=ast_utils;class DefaultFormatter{constructor(){this.format=d=>typeof d=="string"?d:d.toString()}}display_directive.DefaultFormatter=DefaultFormatter;class DisplayDirective{constructor(d){this.format=k=>typeof k=="string"?parseFloat(k).toFixed(this.decimalLength):k.toFixed(this.decimalLength);let l=ast_utils_1.checkType(d,"display_directive");if(l)throw l;let y=ast_utils_1.checkChildLength(d,1);if(y)throw y;const v=d.children[0];if(l=ast_utils_1.checkType(v,"display_directive_option"),l)throw l;if(y=ast_utils_1.checkChildLength(v,1),y)throw y;const b=v.children[0];if(l=ast_utils_1.checkType(b,"formatting_directive"),l)throw l;if(y=ast_utils_1.checkChildLength(b,1),y)throw y;const _=b.children[0];if(l=ast_utils_1.checkType(_,"int"),l)throw l;this.decimalLength=parseInt(_.text)}}display_directive.DisplayDirective=DisplayDirective;var single_param_function={},hasRequiredSingle_param_function;function requireSingle_param_function(){if(hasRequiredSingle_param_function)return single_param_function;hasRequiredSingle_param_function=1,Object.defineProperty(single_param_function,"__esModule",{value:!0}),single_param_function.SingleParamFunctionCall=void 0;const f=neverthrow,d=ast_utils,l=requireCalc(),y=results;class v{constructor(I,K){this.getValue=($,Q)=>this.param.getValue($,Q).andThen(D=>f.ok(this.op(D)));const B=d.checkType(I,"single_param_function_call");if(B)throw B;const z=d.checkChildLength(I,2);if(z)throw z;const P=d.checkType(I.children[0],"single_param_function");if(P)throw P;const H=I.children[0].text;switch(H){case"sum":this.op=b;break;case"mean":this.op=_;break;default:throw Error("Unknown single param function call: "+H)}this.param=new l.Source(I.children[1],K)}}single_param_function.SingleParamFunctionCall=v;const b=k=>{const I=k.val.reduce((K,B)=>B.reduce((z,P)=>{let H=parseFloat(P);return isNaN(H)&&(H=0),z+H},K),0);return new y.Value([[I.toString()]])},_=k=>{const{total:I,count:K}=k.val.reduce(({total:B,count:z},P)=>P.reduce(({total:H,count:$},Q)=>({total:H+ +Q,count:$+1}),{total:B,count:z}),{total:0,count:0});return new y.Value([[(I/K).toString()]])};return single_param_function}var dist={},Parser$1={},TokenError$1={};Object.defineProperty(TokenError$1,"__esModule",{value:!0});TokenError$1.TokenError=void 0;class TokenError extends Error{constructor(d,l){if(super(d),this.message=d,this.token=l,l&&l.errors)l.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}TokenError$1.TokenError=TokenError;Object.defineProperty(Parser$1,"__esModule",{value:!0});Parser$1.Parser=Parser$1.findRuleByName=Parser$1.parseRuleName=Parser$1.escapeRegExp=Parser$1.readToken=void 0;const UPPER_SNAKE_RE=/^[A-Z0-9_]+$/,decorationRE=/(\?|\+|\*)$/,preDecorationRE=/^(@|&|!)/,WS_RULE="WS",TokenError_1$1=TokenError$1;function readToken(f,d){let l=d.exec(f);return l&&l.index==0?l[0].length==0&&d.source.length>0?null:{type:null,text:l[0],rest:f.substr(l[0].length),start:0,end:l[0].length-1,fullText:l[0],errors:[],children:[],parent:null}:null}Parser$1.readToken=readToken;function escapeRegExp(f){return f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Parser$1.escapeRegExp=escapeRegExp;function fixRest(f){f.rest="",f.children&&f.children.forEach(d=>fixRest(d))}function fixPositions(f,d){f.start+=d,f.end+=d,f.children&&f.children.forEach(l=>fixPositions(l,f.start))}function agregateErrors(f,d){d.errors&&d.errors.length&&d.errors.forEach(l=>f.push(l)),d.children&&d.children.forEach(l=>agregateErrors(f,l))}function parseRuleName(f){let d=decorationRE.exec(f),l=preDecorationRE.exec(f),y=d&&d[0]||"",v=l&&l[0]||"",b={raw:f,name:f.replace(decorationRE,"").replace(preDecorationRE,""),isOptional:y=="?"||y=="*",allowRepetition:y=="+"||y=="*",atLeastOne:y=="+",lookupPositive:v=="&",lookupNegative:v=="!",pinned:v=="@",lookup:!1,isLiteral:!1};return b.isLiteral=b.name[0]=="'"||b.name[0]=='"',b.lookup=b.lookupNegative||b.lookupPositive,b}Parser$1.parseRuleName=parseRuleName;function findRuleByName(f,d){let l=parseRuleName(f);return d.cachedRules[l.name]||null}Parser$1.findRuleByName=findRuleByName;function stripRules(f,d){if(f.children){let l=f.children.filter(y=>y.type&&d.test(y.type));for(let y=0;y<l.length;y++){let v=f.children.indexOf(l[y]);v!=-1&&f.children.splice(v,1)}f.children.forEach(y=>stripRules(y,d))}}const ignoreMissingRules=["EOF"];class Parser{constructor(f,d){this.grammarRules=f,this.options=d,this.cachedRules={},this.debug=d?d.debug===!0:!1;let l=[],y=[];if(f.forEach(v=>{let b=parseRuleName(v.name);if(b.name in this.cachedRules){l.push("Duplicated rule "+b.name);return}else this.cachedRules[b.name]=v;if(!v.bnf||!v.bnf.length){let _="Missing rule content, rule: "+v.name;l.indexOf(_)==-1&&l.push(_)}else v.bnf.forEach(_=>{if(typeof _[0]=="string"&&parseRuleName(_[0]).name==v.name){let I="Left recursion is not allowed, rule: "+v.name;l.indexOf(I)==-1&&l.push(I)}_.forEach(k=>{if(typeof k=="string"){let I=parseRuleName(k);!I.isLiteral&&y.indexOf(I.name)==-1&&ignoreMissingRules.indexOf(I.name)==-1&&y.push(I.name)}})});WS_RULE==v.name&&(v.implicitWs=!1),v.implicitWs&&y.indexOf(WS_RULE)==-1&&y.push(WS_RULE),v.recover&&y.indexOf(v.recover)==-1&&y.push(v.recover)}),y.forEach(v=>{v in this.cachedRules||l.push("Missing rule "+v)}),l.length)throw new Error(l.join(`
`))}getAST(f,d){d||(d=this.grammarRules.filter(y=>!y.fragment&&y.name.indexOf("%")!=0)[0].name);let l=this.parse(f,d);if(l){agregateErrors(l.errors,l),fixPositions(l,0),stripRules(l,/^%/),(!this.options||!this.options.keepUpperRules)&&stripRules(l,UPPER_SNAKE_RE);let y=l.rest;y&&new TokenError_1$1.TokenError(`Unexpected end of input: 
`+y,l),fixRest(l),l.rest=y}return l}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(txt,target,recursion=0){let out=null,type=parseRuleName(target),expr,printable=this.debug&&!UPPER_SNAKE_RE.test(type.name);printable&&console.log(new Array(recursion).join("\u2502  ")+"Trying to get "+target+" from "+JSON.stringify(txt.split(`
`)[0]));let realType=type.name,targetLex=findRuleByName(type.name,this);if(type.name=="EOF"){if(txt.length)return null;if(txt.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!targetLex&&type.isLiteral){let src=eval(type.name);if(src==="")return{type:"%%EMPTY%%",text:"",rest:txt,start:0,end:0,fullText:"",errors:[],children:[],parent:null};expr=new RegExp(escapeRegExp(src)),realType=null}}catch(f){return f instanceof ReferenceError&&console.error(f),null}if(expr){let f=readToken(txt,expr);if(f)return f.type=realType,f}else{let f=targetLex.bnf;f instanceof Array&&f.forEach(d=>{if(out)return;let l=null,y={type:type.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:txt};targetLex.fragment&&(y.fragment=!0);let v=txt,b=0,_=d.length>0,k=!1;for(let I=0;I<d.length;I++)if(typeof d[I]=="string"){let K=parseRuleName(d[I]);_=_&&K.isOptional;let B,z=!1;do{if(B=null,targetLex.implicitWs&&(B=this.parse(v,K.name,recursion+1),!B)){let P;do if(P=this.parse(v,WS_RULE,recursion+1),P)y.text=y.text+P.text,y.end=y.text.length,P.parent=y,y.children.push(P),v=v.substr(P.text.length),b+=P.text.length;else break;while(P&&P.text.length)}if(B=B||this.parse(v,K.name,recursion+1),K.lookupNegative){if(B)return;break}if(K.lookupPositive&&!B)return;if(!B&&(K.isOptional||K.atLeastOne&&z))break;if(B&&targetLex.pinned==I+1&&(l=B,printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+B.type+" PINNED")),B||(B=this.parseRecovery(targetLex,v,recursion+1)),!B)if(l)out=y,B={type:"SyntaxError",text:v,children:[],end:v.length,errors:[],fullText:"",parent:null,start:0,rest:""},v.length?new TokenError_1$1.TokenError(`Unexpected end of input. Expecting ${K.name} Got: ${v}`,B):new TokenError_1$1.TokenError(`Unexpected end of input. Missing ${K.name}`,B),printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+B.type+" "+JSON.stringify(B.text));else return;if(z=!0,k=!0,B.type=="%%EMPTY%%")break;B.start+=b,B.end+=b,!K.lookupPositive&&B.type&&(B.fragment?B.children&&B.children.forEach(P=>{P.start+=b,P.end+=b,P.parent=y,y.children.push(P)}):(B.parent=y,y.children.push(B))),K.lookup&&(B.lookup=!0),printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+B.type+" "+JSON.stringify(B.text)),!K.lookup&&!B.lookup&&(y.text=y.text+B.text,y.end=y.text.length,v=v.substr(B.text.length),b+=B.text.length),y.rest=v}while(B&&K.allowRepetition&&v.length&&!B.lookup)}else{let K=readToken(v,d[I]);if(!K)return;printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514> "+JSON.stringify(K.text)+d[I].source),k=!0,K.start+=b,K.end+=b,y.text=y.text+K.text,y.end=y.text.length,v=v.substr(K.text.length),b+=K.text.length,y.rest=v}k&&(out=y,printable&&console.log(new Array(recursion).join("\u2502  ")+"\u251C<\u2500\u2534< PUSHING "+out.type+" "+JSON.stringify(out.text)))}),out&&targetLex.simplifyWhenOneChildren&&out.children.length==1&&(out=out.children[0])}return out||printable&&console.log(target+" NOT RESOLVED FROM "+txt),out}parseRecovery(f,d,l){if(f.recover&&d.length){let y=this.debug;y&&console.log(new Array(l+1).join("\u2502  ")+"Trying to recover until token "+f.recover+" from "+JSON.stringify(d.split(`
`)[0]+d.split(`
`)[1]));let v={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},b;do if(b=this.parse(d,f.recover,l+1),b){new TokenError_1$1.TokenError('Unexpected input: "'+v.text+`" Expecting: ${f.name}`,v);break}else v.text=v.text+d[0],v.end=v.text.length,d=d.substr(1);while(!b&&d.length>0);if(v.text.length>0&&b)return y&&console.log(new Array(l+1).join("\u2502  ")+"Recovered text: "+JSON.stringify(v.text)),v}return null}}Parser$1.Parser=Parser;Parser$1.default=Parser;var Grammars={},BNF$3={},SemanticHelpers={};Object.defineProperty(SemanticHelpers,"__esModule",{value:!0});SemanticHelpers.findChildrenByType=void 0;function findChildrenByType(f,d){return f.children?f.children.filter(l=>l.type==d):[]}SemanticHelpers.findChildrenByType=findChildrenByType;Object.defineProperty(BNF$3,"__esModule",{value:!0});const SemanticHelpers_1=SemanticHelpers,Parser_1$2=Parser$1;var BNF$2;(function(f){f.RULES=[{name:"syntax",bnf:[["RULE_EOL*","rule+"]]},{name:"rule",bnf:[['" "*','"<"',"rule-name",'">"','" "*','"::="',"firstExpression","otherExpression*",'" "*',"RULE_EOL+",'" "*']]},{name:"firstExpression",bnf:[['" "*',"list"]]},{name:"otherExpression",bnf:[['" "*','"|"','" "*',"list"]]},{name:"RULE_EOL",bnf:[['"\\r"'],['"\\n"']]},{name:"list",bnf:[["term",'" "*',"list"],["term"]]},{name:"term",bnf:[["literal"],['"<"',"rule-name",'">"']]},{name:"literal",bnf:[[`'"'`,"RULE_CHARACTER1*",`'"'`],[`"'"`,"RULE_CHARACTER2*",`"'"`]]},{name:"RULE_CHARACTER",bnf:[['" "'],["RULE_LETTER"],["RULE_DIGIT"],["RULE_SYMBOL"]]},{name:"RULE_LETTER",bnf:[['"A"'],['"B"'],['"C"'],['"D"'],['"E"'],['"F"'],['"G"'],['"H"'],['"I"'],['"J"'],['"K"'],['"L"'],['"M"'],['"N"'],['"O"'],['"P"'],['"Q"'],['"R"'],['"S"'],['"T"'],['"U"'],['"V"'],['"W"'],['"X"'],['"Y"'],['"Z"'],['"a"'],['"b"'],['"c"'],['"d"'],['"e"'],['"f"'],['"g"'],['"h"'],['"i"'],['"j"'],['"k"'],['"l"'],['"m"'],['"n"'],['"o"'],['"p"'],['"q"'],['"r"'],['"s"'],['"t"'],['"u"'],['"v"'],['"w"'],['"x"'],['"y"'],['"z"']]},{name:"RULE_DIGIT",bnf:[['"0"'],['"1"'],['"2"'],['"3"'],['"4"'],['"5"'],['"6"'],['"7"'],['"8"'],['"9"']]},{name:"RULE_SYMBOL",bnf:[['"-"'],['"_"'],['"!"'],['"#"'],['"$"'],['"%"'],['"&"'],['"("'],['")"'],['"*"'],['"+"'],['","'],['"-"'],['"."'],['"/"'],['":"'],['";"'],['"<"'],['"="'],['">"'],['"?"'],['"@"'],['"["'],['"\\"'],['"]"'],['"^"'],['"_"'],['"`"'],['"{"'],['"|"'],['"}"'],['"~"']]},{name:"RULE_CHARACTER1",bnf:[["RULE_CHARACTER"],[`"'"`]]},{name:"RULE_CHARACTER2",bnf:[["RULE_CHARACTER"],[`'"'`]]},{name:"rule-name",bnf:[["RULE_LETTER","RULE_CHAR*"]]},{name:"RULE_CHAR",bnf:[["RULE_LETTER"],["RULE_DIGIT"],['"_"'],['"-"']]}],f.defaultParser=new Parser_1$2.Parser(f.RULES,{debug:!1});function d(b){let _=SemanticHelpers_1.findChildrenByType(b,"term").map(k=>SemanticHelpers_1.findChildrenByType(k,"literal").concat(SemanticHelpers_1.findChildrenByType(k,"rule-name"))[0].text);return SemanticHelpers_1.findChildrenByType(b,"list").forEach(k=>{_=_.concat(d(k))}),_}function l(b,_=f.defaultParser){let k=_.getAST(b);if(!k)throw new Error("Could not parse "+b);if(k.errors&&k.errors.length)throw k.errors[0];let K=SemanticHelpers_1.findChildrenByType(k,"rule").map(B=>{let z=SemanticHelpers_1.findChildrenByType(B,"rule-name")[0].text,P=SemanticHelpers_1.findChildrenByType(B,"firstExpression").concat(SemanticHelpers_1.findChildrenByType(B,"otherExpression")),H=[];return P.forEach($=>{H.push(d($))}),{name:z,bnf:H}});return K.some(B=>B.name=="EOL")||K.push({name:"EOL",bnf:[['"\\r\\n"','"\\r"','"\\n"']]}),K}f.getRules=l;function y(b,_=f.defaultParser){return l(b.join(""),_)}f.Transform=y;class v extends Parser_1$2.Parser{constructor(_,k){const I=k&&k.debugRulesParser===!0?new Parser_1$2.Parser(f.RULES,{debug:!0}):f.defaultParser;super(l(_,I),k),this.source=_}emitSource(){return this.source}}f.Parser=v})(BNF$2||(BNF$2={}));BNF$3.default=BNF$2;var W3CEBNF={};Object.defineProperty(W3CEBNF,"__esModule",{value:!0});const Parser_1$1=Parser$1;var BNF$1;(function(f){f.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],f.defaultParser=new Parser_1$1.Parser(f.RULES,{debug:!1});const d=/^(!|&)/,l=/(\?|\+|\*)$/,y=/^%/;function v(F,E){if(typeof F=="string"){if(d.test(F))return"";if(y.test(F)){let O=l.exec(F),R=O?O[0]+" ":"";return b(F,E)?k(F,E)+R:"("+k(F,E)+")"+R}return F}else return F.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function b(F,E){let w=Parser_1$1.findRuleByName(F,E);return w&&w.bnf.length==1&&w.bnf[0].length==1&&(w.bnf[0][0]instanceof RegExp||w.bnf[0][0][0]=='"'||w.bnf[0][0][0]=="'")}function _(F,E){return F.map(w=>v(w,E)).join(" ")}function k(F,E){let w=Parser_1$1.findRuleByName(F,E);return w?w.bnf.map(O=>_(O,E)).join(" | "):"RULE_NOT_FOUND {"+F+"}"}function I(F){let E=[];return F.grammarRules.forEach(w=>{if(!/^%/.test(w.name)){let O=w.recover?" /* { recoverUntil="+w.recover+" } */":"";E.push(w.name+" ::= "+k(w.name,F)+O)}}),E.join(`
`)}f.emit=I;let K=0;function B(F,E){throw console.log("reberia restar "+E+" a "+F),new Error("Difference not supported yet")}function z(F){return new RegExp(F.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function P(F,E,w){let O=null,R=[];return E.children.forEach((C,h)=>{C.type=="Minus"&&B(O,C);let m=E.children[h+1];m=m&&m.type=="PrimaryDecoration"&&m.text||"";let M="";switch(C.type){case"SubItem":let V="%"+(w+K++);H(F,C,V),R.push(M+V+m);break;case"NCName":case"StringLiteral":R.push(M+C.text+m);break;case"CharCode":case"CharClass":if(m||M){let G={name:"%"+(w+K++),bnf:[[z(C.text)]]};F.push(G),R.push(M+G.name+m)}else R.push(z(C.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+C.type+" -> "+JSON.stringify(C.text))}O=C}),R}function H(F,E,w){let O=E.children.filter(h=>h.type=="SequenceOrDifference").map(h=>P(F,h,w)),R={name:w,bnf:O},C=null;O.forEach(h=>{C=C||h.recover,delete h.recover}),w.indexOf("%")==0&&(R.fragment=!0),C&&(R.recover=C),F.push(R)}function $(F,E=f.defaultParser){let w=E.getAST(F);if(!w)throw new Error("Could not parse "+F);if(w.errors&&w.errors.length)throw w.errors[0];let O=[];return w.children.filter(R=>R.type=="Production").map(R=>{let C=R.children.filter(h=>h.type=="NCName")[0].text;H(O,R,C)}),O}f.getRules=$;function Q(F,E=f.defaultParser){return $(F.join(""),E)}f.Transform=Q;class D extends Parser_1$1.Parser{constructor(E,w){const O=w&&w.debugRulesParser===!0?new Parser_1$1.Parser(f.RULES,{debug:!0}):f.defaultParser;super($(E,O),w)}emitSource(){return I(this)}}f.Parser=D})(BNF$1||(BNF$1={}));W3CEBNF.default=BNF$1;var Custom={};Object.defineProperty(Custom,"__esModule",{value:!0});const TokenError_1=TokenError$1,Parser_1=Parser$1;var BNF;(function(f){f.RULES=[{name:"Grammar",bnf:[["RULE_S*","Attributes?","RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","%Choice","RULE_WHITESPACE*","Attributes?","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Attributes",bnf:[['"{"',"Attribute","%Attributes*","RULE_S*",'"}"']]},{name:"%Attributes",bnf:[["RULE_S*",'","',"Attribute"]],fragment:!0},{name:"Attribute",bnf:[["RULE_S*","NCName","RULE_WHITESPACE*",'"="',"RULE_WHITESPACE*","AttributeValue"]]},{name:"AttributeValue",bnf:[["NCName"],[/[1-9][0-9]*/]]},{name:"%Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_S*",'"|"',"RULE_S*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["%Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","%Item"],["%Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"%Item",bnf:[["RULE_WHITESPACE*","PrimaryPreDecoration?","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"PrimaryPreDecoration",bnf:[['"&"'],['"!"'],['"~"']]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_S*","%Choice","RULE_S*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]]},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[[/[^*]/],['"*"+',/[^/]*/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],f.defaultParser=new Parser_1.Parser(f.RULES,{debug:!1});const d=/^(!|&)/,l=/(\?|\+|\*)$/,y=/^%/;function v(F,E){if(typeof F=="string"){let w=l.exec(F),O=d.exec(F),R=O?O[0]:"",C=w?w[0]+" ":"";return y.test(F)?b(F,E)?R+k(F,E)+C:R+"("+k(F,E)+")"+C:F.replace(d,R)}else return F.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function b(F,E){let w=Parser_1.findRuleByName(F,E);return w&&w.bnf.length==1&&w.bnf[0].length==1&&(w.bnf[0][0]instanceof RegExp||w.bnf[0][0][0]=='"'||w.bnf[0][0][0]=="'")}function _(F,E){return F.map(w=>v(w,E)).join(" ")}function k(F,E){let w=Parser_1.findRuleByName(F,E);return w?w.bnf.map(O=>_(O,E)).join(" | "):"RULE_NOT_FOUND {"+F+"}"}function I(F){let E=[];return F.grammarRules.forEach(w=>{if(!/^%/.test(w.name)){let O=w.recover?" { recoverUntil="+w.recover+" }":"";E.push(w.name+" ::= "+k(w.name,F)+O)}}),E.join(`
`)}f.emit=I;let K=0;function B(F,E){throw console.log("reberia restar "+E+" a "+F),new Error("Difference not supported yet")}function z(F){return new RegExp(F.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function P(F,E,w,O){let R=null,C=[];return E.children.forEach((h,m)=>{h.type=="Minus"&&B(R,h);let M=E.children[m+1];M=M&&M.type=="PrimaryDecoration"&&M.text||"";let V="";R&&R.type=="PrimaryPreDecoration"&&(V=R.text);let G=V=="~"?1:void 0;switch(G&&(V=""),h.type){case"SubItem":let ae="%"+(w+K++);H(F,h,ae,O),C.push(V+ae+M);break;case"NCName":C.push(V+h.text+M);break;case"StringLiteral":if(M||V||!/^['"/()a-zA-Z0-9&_.:=,+*\-\^\\]+$/.test(h.text))C.push(V+h.text+M);else for(const ce of h.text.slice(1,-1))O&&O.ignoreCase=="true"&&/[a-zA-Z]/.test(ce)?C.push(new RegExp("["+ce.toUpperCase()+ce.toLowerCase()+"]")):C.push(new RegExp(Parser_1.escapeRegExp(ce)));break;case"CharCode":case"CharClass":if(M||V){let ce={name:"%"+(w+K++),bnf:[[z(h.text)]],pinned:G};F.push(ce),C.push(V+ce.name+M)}else C.push(z(h.text));break;case"PrimaryPreDecoration":case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+h.type+" -> "+JSON.stringify(h.text))}R=h}),C}function H(F,E,w,O=void 0){let R=E.children.filter(M=>M.type=="Attributes")[0],C={};R&&R.children.forEach(M=>{let V=M.children.filter(G=>G.type=="NCName")[0].text;if(V in C)throw new TokenError_1.TokenError("Duplicated attribute "+V,M);C[V]=M.children.filter(G=>G.type=="AttributeValue")[0].text});let h=E.children.filter(M=>M.type=="SequenceOrDifference").map(M=>P(F,M,w,O||C)),m={name:w,bnf:h};if(w.indexOf("%")==0&&(m.fragment=!0),C.recoverUntil&&(m.recover=C.recoverUntil,m.bnf.length>1))throw new TokenError_1.TokenError("only one-option productions are suitable for error recovering",E);if("pin"in C){let M=parseInt(C.pin);if(isNaN(M)||(m.pinned=M),m.bnf.length>1)throw new TokenError_1.TokenError("only one-option productions are suitable for pinning",E)}"ws"in C?m.implicitWs=C.ws!="explicit":m.implicitWs=null,m.fragment=m.fragment||C.fragment=="true",m.simplifyWhenOneChildren=C.simplifyWhenOneChildren=="true",F.push(m)}function $(F,E=f.defaultParser){let w=E.getAST(F);if(!w)throw new Error("Could not parse "+F);if(w.errors&&w.errors.length)throw w.errors[0];let O=null,R=w.children.filter(m=>m.type=="Attributes")[0],C={};R&&R.children.forEach(m=>{let M=m.children.filter(V=>V.type=="NCName")[0].text;if(M in C)throw new TokenError_1.TokenError("Duplicated attribute "+M,m);C[M]=m.children.filter(V=>V.type=="AttributeValue")[0].text}),O=C.ws=="implicit";let h=[];return w.children.filter(m=>m.type=="Production").map(m=>{let M=m.children.filter(V=>V.type=="NCName")[0].text;H(h,m,M)}),h.forEach(m=>{m.implicitWs===null&&(m.implicitWs=O)}),h}f.getRules=$;function Q(F,E=f.defaultParser){return $(F.join(""),E)}f.Transform=Q;class D extends Parser_1.Parser{constructor(E,w){const O=w&&w.debugRulesParser===!0?new Parser_1.Parser(f.RULES,{debug:!0}):f.defaultParser;super($(E,O),w)}emitSource(){return I(this)}}f.Parser=D})(BNF||(BNF={}));Custom.default=BNF;(function(f){Object.defineProperty(f,"__esModule",{value:!0});var d=BNF$3;Object.defineProperty(f,"BNF",{enumerable:!0,get:function(){return d.default}});var l=W3CEBNF;Object.defineProperty(f,"W3C",{enumerable:!0,get:function(){return l.default}});var y=Custom;Object.defineProperty(f,"Custom",{enumerable:!0,get:function(){return y.default}})})(Grammars);(function(f){Object.defineProperty(f,"__esModule",{value:!0});var d=Parser$1;Object.defineProperty(f,"Parser",{enumerable:!0,get:function(){return d.Parser}});var l=TokenError$1;Object.defineProperty(f,"TokenError",{enumerable:!0,get:function(){return l.TokenError}}),f.Grammars=Grammars})(dist);var hasRequiredCalc;function requireCalc(){return hasRequiredCalc||(hasRequiredCalc=1,function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.parseFormula=f.parseAndApply=f.Source=f.Formula=void 0;const d=neverthrow,l=requireAlgebraic_operation(),y=ast_utils,v=requireConditional_function(),b=constant,_=destination,k=display_directive,I=range,K=reference,B=requireSingle_param_function(),z=dist,P=lodash.exports,H=`
tblfm_line   ::= "<!-- TBLFM: " formula_list " -->"
formula_list ::= formula ( "::" formula_list )?
formula      ::= destination "=" source display_directive?

source           ::= range | source_reference | single_param_function_call | conditional_function_call | algebraic_operation | float | real
range            ::= source_reference ".." source_reference
source_reference ::= absolute_reference | relative_reference
destination      ::= range | absolute_reference

relative_reference ::= (relative_row | absolute_row) (relative_column | absolute_column) | relative_row | relative_column
relative_row ::= "@" ( "-" | "+" ) int
relative_column ::= "$" ( "-" | "+" ) int

absolute_reference ::= absolute_row absolute_column | absolute_row | absolute_column
absolute_row ::= "@" ( "I" | "<" | ">" | int )
absolute_column ::= "$" ( "<" | ">" | int )

single_param_function_call ::= single_param_function "(" source ")" 
single_param_function      ::= "mean" | "sum"

conditional_function_call ::= "if(" predicate "," " "? source "," " "? source ")"
predicate                 ::= source_without_range conditional_operator source_without_range
source_without_range      ::= source_reference | single_param_function_call | conditional_function_call | algebraic_operation | float | real
conditional_operator      ::= ">" | "<" | ">=" | "<=" | "==" | "!="

algebraic_operation ::= "(" source " "? algebraic_operator " "? source ")"
algebraic_operator  ::= "+" | "-" | "*" | "/"

display_directive        ::= ";" display_directive_option
display_directive_option ::= formatting_directive
formatting_directive     ::= "%." int "f"

float ::= "-"? int "." int
real ::= "-"? int
int  ::= [0-9]+
`;class ${constructor(O,R){this.merge=m=>this.destination.merge(this.source,m);let C=new k.DefaultFormatter;O.children.length===3&&(C=new k.DisplayDirective(O.children[2]));const h=_.newDestination(O.children[0],R,C);if(h.isErr())throw h.error;this.destination=h.value,this.source=new Q(O.children[1],R)}}f.Formula=$;class Q{constructor(O,R){if(this.getValue=(m,M)=>this.locationDescriptor.getValue(m,M),O.type!=="source"&&O.type!=="source_without_range")throw Error("Invalid AST token type of "+O.type);if(O.children.length!==1)throw Error("Unexpected children length in Source");const C=O.children[0],h=D(C,R);if(h.isErr())throw h.error;this.locationDescriptor=h.value}}f.Source=Q;const D=(w,O)=>{try{switch(w.type){case"range":return d.ok(new I.Range(w,O));case"source_reference":const R=y.checkChildLength(w,1);return R?d.err(R):d.ok(new K.Reference(w.children[0],O));case"single_param_function_call":return d.ok(new B.SingleParamFunctionCall(w,O));case"conditional_function_call":return d.ok(new v.ConditionalFunctionCall(w,O));case"algebraic_operation":return d.ok(new l.AlgebraicOperation(w,O));case"real":return d.ok(new b.Constant(w,O));case"float":return d.ok(new b.Constant(w,O));default:throw Error("Unrecognized valueProvider type "+w.type)}}catch(R){return d.err(R)}},F=(w,O)=>w.reduce((C,h)=>C.andThen(m=>{const M=f.parseFormula(h,O);return M.isErr()?M:d.ok(P.concat(M.value,m))}),d.ok([])).andThen(C=>C.reduceRight((h,m)=>h.andThen(M=>m.merge(M)),d.ok(O)));f.parseAndApply=F;const E=(w,O)=>{const C=new z.Grammars.W3C.Parser(H).getAST(w);if(!C)return d.err(new Error(`Formula '${w}' could not be parsed`));const h=y.checkType(C,"tblfm_line");if(h)return d.err(h);const m=y.checkChildLength(C,1);if(m)return d.err(m);let M=C.children[0].children;const V=[];try{do V.push(new $(M[0],O)),M.length>1&&M[1].type==="formula_list"?M=M[1].children:M=[];while(M.length>0);return d.ok(V)}catch(G){return d.err(G)}};f.parseFormula=E}(calc)),calc}Object.defineProperty(table,"__esModule",{value:!0});table.Table=void 0;const calc_1=requireCalc(),focus_1=focus,point_1=point,range_1=range$1;class Table{constructor(d){this._rows=d.slice()}getHeight(){return this._rows.length}getWidth(){return this._rows.map(d=>d.getWidth()).reduce((d,l)=>Math.max(d,l),0)}getHeaderWidth(){return this._rows[0].getWidth()}getRows(){return this._rows.slice()}getDelimiterRow(){const d=this._rows[1];if(d!==void 0&&d.isDelimiter())return d}getCellAt(d,l){const y=this._rows[d];if(y!==void 0)return y.getCellAt(l)}getFocusedCell(d){return this.getCellAt(d.row,d.column)}toLines(){return this._rows.map(d=>d.toText())}setCellAt(d,l,y){const v=this.getRows();return v[d]=v[d].setCellAt(l,y),new Table(v)}focusOfPosition(d,l){const y=d.row-l,v=this._rows[y];if(v===void 0)return;if(d.column<v.marginLeft.length+1)return new focus_1.Focus(y,-1,d.column);const b=v.getCells().map(K=>K.rawContent.length);let _=v.marginLeft.length+1,k=0;for(;k<b.length&&!(_+b[k]+1>d.column);k++)_+=b[k]+1;const I=d.column-_;return new focus_1.Focus(y,k,I)}positionOfFocus(d,l){const y=this._rows[d.row];if(y===void 0)return;const v=d.row+l;if(d.column<0)return new point_1.Point(v,d.offset);const b=y.getCells().map(I=>I.rawContent.length),_=Math.min(d.column,b.length);let k=y.marginLeft.length+1;for(let I=0;I<_;I++)k+=b[I]+1;return new point_1.Point(v,k+d.offset)}selectionRangeOfFocus(d,l){const y=this._rows[d.row];if(y===void 0)return;const v=y.getCellAt(d.column);if(v===void 0||v.content==="")return;const b=d.row+l,_=y.getCells().map(I=>I.rawContent.length);let k=y.marginLeft.length+1;for(let I=0;I<d.column;I++)k+=_[I]+1;return k+=v.paddingLeft,new range_1.Range(new point_1.Point(b,k),new point_1.Point(b,k+v.content.length))}applyFormulas(d){return calc_1.parseAndApply(d,this)}}table.Table=Table;var parser={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.readTable=f._marginRegex=f.marginRegexSrc=f._readRow=f._splitCells=void 0;const d=table,l=tableCell,y=tableRow,v=K=>{const B=[];let z="",P=K;for(;P!=="";)switch(P[0]){case"`":{const H=P.match(/^`*/);if(H===null)break;const $=H[0];let Q=$,D=P.substr($.length),F=!1;for(;D!=="";)if(D[0]==="`"){const E=D.match(/^`*/);if(E===null)break;const w=E[0];if(Q+=w,D=D.substr(w.length),w.length===$.length){F=!0;break}}else Q+=D[0],D=D.substr(1);F?(z+=Q,P=D):(z+="`",P=P.substr(1))}break;case"\\":P.length>=2?(z+=P.substr(0,2),P=P.substr(2)):(z+="\\",P=P.substr(1));break;case"[":if(z+="[",P=P.substr(1),/\[[^\\|\]]+\|[^|\]]+]]/.test(P)){const H=P.indexOf("|");z+=P.slice(0,H),z+="\\|",P=P.substr(H+1)}break;case"|":B.push(z),z="",P=P.substr(1);break;default:z+=P[0],P=P.substr(1)}return B.push(z),B};f._splitCells=v;const b=(K,B=/^\s*$/)=>{let z=f._splitCells(K),P;z.length>0&&B.test(z[0])?(P=z[0],z=z.slice(1)):P="";let H;return z.length>1&&/^\s*$/.test(z[z.length-1])?(H=z[z.length-1],z=z.slice(0,z.length-1)):H="",new y.TableRow(z.map($=>new l.TableCell($)),P,H)};f._readRow=b;const _=K=>{let B="";return K.forEach(z=>{z!=="|"&&z!=="\\"&&z!=="`"&&(B+=`\\u{${z.codePointAt(0).toString(16)}}`)}),`[\\s${B}]*`};f.marginRegexSrc=_;const k=K=>new RegExp(`^${f.marginRegexSrc(K)}$`,"u");f._marginRegex=k;const I=(K,B)=>{const z=f._marginRegex(B.leftMarginChars);return new d.Table(K.map(P=>f._readRow(P,z)))};f.readTable=I})(parser);var formatter={},defs=[[0,31,"N"],[32,126,"Na"],[127,160,"N"],[161,161,"A"],[162,163,"Na"],[164,164,"A"],[165,166,"Na"],[167,168,"A"],[169,169,"N"],[170,170,"A"],[171,171,"N"],[172,172,"Na"],[173,174,"A"],[175,175,"Na"],[176,180,"A"],[181,181,"N"],[182,186,"A"],[187,187,"N"],[188,191,"A"],[192,197,"N"],[198,198,"A"],[199,207,"N"],[208,208,"A"],[209,214,"N"],[215,216,"A"],[217,221,"N"],[222,225,"A"],[226,229,"N"],[230,230,"A"],[231,231,"N"],[232,234,"A"],[235,235,"N"],[236,237,"A"],[238,239,"N"],[240,240,"A"],[241,241,"N"],[242,243,"A"],[244,246,"N"],[247,250,"A"],[251,251,"N"],[252,252,"A"],[253,253,"N"],[254,254,"A"],[255,256,"N"],[257,257,"A"],[258,272,"N"],[273,273,"A"],[274,274,"N"],[275,275,"A"],[276,282,"N"],[283,283,"A"],[284,293,"N"],[294,295,"A"],[296,298,"N"],[299,299,"A"],[300,304,"N"],[305,307,"A"],[308,311,"N"],[312,312,"A"],[313,318,"N"],[319,322,"A"],[323,323,"N"],[324,324,"A"],[325,327,"N"],[328,331,"A"],[332,332,"N"],[333,333,"A"],[334,337,"N"],[338,339,"A"],[340,357,"N"],[358,359,"A"],[360,362,"N"],[363,363,"A"],[364,461,"N"],[462,462,"A"],[463,463,"N"],[464,464,"A"],[465,465,"N"],[466,466,"A"],[467,467,"N"],[468,468,"A"],[469,469,"N"],[470,470,"A"],[471,471,"N"],[472,472,"A"],[473,473,"N"],[474,474,"A"],[475,475,"N"],[476,476,"A"],[477,592,"N"],[593,593,"A"],[594,608,"N"],[609,609,"A"],[610,707,"N"],[708,708,"A"],[709,710,"N"],[711,711,"A"],[712,712,"N"],[713,715,"A"],[716,716,"N"],[717,717,"A"],[718,719,"N"],[720,720,"A"],[721,727,"N"],[728,731,"A"],[732,732,"N"],[733,733,"A"],[734,734,"N"],[735,735,"A"],[736,767,"N"],[768,879,"A"],[880,912,"N"],[913,929,"A"],[930,930,"N"],[931,937,"A"],[938,944,"N"],[945,961,"A"],[962,962,"N"],[963,969,"A"],[970,1024,"N"],[1025,1025,"A"],[1026,1039,"N"],[1040,1103,"A"],[1104,1104,"N"],[1105,1105,"A"],[1106,4351,"N"],[4352,4447,"W"],[4448,8207,"N"],[8208,8208,"A"],[8209,8210,"N"],[8211,8214,"A"],[8215,8215,"N"],[8216,8217,"A"],[8218,8219,"N"],[8220,8221,"A"],[8222,8223,"N"],[8224,8226,"A"],[8227,8227,"N"],[8228,8231,"A"],[8232,8239,"N"],[8240,8240,"A"],[8241,8241,"N"],[8242,8243,"A"],[8244,8244,"N"],[8245,8245,"A"],[8246,8250,"N"],[8251,8251,"A"],[8252,8253,"N"],[8254,8254,"A"],[8255,8307,"N"],[8308,8308,"A"],[8309,8318,"N"],[8319,8319,"A"],[8320,8320,"N"],[8321,8324,"A"],[8325,8360,"N"],[8361,8361,"H"],[8362,8363,"N"],[8364,8364,"A"],[8365,8450,"N"],[8451,8451,"A"],[8452,8452,"N"],[8453,8453,"A"],[8454,8456,"N"],[8457,8457,"A"],[8458,8466,"N"],[8467,8467,"A"],[8468,8469,"N"],[8470,8470,"A"],[8471,8480,"N"],[8481,8482,"A"],[8483,8485,"N"],[8486,8486,"A"],[8487,8490,"N"],[8491,8491,"A"],[8492,8530,"N"],[8531,8532,"A"],[8533,8538,"N"],[8539,8542,"A"],[8543,8543,"N"],[8544,8555,"A"],[8556,8559,"N"],[8560,8569,"A"],[8570,8584,"N"],[8585,8585,"A"],[8586,8591,"N"],[8592,8601,"A"],[8602,8631,"N"],[8632,8633,"A"],[8634,8657,"N"],[8658,8658,"A"],[8659,8659,"N"],[8660,8660,"A"],[8661,8678,"N"],[8679,8679,"A"],[8680,8703,"N"],[8704,8704,"A"],[8705,8705,"N"],[8706,8707,"A"],[8708,8710,"N"],[8711,8712,"A"],[8713,8714,"N"],[8715,8715,"A"],[8716,8718,"N"],[8719,8719,"A"],[8720,8720,"N"],[8721,8721,"A"],[8722,8724,"N"],[8725,8725,"A"],[8726,8729,"N"],[8730,8730,"A"],[8731,8732,"N"],[8733,8736,"A"],[8737,8738,"N"],[8739,8739,"A"],[8740,8740,"N"],[8741,8741,"A"],[8742,8742,"N"],[8743,8748,"A"],[8749,8749,"N"],[8750,8750,"A"],[8751,8755,"N"],[8756,8759,"A"],[8760,8763,"N"],[8764,8765,"A"],[8766,8775,"N"],[8776,8776,"A"],[8777,8779,"N"],[8780,8780,"A"],[8781,8785,"N"],[8786,8786,"A"],[8787,8799,"N"],[8800,8801,"A"],[8802,8803,"N"],[8804,8807,"A"],[8808,8809,"N"],[8810,8811,"A"],[8812,8813,"N"],[8814,8815,"A"],[8816,8833,"N"],[8834,8835,"A"],[8836,8837,"N"],[8838,8839,"A"],[8840,8852,"N"],[8853,8853,"A"],[8854,8856,"N"],[8857,8857,"A"],[8858,8868,"N"],[8869,8869,"A"],[8870,8894,"N"],[8895,8895,"A"],[8896,8977,"N"],[8978,8978,"A"],[8979,8985,"N"],[8986,8987,"W"],[8988,9e3,"N"],[9001,9002,"W"],[9003,9192,"N"],[9193,9196,"W"],[9197,9199,"N"],[9200,9200,"W"],[9201,9202,"N"],[9203,9203,"W"],[9204,9311,"N"],[9312,9449,"A"],[9450,9450,"N"],[9451,9547,"A"],[9548,9551,"N"],[9552,9587,"A"],[9588,9599,"N"],[9600,9615,"A"],[9616,9617,"N"],[9618,9621,"A"],[9622,9631,"N"],[9632,9633,"A"],[9634,9634,"N"],[9635,9641,"A"],[9642,9649,"N"],[9650,9651,"A"],[9652,9653,"N"],[9654,9655,"A"],[9656,9659,"N"],[9660,9661,"A"],[9662,9663,"N"],[9664,9665,"A"],[9666,9669,"N"],[9670,9672,"A"],[9673,9674,"N"],[9675,9675,"A"],[9676,9677,"N"],[9678,9681,"A"],[9682,9697,"N"],[9698,9701,"A"],[9702,9710,"N"],[9711,9711,"A"],[9712,9724,"N"],[9725,9726,"W"],[9727,9732,"N"],[9733,9734,"A"],[9735,9736,"N"],[9737,9737,"A"],[9738,9741,"N"],[9742,9743,"A"],[9744,9747,"N"],[9748,9749,"W"],[9750,9755,"N"],[9756,9756,"A"],[9757,9757,"N"],[9758,9758,"A"],[9759,9791,"N"],[9792,9792,"A"],[9793,9793,"N"],[9794,9794,"A"],[9795,9799,"N"],[9800,9811,"W"],[9812,9823,"N"],[9824,9825,"A"],[9826,9826,"N"],[9827,9829,"A"],[9830,9830,"N"],[9831,9834,"A"],[9835,9835,"N"],[9836,9837,"A"],[9838,9838,"N"],[9839,9839,"A"],[9840,9854,"N"],[9855,9855,"W"],[9856,9874,"N"],[9875,9875,"W"],[9876,9885,"N"],[9886,9887,"A"],[9888,9888,"N"],[9889,9889,"W"],[9890,9897,"N"],[9898,9899,"W"],[9900,9916,"N"],[9917,9918,"W"],[9919,9919,"A"],[9920,9923,"N"],[9924,9925,"W"],[9926,9933,"A"],[9934,9934,"W"],[9935,9939,"A"],[9940,9940,"W"],[9941,9953,"A"],[9954,9954,"N"],[9955,9955,"A"],[9956,9959,"N"],[9960,9961,"A"],[9962,9962,"W"],[9963,9969,"A"],[9970,9971,"W"],[9972,9972,"A"],[9973,9973,"W"],[9974,9977,"A"],[9978,9978,"W"],[9979,9980,"A"],[9981,9981,"W"],[9982,9983,"A"],[9984,9988,"N"],[9989,9989,"W"],[9990,9993,"N"],[9994,9995,"W"],[9996,10023,"N"],[10024,10024,"W"],[10025,10044,"N"],[10045,10045,"A"],[10046,10059,"N"],[10060,10060,"W"],[10061,10061,"N"],[10062,10062,"W"],[10063,10066,"N"],[10067,10069,"W"],[10070,10070,"N"],[10071,10071,"W"],[10072,10101,"N"],[10102,10111,"A"],[10112,10132,"N"],[10133,10135,"W"],[10136,10159,"N"],[10160,10160,"W"],[10161,10174,"N"],[10175,10175,"W"],[10176,10213,"N"],[10214,10221,"Na"],[10222,10628,"N"],[10629,10630,"Na"],[10631,11034,"N"],[11035,11036,"W"],[11037,11087,"N"],[11088,11088,"W"],[11089,11092,"N"],[11093,11093,"W"],[11094,11097,"A"],[11098,11903,"N"],[11904,11929,"W"],[11930,11930,"N"],[11931,12019,"W"],[12020,12031,"N"],[12032,12245,"W"],[12246,12271,"N"],[12272,12283,"W"],[12284,12287,"N"],[12288,12288,"F"],[12289,12350,"W"],[12351,12352,"N"],[12353,12438,"W"],[12439,12440,"N"],[12441,12543,"W"],[12544,12548,"N"],[12549,12591,"W"],[12592,12592,"N"],[12593,12686,"W"],[12687,12687,"N"],[12688,12771,"W"],[12772,12783,"N"],[12784,12830,"W"],[12831,12831,"N"],[12832,12871,"W"],[12872,12879,"A"],[12880,19903,"W"],[19904,19967,"N"],[19968,42124,"W"],[42125,42127,"N"],[42128,42182,"W"],[42183,43359,"N"],[43360,43388,"W"],[43389,44031,"N"],[44032,55203,"W"],[55204,57343,"N"],[57344,63743,"A"],[63744,64255,"W"],[64256,65023,"N"],[65024,65039,"A"],[65040,65049,"W"],[65050,65071,"N"],[65072,65106,"W"],[65107,65107,"N"],[65108,65126,"W"],[65127,65127,"N"],[65128,65131,"W"],[65132,65280,"N"],[65281,65376,"F"],[65377,65470,"H"],[65471,65473,"N"],[65474,65479,"H"],[65480,65481,"N"],[65482,65487,"H"],[65488,65489,"N"],[65490,65495,"H"],[65496,65497,"N"],[65498,65500,"H"],[65501,65503,"N"],[65504,65510,"F"],[65511,65511,"N"],[65512,65518,"H"],[65519,65532,"N"],[65533,65533,"A"],[65534,94175,"N"],[94176,94180,"W"],[94181,94191,"N"],[94192,94193,"W"],[94194,94207,"N"],[94208,100343,"W"],[100344,100351,"N"],[100352,101589,"W"],[101590,101631,"N"],[101632,101640,"W"],[101641,110591,"N"],[110592,110878,"W"],[110879,110927,"N"],[110928,110930,"W"],[110931,110947,"N"],[110948,110951,"W"],[110952,110959,"N"],[110960,111355,"W"],[111356,126979,"N"],[126980,126980,"W"],[126981,127182,"N"],[127183,127183,"W"],[127184,127231,"N"],[127232,127242,"A"],[127243,127247,"N"],[127248,127277,"A"],[127278,127279,"N"],[127280,127337,"A"],[127338,127343,"N"],[127344,127373,"A"],[127374,127374,"W"],[127375,127376,"A"],[127377,127386,"W"],[127387,127404,"A"],[127405,127487,"N"],[127488,127490,"W"],[127491,127503,"N"],[127504,127547,"W"],[127548,127551,"N"],[127552,127560,"W"],[127561,127567,"N"],[127568,127569,"W"],[127570,127583,"N"],[127584,127589,"W"],[127590,127743,"N"],[127744,127776,"W"],[127777,127788,"N"],[127789,127797,"W"],[127798,127798,"N"],[127799,127868,"W"],[127869,127869,"N"],[127870,127891,"W"],[127892,127903,"N"],[127904,127946,"W"],[127947,127950,"N"],[127951,127955,"W"],[127956,127967,"N"],[127968,127984,"W"],[127985,127987,"N"],[127988,127988,"W"],[127989,127991,"N"],[127992,128062,"W"],[128063,128063,"N"],[128064,128064,"W"],[128065,128065,"N"],[128066,128252,"W"],[128253,128254,"N"],[128255,128317,"W"],[128318,128330,"N"],[128331,128334,"W"],[128335,128335,"N"],[128336,128359,"W"],[128360,128377,"N"],[128378,128378,"W"],[128379,128404,"N"],[128405,128406,"W"],[128407,128419,"N"],[128420,128420,"W"],[128421,128506,"N"],[128507,128591,"W"],[128592,128639,"N"],[128640,128709,"W"],[128710,128715,"N"],[128716,128716,"W"],[128717,128719,"N"],[128720,128722,"W"],[128723,128724,"N"],[128725,128727,"W"],[128728,128746,"N"],[128747,128748,"W"],[128749,128755,"N"],[128756,128764,"W"],[128765,128991,"N"],[128992,129003,"W"],[129004,129291,"N"],[129292,129338,"W"],[129339,129339,"N"],[129340,129349,"W"],[129350,129350,"N"],[129351,129400,"W"],[129401,129401,"N"],[129402,129483,"W"],[129484,129484,"N"],[129485,129535,"W"],[129536,129647,"N"],[129648,129652,"W"],[129653,129655,"N"],[129656,129658,"W"],[129659,129663,"N"],[129664,129670,"W"],[129671,129679,"N"],[129680,129704,"W"],[129705,129711,"N"],[129712,129718,"W"],[129719,129727,"N"],[129728,129730,"W"],[129731,129743,"N"],[129744,129750,"W"],[129751,131071,"N"],[131072,196605,"W"],[196606,196607,"N"],[196608,262141,"W"],[262142,917759,"N"],[917760,917999,"A"],[918e3,983039,"N"],[983040,1048573,"A"],[1048574,1048575,"N"],[1048576,1114109,"A"],[1114110,1114111,"N"]],version="13.0.0";function getEAWOfCodePoint(f){for(var d=0,l=defs.length-1;d!==l;){var y=d+(l-d>>1),v=defs[y],b=v[0],_=v[1],k=v[2];if(f<b)l=y-1;else if(f>_)d=y+1;else return k}return defs[d][2]}function getEAW(f,d){d===void 0&&(d=0);var l=f.codePointAt(d);if(l!==void 0)return getEAWOfCodePoint(l)}var defaultWidths={N:1,Na:1,W:2,F:2,H:1,A:1};function computeWidth(f,d){for(var l=0,y=0,v=f;y<v.length;y++){var b=v[y],_=getEAW(b);l+=d&&d[_]||defaultWidths[_]}return l}const lib=Object.freeze(Object.defineProperty({__proto__:null,computeWidth,eawVersion:version,getEAW},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(lib);(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.moveColumn=f.deleteColumn=f.insertColumn=f.moveRow=f.deleteRow=f.insertRow=f.alterAlignment=f.formatTable=f.FormatType=f._weakFormatTable=f._formatTable=f._padText=f._alignText=f._computeTextWidth=f.completeTable=f._extendArray=f._delimiterText=void 0;const d=alignment,l=table,y=tableCell,v=tableRow,b=require$$4,_=(h,m)=>{const M="-".repeat(m);switch(h){case d.Alignment.NONE:return` ${M} `;case d.Alignment.LEFT:return`:${M} `;case d.Alignment.RIGHT:return` ${M}:`;case d.Alignment.CENTER:return`:${M}:`;default:throw new Error("Unknown alignment: "+h)}};f._delimiterText=_;const k=(h,m,M)=>{const V=h.slice();for(let G=h.length;G<m;G++)V.push(M(G,h));return V};f._extendArray=k;const I=(h,m)=>{const M=h.getHeight(),V=h.getWidth();if(M===0)throw new Error("Empty table");const G=h.getRows(),ae=[],ce=G[0],ye=ce.getCells();ae.push(new v.TableRow(f._extendArray(ye,V,fe=>new y.TableCell(fe===ye.length?ce.marginRight:"")),ce.marginLeft,ye.length<V?"":ce.marginRight));const Z=h.getDelimiterRow();if(Z!==void 0){const fe=Z.getCells();ae.push(new v.TableRow(f._extendArray(fe,V,ie=>new y.TableCell(f._delimiterText(d.Alignment.NONE,ie===fe.length?Math.max(m.minDelimiterWidth,Z.marginRight.length-2):m.minDelimiterWidth))),Z.marginLeft,fe.length<V?"":Z.marginRight))}else ae.push(new v.TableRow(f._extendArray([],V,()=>new y.TableCell(f._delimiterText(d.Alignment.NONE,m.minDelimiterWidth))),"",""));for(let fe=Z!==void 0?2:1;fe<M;fe++){const ie=G[fe],_e=ie.getCells();ae.push(new v.TableRow(f._extendArray(_e,V,re=>new y.TableCell(re===_e.length?ie.marginRight:"")),ie.marginLeft,_e.length<V?"":ie.marginRight))}return{table:new l.Table(ae),delimiterInserted:Z===void 0}};f.completeTable=I;const K=(h,m)=>{const M=m.normalize?h.normalize("NFC"):h;let V=0;for(const G of M){if(m.wideChars.has(G)){V+=2;continue}if(m.narrowChars.has(G)){V+=1;continue}switch(b.getEAW(G)){case"F":case"W":V+=2;break;case"A":V+=m.ambiguousAsWide?2:1;break;default:V+=1}}return V};f._computeTextWidth=K;const B=(h,m,M,V)=>{const G=m-f._computeTextWidth(h,V);if(G<0)return h;switch(M){case d.Alignment.NONE:throw new Error("Unexpected default alignment");case d.Alignment.LEFT:return h+" ".repeat(G);case d.Alignment.RIGHT:return" ".repeat(G)+h;case d.Alignment.CENTER:return" ".repeat(Math.floor(G/2))+h+" ".repeat(Math.ceil(G/2));default:throw new Error("Unknown alignment: "+M)}};f._alignText=B;const z=h=>` ${h} `;f._padText=z;const P=(h,m)=>{const M=h.getHeight(),V=h.getWidth();if(M===0)return{table:h,marginLeft:""};const G=h.getRows()[0].marginLeft;if(V===0){const ie=new Array(M).fill(new v.TableRow([],G,""));return{table:new l.Table(ie),marginLeft:G}}const ae=h.getDelimiterRow(),ce=new Array(V).fill(0);if(ae!==void 0){const ie=ae.getWidth();for(let _e=0;_e<ie;_e++)ce[_e]=m.minDelimiterWidth}for(let ie=0;ie<M;ie++){if(ae!==void 0&&ie===1)continue;const _e=h.getRows()[ie],re=_e.getWidth();for(let se=0;se<re;se++)ce[se]=Math.max(ce[se],f._computeTextWidth(_e.getCellAt(se).content,m.textWidthOptions))}const ye=ae!==void 0?f._extendArray(ae.getCells().map(ie=>ie.getAlignment()),V,()=>m.defaultAlignment):new Array(V).fill(m.defaultAlignment),Z=[],fe=h.getRows()[0];Z.push(new v.TableRow(fe.getCells().map((ie,_e)=>new y.TableCell(f._padText(f._alignText(ie.content,ce[_e],m.headerAlignment===d.HeaderAlignment.FOLLOW?ye[_e]===d.Alignment.NONE?m.defaultAlignment:ye[_e]:m.headerAlignment,m.textWidthOptions)))),G,"")),ae!==void 0&&Z.push(new v.TableRow(ae.getCells().map((ie,_e)=>new y.TableCell(f._delimiterText(ye[_e],ce[_e]))),G,""));for(let ie=ae!==void 0?2:1;ie<M;ie++){const _e=h.getRows()[ie];Z.push(new v.TableRow(_e.getCells().map((re,se)=>new y.TableCell(f._padText(f._alignText(re.content,ce[se],ye[se]===d.Alignment.NONE?m.defaultAlignment:ye[se],m.textWidthOptions)))),G,""))}return{table:new l.Table(Z),marginLeft:G}};f._formatTable=P;const H=(h,m)=>{const M=h.getHeight(),V=h.getWidth();if(M===0)return{table:h,marginLeft:""};const G=h.getRows()[0].marginLeft;if(V===0){const Z=new Array(M).fill(new v.TableRow([],G,""));return{table:new l.Table(Z),marginLeft:G}}const ae=h.getDelimiterRow(),ce=[],ye=h.getRows()[0];ce.push(new v.TableRow(ye.getCells().map(Z=>new y.TableCell(f._padText(Z.content))),G,"")),ae!==void 0&&ce.push(new v.TableRow(ae.getCells().map(Z=>new y.TableCell(f._delimiterText(Z.getAlignment(),m.minDelimiterWidth))),G,""));for(let Z=ae!==void 0?2:1;Z<M;Z++){const fe=h.getRows()[Z];ce.push(new v.TableRow(fe.getCells().map(ie=>new y.TableCell(f._padText(ie.content))),G,""))}return{table:new l.Table(ce),marginLeft:G}};f._weakFormatTable=H;var $;(function(h){h.NORMAL="normal",h.WEAK="weak"})($=f.FormatType||(f.FormatType={}));const Q=(h,m)=>{switch(m.formatType){case $.NORMAL:return f._formatTable(h,m);case $.WEAK:return f._weakFormatTable(h,m);default:throw new Error("Unknown format type: "+m.formatType)}};f.formatTable=Q;const D=(h,m,M,V)=>{if(h.getHeight()<1)return h;const G=h.getRows()[1];if(m<0||G.getWidth()-1<m)return h;const ae=G.getCells();ae[m]=new y.TableCell(f._delimiterText(M,V.minDelimiterWidth));const ce=h.getRows();return ce[1]=new v.TableRow(ae,G.marginLeft,G.marginRight),new l.Table(ce)};f.alterAlignment=D;const F=(h,m,M)=>{const V=h.getRows();return V.splice(Math.max(m,2),0,M),new l.Table(V)};f.insertRow=F;const E=(h,m)=>{if(m===1)return h;const M=h.getRows();if(m===0){const V=M[0];M[0]=new v.TableRow(new Array(V.getWidth()).fill(new y.TableCell("")),V.marginLeft,V.marginRight)}else M.splice(m,1);return new l.Table(M)};f.deleteRow=E;const w=(h,m,M)=>{if(m<=1||M<=1||m===M)return h;const V=h.getRows(),G=V[m];return V.splice(m,1),V.splice(M,0,G),new l.Table(V)};f.moveRow=w;const O=(h,m,M,V)=>{const G=h.getRows();for(let ae=0;ae<G.length;ae++){const ce=G[ae],ye=G[ae].getCells(),Z=ae===1?new y.TableCell(f._delimiterText(d.Alignment.NONE,V.minDelimiterWidth)):M[ae>1?ae-1:ae];ye.splice(m,0,Z),G[ae]=new v.TableRow(ye,ce.marginLeft,ce.marginRight)}return new l.Table(G)};f.insertColumn=O;const R=(h,m,M)=>{const V=h.getRows();for(let G=0;G<V.length;G++){const ae=V[G];let ce=ae.getCells();ce.length<=1?ce=[new y.TableCell(G===1?f._delimiterText(d.Alignment.NONE,M.minDelimiterWidth):"")]:ce.splice(m,1),V[G]=new v.TableRow(ce,ae.marginLeft,ae.marginRight)}return new l.Table(V)};f.deleteColumn=R;const C=(h,m,M)=>{if(m===M)return h;const V=h.getRows();for(let G=0;G<V.length;G++){const ae=V[G],ce=ae.getCells(),ye=ce[m];ce.splice(m,1),ce.splice(M,0,ye),V[G]=new v.TableRow(ce,ae.marginLeft,ae.marginRight)}return new l.Table(V)};f.moveColumn=C})(formatter);var editScript={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.shortestEditScript=f.applyEditScript=f._applyCommand=f.Delete=f.Insert=void 0;class d{constructor(B,z){this.row=B,this.line=z}}f.Insert=d;class l{constructor(B){this.row=B}}f.Delete=l;const y=(K,B,z)=>{if(B instanceof d)K.insertLine(z+B.row,B.line);else if(B instanceof l)K.deleteLine(z+B.row);else throw new Error("Unknown command")};f._applyCommand=y;const v=(K,B,z)=>{for(const P of B)f._applyCommand(K,P,z)};f.applyEditScript=v;class b{get car(){throw new Error("Not implemented")}get cdr(){throw new Error("Not implemented")}isEmpty(){throw new Error("Not implemented")}unshift(B){return new k(B,this)}toArray(){const B=[];let z=this;for(;!z.isEmpty();)B.push(z.car),z=z.cdr;return B}}class _ extends b{constructor(){super()}get car(){throw new Error("Empty list")}get cdr(){throw new Error("Empty list")}isEmpty(){return!0}}class k extends b{constructor(B,z){super(),this._car=B,this._cdr=z}get car(){return this._car}get cdr(){return this._cdr}isEmpty(){return!1}}const I=(K,B,z=-1)=>{const P=K.length,H=B.length,$=z>=0?Math.min(z,P+H):P+H,Q=new Array(Math.min($,P)+Math.min($,H)+1),D=Math.min($,P);for(let F=0;F<=$;F++){const E=F<=P?-F:F-2*P,w=F<=H?F:-F+2*H;for(let O=E;O<=w;O+=2){let R,C;if(F===0)R=0,C=new _;else if(O===-F)R=Q[D+O+1].i+1,C=Q[D+O+1].script.unshift(new l(R+O));else if(O===F)R=Q[D+O-1].i,C=Q[D+O-1].script.unshift(new d(R+O-1,B[R+O-1]));else{const h=Q[D+O+1].i+1,m=Q[D+O-1].i;h>m?(R=h,C=Q[D+O+1].script.unshift(new l(R+O))):(R=m,C=Q[D+O-1].script.unshift(new d(R+O-1,B[R+O-1])))}for(;R<P&&R+O<H&&K[R]===B[R+O];)R+=1;if(O===H-P&&R===P)return C.toArray().reverse();Q[D+O]={i:R,script:C}}}};f.shortestEditScript=I})(editScript);var textEditor={};Object.defineProperty(textEditor,"__esModule",{value:!0});textEditor.ITextEditor=void 0;class ITextEditor{getCursorPosition(){throw new Error("Not implemented: getCursorPosition")}setCursorPosition(d){throw new Error("Not implemented: setCursorPosition")}setSelectionRange(d){throw new Error("Not implemented: setSelectionRange")}getLastRow(){throw new Error("Not implemented: getLastRow")}acceptsTableEdit(d){throw new Error("Not implemented: acceptsTableEdit")}getLine(d){throw new Error("Not implemented: getLine")}insertLine(d,l){throw new Error("Not implemented: insertLine")}deleteLine(d){throw new Error("Not implemented: deleteLine")}replaceLines(d,l,y){throw new Error("Not implemented: replaceLines")}transact(d){throw new Error("Not implemented: transact")}}textEditor.ITextEditor=ITextEditor;var options={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.defaultOptions=f.optionsWithDefaults=void 0;const d=alignment,l=formatter,y={normalize:!0,wideChars:new Set,narrowChars:new Set,ambiguousAsWide:!1},v={leftMarginChars:new Set,formatType:l.FormatType.NORMAL,minDelimiterWidth:3,defaultAlignment:d.DefaultAlignment.LEFT,headerAlignment:d.HeaderAlignment.FOLLOW,smartCursor:!1},b=_=>Object.assign(Object.assign(Object.assign({},v),_),{textWidthOptions:_.textWidthOptions?Object.assign(Object.assign({},y),_.textWidthOptions):y});f.optionsWithDefaults=b,f.defaultOptions=f.optionsWithDefaults({})})(options);var tableEditor={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.TableEditor=f._computeNewOffset=f._createIsTableFormulaRegex=f._createIsTableRowRegex=f.SortOrder=void 0;const d=editScript,l=focus,y=formatter,v=parser,b=point,_=range$1,k=table,I=tableCell,K=tableRow;var B;(function(Q){Q.Ascending="ascending",Q.Descending="descending"})(B=f.SortOrder||(f.SortOrder={}));const z=Q=>new RegExp(`^${v.marginRegexSrc(Q)}\\|`,"u");f._createIsTableRowRegex=z;const P=Q=>new RegExp(`^${v.marginRegexSrc(Q)}<!-- ?.+-->$`,"u");f._createIsTableFormulaRegex=P;const H=(Q,D,F,E)=>{if(E){const R=F.table.getFocusedCell(Q);return R!==void 0?R.computeRawOffset(0):Q.column<0?F.marginLeft.length:0}const w=D.getFocusedCell(Q),O=F.table.getFocusedCell(Q);if(w!==void 0&&O!==void 0){const R=Math.min(w.computeContentOffset(Q.offset),O.content.length);return O.computeRawOffset(R)}return Q.column<0?F.marginLeft.length:0};f._computeNewOffset=H;class ${constructor(D){this._textEditor=D,this._scActive=!1}resetSmartCursor(){this._scActive=!1}cursorIsInTable(D){const F=f._createIsTableRowRegex(D.leftMarginChars),E=this._textEditor.getCursorPosition();return this._textEditor.acceptsTableEdit(E.row)&&F.test(this._textEditor.getLine(E.row))}cursorIsInTableFormula(D){const F=f._createIsTableFormulaRegex(D.leftMarginChars),E=this._textEditor.getCursorPosition();return this._textEditor.acceptsTableEdit(E.row)&&F.test(this._textEditor.getLine(E.row))}_findTable(D){const F=f._createIsTableRowRegex(D.leftMarginChars),E=f._createIsTableFormulaRegex(D.leftMarginChars);let w=this._textEditor.getCursorPosition();const O=this._textEditor.getLastRow(),R=[],C=[];let h=w.row,m=w.row;{let ae=this._textEditor.getLine(w.row);for(;E.test(ae)&&w.row>=0;)w=new b.Point(w.row-1,w.column),m--,ae=this._textEditor.getLine(w.row)}{const ae=this._textEditor.getLine(w.row);if(!this._textEditor.acceptsTableEdit(w.row)||!F.test(ae))return;R.push(ae)}for(let ae=w.row-1;ae>=0;ae--){const ce=this._textEditor.getLine(ae);if(!this._textEditor.acceptsTableEdit(ae)||!F.test(ce))break;R.unshift(ce),h=ae}for(let ae=w.row+1;ae<=O;ae++){const ce=this._textEditor.getLine(ae);if(!this._textEditor.acceptsTableEdit(ae)||!F.test(ce))break;R.push(ce),m=ae}for(let ae=m+1;ae<=O;ae++){const ce=this._textEditor.getLine(ae);if(!this._textEditor.acceptsTableEdit(ae)||!E.test(ce))break;C.push(ce)}const M=new _.Range(new b.Point(h,0),new b.Point(m,R[R.length-1].length)),V=v.readTable(R,D),G=V.focusOfPosition(w,h);if(G!==void 0)return{range:M,lines:R,formulaLines:C,table:V,focus:G}}_withTable(D,F){const E=this._findTable(D);if(E!==void 0)return F(E)}_updateLines(D,F,E,w=void 0){if(w!==void 0){const O=d.shortestEditScript(w,E,3);if(O!==void 0){d.applyEditScript(this._textEditor,O,D);return}}this._textEditor.replaceLines(D,F,E)}_moveToFocus(D,F,E){const w=F.positionOfFocus(E,D);w!==void 0&&this._textEditor.setCursorPosition(w)}_selectFocus(D,F,E){const w=F.selectionRangeOfFocus(E,D);w!==void 0?this._textEditor.setSelectionRange(w):this._moveToFocus(D,F,E)}format(D){this.withCompletedTable(D,({range:F,lines:E,table:w,focus:O})=>{const R=O;this._textEditor.transact(()=>{this._updateLines(F.start.row,F.end.row+1,w.toLines(),E),this._moveToFocus(F.start.row,w,R)})})}escape(D){this._withTable(D,({range:F,lines:E,table:w,focus:O})=>{const R=y.completeTable(w,D),C=y.formatTable(R.table,D),h=F.end.row+(R.delimiterInserted?2:1);this._textEditor.transact(()=>{this._updateLines(F.start.row,F.end.row+1,C.table.toLines(),E);let m;if(h>this._textEditor.getLastRow())this._textEditor.insertLine(h,""),m=new b.Point(h,0);else{const M=new RegExp(`^${v.marginRegexSrc(D.leftMarginChars)}`,"u"),V=this._textEditor.getLine(h),G=M.exec(V)[0];m=new b.Point(h,G.length)}this._textEditor.setCursorPosition(m)}),this.resetSmartCursor()})}alignColumn(D,F){this.withCompletedTable(F,({range:E,lines:w,table:O,focus:R})=>{let C=R,h=O;0<=C.column&&C.column<=h.getHeaderWidth()-1&&(h=y.alterAlignment(O,C.column,D,F));const m=y.formatTable(h,F);C=C.setOffset(f._computeNewOffset(C,O,m,!1)),this._textEditor.transact(()=>{this._updateLines(E.start.row,E.end.row+1,m.table.toLines(),w),this._moveToFocus(E.start.row,m.table,C)})})}selectCell(D){this.withCompletedTable(D,({range:F,lines:E,table:w,focus:O})=>{const R=O;this._textEditor.transact(()=>{this._updateLines(F.start.row,F.end.row+1,w.toLines(),E),this._selectFocus(F.start.row,w,R)})})}moveFocus(D,F,E){this.withCompletedTable(E,({range:w,lines:O,table:R,focus:C})=>{let h=C;const m=h;if(D!==0){const G=R.getHeight(),ae=h.row<1&&h.row+D>=1?1:h.row>1&&h.row+D<=1?-1:0;h=h.setRow(Math.min(Math.max(h.row+D+ae,0),G<=2?0:G-1))}if(F!==0){const G=R.getHeaderWidth();!(h.column<0&&F<0)&&!(h.column>G-1&&F>0)&&(h=h.setColumn(Math.min(Math.max(h.column+F,0),G-1)))}const M=!h.posEquals(m),V=y.formatTable(R,E);h=h.setOffset(f._computeNewOffset(h,R,V,M)),this._textEditor.transact(()=>{this._updateLines(w.start.row,w.end.row+1,V.table.toLines(),O),M?this._selectFocus(w.start.row,V.table,h):this._moveToFocus(w.start.row,V.table,h)}),M&&this.resetSmartCursor()})}nextCell(D){this._withTable(D,({range:F,lines:E,table:w,focus:O})=>{const R=this._scTablePos!==void 0&&!F.start.equals(this._scTablePos)||this._scLastFocus!==void 0&&!O.posEquals(this._scLastFocus);this._scActive&&R&&this.resetSmartCursor();let C=O;const h=y.completeTable(w,D);h.delimiterInserted&&C.row>0&&(C=C.setRow(C.row+1));const m=C;let M=h.table;if(C.row===1){if(C=C.setRow(2),D.smartCursor?(C.column<0||M.getHeaderWidth()-1<C.column)&&(C=C.setColumn(0)):C=C.setColumn(0),C.row>M.getHeight()-1){const ae=new Array(M.getHeaderWidth()).fill(new I.TableCell(""));M=y.insertRow(M,M.getHeight(),new K.TableRow(ae,"",""))}}else{if(C.column>M.getHeaderWidth()-1){const ae=new Array(M.getHeight()-1).fill(new I.TableCell(""));M=y.insertColumn(M,M.getHeaderWidth(),ae,D)}C=C.setColumn(C.column+1)}const V=y.formatTable(M,D);C=C.setOffset(f._computeNewOffset(C,M,V,!0));const G=V.table.toLines();C.column>V.table.getHeaderWidth()-1&&(G[C.row]+=" ",C=C.setOffset(1)),this._textEditor.transact(()=>{this._updateLines(F.start.row,F.end.row+1,G,E),this._selectFocus(F.start.row,V.table,C)}),D.smartCursor&&(this._scActive||(this._scActive=!0,this._scTablePos=F.start,m.column<0||V.table.getHeaderWidth()-1<m.column?this._scStartFocus=new l.Focus(m.row,0,0):this._scStartFocus=m),this._scLastFocus=C)})}previousCell(D){this.withCompletedTable(D,({range:F,lines:E,table:w,focus:O})=>{let R=O;const C=R;R.row===0?R.column>0&&(R=R.setColumn(R.column-1)):R.row===1?R=new l.Focus(0,w.getHeaderWidth()-1,R.offset):R.column>0?R=R.setColumn(R.column-1):R=new l.Focus(R.row===2?0:R.row-1,w.getHeaderWidth()-1,R.offset);const h=!R.posEquals(C),m=y.formatTable(w,D);R=R.setOffset(f._computeNewOffset(R,w,m,h)),this._textEditor.transact(()=>{this._updateLines(F.start.row,F.end.row+1,m.table.toLines(),E),h?this._selectFocus(F.start.row,m.table,R):this._moveToFocus(F.start.row,m.table,R)}),h&&this.resetSmartCursor()})}nextRow(D){this._withTable(D,({range:F,lines:E,table:w,focus:O})=>{const R=this._scTablePos!==void 0&&!F.start.equals(this._scTablePos)||this._scLastFocus!==void 0&&!O.posEquals(this._scLastFocus);this._scActive&&R&&this.resetSmartCursor();let C=O;const h=y.completeTable(w,D);h.delimiterInserted&&C.row>0&&(C=C.setRow(C.row+1));const m=C;let M=h.table;if(C.row===0?C=C.setRow(2):C=C.setRow(C.row+1),D.smartCursor?this._scActive&&this._scStartFocus!==void 0?C=C.setColumn(this._scStartFocus.column):(C.column<0||M.getHeaderWidth()-1<C.column)&&(C=C.setColumn(0)):C=C.setColumn(0),C.row>M.getHeight()-1){const G=new Array(M.getHeaderWidth()).fill(new I.TableCell(""));M=y.insertRow(M,M.getHeight(),new K.TableRow(G,"",""))}const V=y.formatTable(M,D);C=C.setOffset(f._computeNewOffset(C,M,V,!0)),this._textEditor.transact(()=>{this._updateLines(F.start.row,F.end.row+1,V.table.toLines(),E),this._selectFocus(F.start.row,V.table,C)}),D.smartCursor&&(this._scActive||(this._scActive=!0,this._scTablePos=F.start,m.column<0||V.table.getHeaderWidth()-1<m.column?this._scStartFocus=new l.Focus(m.row,0,0):this._scStartFocus=m),this._scLastFocus=C)})}insertRow(D){this.withCompletedTable(D,({range:F,lines:E,formulaLines:w,table:O,focus:R})=>{let C=R;C.row<=1&&(C=C.setRow(2)),C=C.setColumn(0);const h=new Array(O.getHeaderWidth()).fill(new I.TableCell("")),m=y.insertRow(O,C.row,new K.TableRow(h,"",""));this.formatAndApply(D,F,E,w,m,C)})}deleteRow(D){this.withCompletedTable(D,({range:F,lines:E,formulaLines:w,table:O,focus:R})=>{let C=R,h=O,m=!1;C.row!==1&&(h=y.deleteRow(h,C.row),m=!0,C.row>h.getHeight()-1&&(C=C.setRow(C.row===2?0:C.row-1))),this.formatAndApply(D,F,E,w,h,C,m)})}moveRow(D,F){this.withCompletedTable(F,({range:E,lines:w,formulaLines:O,table:R,focus:C})=>{let h=C,m=R;if(h.row>1){const M=Math.min(Math.max(h.row+D,2),m.getHeight()-1);m=y.moveRow(m,h.row,M),h=h.setRow(M)}this.formatAndApply(F,E,w,O,m,h)})}evaluateFormulas(D){return this.withCompletedTable(D,({range:F,lines:E,formulaLines:w,table:O,focus:R})=>{const C=O.applyFormulas(w);if(C.isErr())return C.error;this.formatAndApply(D,F,E,w,C.value,R,!1)})}sortRows(D,F){this.withCompletedTable(F,({range:E,lines:w,formulaLines:O,table:R,focus:C})=>{const h=R.getRows().slice(2),m=ye=>/^\s*[-+]?((\d+(\.\d+)?)|(\d+\.)|(\.\d+))([eE][-+]?\d+)?\s*$/.test(ye),M=h.map(ye=>{var Z;return(Z=ye.getCellAt(C.column))===null||Z===void 0?void 0:Z.content}).some(ye=>ye!==void 0&&ye!==""&&!m(ye));h.sort((ye,Z)=>{const fe=ye.getCellAt(C.column),ie=Z.getCellAt(C.column);if(fe===void 0||fe.content==="")return ie===void 0||ie.content===""?0:-1;if(ie===void 0||ie.content==="")return 1;const _e=M?fe.content.replace(/[*~_$]/g,""):parseFloat(fe.content),re=M?ie.content.replace(/[*~_$]/g,""):parseFloat(ie.content);return _e===re?0:_e===void 0?-1:re===void 0?1:_e<re?-1:1}),D===B.Descending&&h.reverse();const V=R.getRows().slice(0,2).concat(h),G=new k.Table(V),{table:ae,focus:ce}=this.formatAndApply(F,E,w,O,G,C,!0);this._moveToFocus(E.start.row,ae,ce)})}insertColumn(D){this.withCompletedTable(D,({range:F,lines:E,formulaLines:w,table:O,focus:R})=>{let C=R;C.row===1&&(C=C.setRow(0)),C.column<0&&(C=C.setColumn(0));const h=new Array(O.getHeight()-1).fill(new I.TableCell("")),m=y.insertColumn(O,C.column,h,D);this.formatAndApply(D,F,E,w,m,C)})}deleteColumn(D){this.withCompletedTable(D,({range:F,lines:E,formulaLines:w,table:O,focus:R})=>{let C=R;C.row===1&&(C=C.setRow(0));let h=O,m=!1;0<=C.column&&C.column<=h.getHeaderWidth()-1&&(h=y.deleteColumn(O,C.column,D),m=!0,C.column>h.getHeaderWidth()-1&&(C=C.setColumn(h.getHeaderWidth()-1))),this.formatAndApply(D,F,E,w,h,C,m)})}moveColumn(D,F){this.withCompletedTable(F,({range:E,lines:w,formulaLines:O,table:R,focus:C})=>{let h=C,m=R;if(0<=h.column&&h.column<=m.getHeaderWidth()-1){const M=Math.min(Math.max(h.column+D,0),m.getHeaderWidth()-1);m=y.moveColumn(m,h.column,M),h=h.setColumn(M)}this.formatAndApply(F,E,w,O,m,h)})}formatAll(D){this._textEditor.transact(()=>{const F=f._createIsTableRowRegex(D.leftMarginChars);let E=this._textEditor.getCursorPosition(),w=[],O,R=this._textEditor.getLastRow();for(let C=0;C<=R;C++){const h=this._textEditor.getLine(C);if(this._textEditor.acceptsTableEdit(C)&&F.test(h))w.push(h),O===void 0&&(O=C);else if(O!==void 0){const m=C-1,M=new _.Range(new b.Point(O,0),new b.Point(m,w[w.length-1].length)),V=v.readTable(w,D),G=V.focusOfPosition(E,O);let ae;if(G!==void 0){let ce=G;const ye=y.completeTable(V,D);ye.delimiterInserted&&ce.row>0&&(ce=ce.setRow(ce.row+1));const Z=y.formatTable(ye.table,D);ce=ce.setOffset(f._computeNewOffset(ce,ye.table,Z,!1));const fe=Z.table.toLines();this._updateLines(M.start.row,M.end.row+1,fe,w),ae=fe.length-w.length,E=Z.table.positionOfFocus(ce,O)}else{const ce=y.completeTable(V,D),Z=y.formatTable(ce.table,D).table.toLines();this._updateLines(M.start.row,M.end.row+1,Z,w),ae=Z.length-w.length,E.row>m&&(E=new b.Point(E.row+ae,E.column))}w=[],O=void 0,R+=ae,C+=ae}}if(O!==void 0){const C=R,h=new _.Range(new b.Point(O,0),new b.Point(C,w[w.length-1].length)),m=v.readTable(w,D);let V=m.focusOfPosition(E,O);const G=y.completeTable(m,D);G.delimiterInserted&&V.row>0&&(V=V.setRow(V.row+1));const ae=y.formatTable(G.table,D);V=V.setOffset(f._computeNewOffset(V,G.table,ae,!1));const ce=ae.table.toLines();this._updateLines(h.start.row,h.end.row+1,ce,w),E=ae.table.positionOfFocus(V,O)}this._textEditor.setCursorPosition(E)})}exportTable(D,F){return this.withCompletedTable(F,({range:E,lines:w,formulaLines:O,table:R,focus:C})=>{const h=R.getRows();return h.length>0&&!D&&h.splice(0,2),h.map(m=>m.getCells().map(M=>M.content))})}exportCSV(D,F){const E=this.exportTable(D,F);return E?E.map(w=>w.join("	")).join(`
`):void 0}withCompletedTable(D,F){return this._withTable(D,E=>{let w=E.focus;const O=y.completeTable(E.table,D);O.delimiterInserted&&w.row>0&&(w=w.setRow(w.row+1));const R=y.formatTable(O.table,D);return w=w.setOffset(f._computeNewOffset(w,O.table,R,!1)),E.table=R.table,E.focus=w,F(E)})}formatAndApply(D,F,E,w,O,R,C=!1){const h=y.formatTable(O,D);return R=R.setOffset(f._computeNewOffset(R,O,h,C)),this._textEditor.transact(()=>{this._updateLines(F.start.row,F.end.row+1,h.table.toLines(),E),C?this._selectFocus(F.start.row,h.table,R):this._moveToFocus(F.start.row,h.table,R)}),this.resetSmartCursor(),{range:F,lines:E,formulaLines:w,table:h.table,focus:R}}}f.TableEditor=$})(tableEditor);(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.SortOrder=f.TableEditor=f.optionsWithDefaults=f.defaultOptions=f.ITextEditor=f.shortestEditScript=f.applyEditScript=f.Delete=f.Insert=f.moveColumn=f.deleteColumn=f.insertColumn=f.moveRow=f.deleteRow=f.insertRow=f.alterAlignment=f.formatTable=f.completeTable=f.FormatType=f.readTable=f.Table=f.TableRow=f.TableCell=f.HeaderAlignment=f.DefaultAlignment=f.Alignment=f.Focus=f.Range=f.Point=void 0;var d=point;Object.defineProperty(f,"Point",{enumerable:!0,get:function(){return d.Point}});var l=range$1;Object.defineProperty(f,"Range",{enumerable:!0,get:function(){return l.Range}});var y=focus;Object.defineProperty(f,"Focus",{enumerable:!0,get:function(){return y.Focus}});var v=alignment;Object.defineProperty(f,"Alignment",{enumerable:!0,get:function(){return v.Alignment}}),Object.defineProperty(f,"DefaultAlignment",{enumerable:!0,get:function(){return v.DefaultAlignment}}),Object.defineProperty(f,"HeaderAlignment",{enumerable:!0,get:function(){return v.HeaderAlignment}});var b=tableCell;Object.defineProperty(f,"TableCell",{enumerable:!0,get:function(){return b.TableCell}});var _=tableRow;Object.defineProperty(f,"TableRow",{enumerable:!0,get:function(){return _.TableRow}});var k=table;Object.defineProperty(f,"Table",{enumerable:!0,get:function(){return k.Table}});var I=parser;Object.defineProperty(f,"readTable",{enumerable:!0,get:function(){return I.readTable}});var K=formatter;Object.defineProperty(f,"FormatType",{enumerable:!0,get:function(){return K.FormatType}}),Object.defineProperty(f,"completeTable",{enumerable:!0,get:function(){return K.completeTable}}),Object.defineProperty(f,"formatTable",{enumerable:!0,get:function(){return K.formatTable}}),Object.defineProperty(f,"alterAlignment",{enumerable:!0,get:function(){return K.alterAlignment}}),Object.defineProperty(f,"insertRow",{enumerable:!0,get:function(){return K.insertRow}}),Object.defineProperty(f,"deleteRow",{enumerable:!0,get:function(){return K.deleteRow}}),Object.defineProperty(f,"moveRow",{enumerable:!0,get:function(){return K.moveRow}}),Object.defineProperty(f,"insertColumn",{enumerable:!0,get:function(){return K.insertColumn}}),Object.defineProperty(f,"deleteColumn",{enumerable:!0,get:function(){return K.deleteColumn}}),Object.defineProperty(f,"moveColumn",{enumerable:!0,get:function(){return K.moveColumn}});var B=editScript;Object.defineProperty(f,"Insert",{enumerable:!0,get:function(){return B.Insert}}),Object.defineProperty(f,"Delete",{enumerable:!0,get:function(){return B.Delete}}),Object.defineProperty(f,"applyEditScript",{enumerable:!0,get:function(){return B.applyEditScript}}),Object.defineProperty(f,"shortestEditScript",{enumerable:!0,get:function(){return B.shortestEditScript}});var z=textEditor;Object.defineProperty(f,"ITextEditor",{enumerable:!0,get:function(){return z.ITextEditor}});var P=options;Object.defineProperty(f,"defaultOptions",{enumerable:!0,get:function(){return P.defaultOptions}}),Object.defineProperty(f,"optionsWithDefaults",{enumerable:!0,get:function(){return P.optionsWithDefaults}});var H=tableEditor;Object.defineProperty(f,"TableEditor",{enumerable:!0,get:function(){return H.TableEditor}}),Object.defineProperty(f,"SortOrder",{enumerable:!0,get:function(){return H.SortOrder}})})(lib$1);const codemirror="",dialog$1="",base2toneSeaDark="";var xml={exports:{}},hasRequiredXml;function requireXml(){return hasRequiredXml||(hasRequiredXml=1,function(f,d){(function(l){l(codemirror$1.exports)})(function(l){var y={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},v={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};l.defineMode("xml",function(b,_){var k=b.indentUnit,I={},K=_.htmlMode?y:v;for(var B in K)I[B]=K[B];for(var B in _)I[B]=_[B];var z,P;function H(Z,fe){function ie(se){return fe.tokenize=se,se(Z,fe)}var _e=Z.next();if(_e=="<")return Z.eat("!")?Z.eat("[")?Z.match("CDATA[")?ie(D("atom","]]>")):null:Z.match("--")?ie(D("comment","-->")):Z.match("DOCTYPE",!0,!0)?(Z.eatWhile(/[\w\._\-]/),ie(F(1))):null:Z.eat("?")?(Z.eatWhile(/[\w\._\-]/),fe.tokenize=D("meta","?>"),"meta"):(z=Z.eat("/")?"closeTag":"openTag",fe.tokenize=$,"tag bracket");if(_e=="&"){var re;return Z.eat("#")?Z.eat("x")?re=Z.eatWhile(/[a-fA-F\d]/)&&Z.eat(";"):re=Z.eatWhile(/[\d]/)&&Z.eat(";"):re=Z.eatWhile(/[\w\.\-:]/)&&Z.eat(";"),re?"atom":"error"}else return Z.eatWhile(/[^&<]/),null}H.isInText=!0;function $(Z,fe){var ie=Z.next();if(ie==">"||ie=="/"&&Z.eat(">"))return fe.tokenize=H,z=ie==">"?"endTag":"selfcloseTag","tag bracket";if(ie=="=")return z="equals",null;if(ie=="<"){fe.tokenize=H,fe.state=C,fe.tagName=fe.tagStart=null;var _e=fe.tokenize(Z,fe);return _e?_e+" tag error":"tag error"}else return/[\'\"]/.test(ie)?(fe.tokenize=Q(ie),fe.stringStartCol=Z.column(),fe.tokenize(Z,fe)):(Z.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Q(Z){var fe=function(ie,_e){for(;!ie.eol();)if(ie.next()==Z){_e.tokenize=$;break}return"string"};return fe.isInAttribute=!0,fe}function D(Z,fe){return function(ie,_e){for(;!ie.eol();){if(ie.match(fe)){_e.tokenize=H;break}ie.next()}return Z}}function F(Z){return function(fe,ie){for(var _e;(_e=fe.next())!=null;){if(_e=="<")return ie.tokenize=F(Z+1),ie.tokenize(fe,ie);if(_e==">")if(Z==1){ie.tokenize=H;break}else return ie.tokenize=F(Z-1),ie.tokenize(fe,ie)}return"meta"}}function E(Z){return Z&&Z.toLowerCase()}function w(Z,fe,ie){this.prev=Z.context,this.tagName=fe||"",this.indent=Z.indented,this.startOfLine=ie,(I.doNotIndent.hasOwnProperty(fe)||Z.context&&Z.context.noIndent)&&(this.noIndent=!0)}function O(Z){Z.context&&(Z.context=Z.context.prev)}function R(Z,fe){for(var ie;;){if(!Z.context||(ie=Z.context.tagName,!I.contextGrabbers.hasOwnProperty(E(ie))||!I.contextGrabbers[E(ie)].hasOwnProperty(E(fe))))return;O(Z)}}function C(Z,fe,ie){return Z=="openTag"?(ie.tagStart=fe.column(),h):Z=="closeTag"?m:C}function h(Z,fe,ie){return Z=="word"?(ie.tagName=fe.current(),P="tag",G):I.allowMissingTagName&&Z=="endTag"?(P="tag bracket",G(Z,fe,ie)):(P="error",h)}function m(Z,fe,ie){if(Z=="word"){var _e=fe.current();return ie.context&&ie.context.tagName!=_e&&I.implicitlyClosed.hasOwnProperty(E(ie.context.tagName))&&O(ie),ie.context&&ie.context.tagName==_e||I.matchClosing===!1?(P="tag",M):(P="tag error",V)}else return I.allowMissingTagName&&Z=="endTag"?(P="tag bracket",M(Z,fe,ie)):(P="error",V)}function M(Z,fe,ie){return Z!="endTag"?(P="error",M):(O(ie),C)}function V(Z,fe,ie){return P="error",M(Z,fe,ie)}function G(Z,fe,ie){if(Z=="word")return P="attribute",ae;if(Z=="endTag"||Z=="selfcloseTag"){var _e=ie.tagName,re=ie.tagStart;return ie.tagName=ie.tagStart=null,Z=="selfcloseTag"||I.autoSelfClosers.hasOwnProperty(E(_e))?R(ie,_e):(R(ie,_e),ie.context=new w(ie,_e,re==ie.indented)),C}return P="error",G}function ae(Z,fe,ie){return Z=="equals"?ce:(I.allowMissing||(P="error"),G(Z,fe,ie))}function ce(Z,fe,ie){return Z=="string"?ye:Z=="word"&&I.allowUnquoted?(P="string",G):(P="error",G(Z,fe,ie))}function ye(Z,fe,ie){return Z=="string"?ye:G(Z,fe,ie)}return{startState:function(Z){var fe={tokenize:H,state:C,indented:Z||0,tagName:null,tagStart:null,context:null};return Z!=null&&(fe.baseIndent=Z),fe},token:function(Z,fe){if(!fe.tagName&&Z.sol()&&(fe.indented=Z.indentation()),Z.eatSpace())return null;z=null;var ie=fe.tokenize(Z,fe);return(ie||z)&&ie!="comment"&&(P=null,fe.state=fe.state(z||ie,Z,fe),P&&(ie=P=="error"?ie+" error":P)),ie},indent:function(Z,fe,ie){var _e=Z.context;if(Z.tokenize.isInAttribute)return Z.tagStart==Z.indented?Z.stringStartCol+1:Z.indented+k;if(_e&&_e.noIndent)return l.Pass;if(Z.tokenize!=$&&Z.tokenize!=H)return ie?ie.match(/^(\s*)/)[0].length:0;if(Z.tagName)return I.multilineTagIndentPastTag!==!1?Z.tagStart+Z.tagName.length+2:Z.tagStart+k*(I.multilineTagIndentFactor||1);if(I.alignCDATA&&/<!\[CDATA\[/.test(fe))return 0;var re=fe&&/^<(\/)?([\w_:\.-]*)/.exec(fe);if(re&&re[1])for(;_e;)if(_e.tagName==re[2]){_e=_e.prev;break}else if(I.implicitlyClosed.hasOwnProperty(E(_e.tagName)))_e=_e.prev;else break;else if(re)for(;_e;){var se=I.contextGrabbers[E(_e.tagName)];if(se&&se.hasOwnProperty(E(re[2])))_e=_e.prev;else break}for(;_e&&_e.prev&&!_e.startOfLine;)_e=_e.prev;return _e?_e.indent+k:Z.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:I.htmlMode?"html":"xml",helperType:I.htmlMode?"html":"xml",skipAttribute:function(Z){Z.state==ce&&(Z.state=G)},xmlCurrentTag:function(Z){return Z.tagName?{name:Z.tagName,close:Z.type=="closeTag"}:null},xmlCurrentContext:function(Z){for(var fe=[],ie=Z.context;ie;ie=ie.prev)fe.push(ie.tagName);return fe.reverse()}}}),l.defineMIME("text/xml","xml"),l.defineMIME("application/xml","xml"),l.mimeModes.hasOwnProperty("text/html")||l.defineMIME("text/html",{name:"xml",htmlMode:!0})})}()),xml.exports}var meta={exports:{}},hasRequiredMeta;function requireMeta(){return hasRequiredMeta||(hasRequiredMeta=1,function(f,d){(function(l){l(codemirror$1.exports)})(function(l){l.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var y=0;y<l.modeInfo.length;y++){var v=l.modeInfo[y];v.mimes&&(v.mime=v.mimes[0])}l.findModeByMIME=function(b){b=b.toLowerCase();for(var _=0;_<l.modeInfo.length;_++){var k=l.modeInfo[_];if(k.mime==b)return k;if(k.mimes){for(var I=0;I<k.mimes.length;I++)if(k.mimes[I]==b)return k}}if(/\+xml$/.test(b))return l.findModeByMIME("application/xml");if(/\+json$/.test(b))return l.findModeByMIME("application/json")},l.findModeByExtension=function(b){b=b.toLowerCase();for(var _=0;_<l.modeInfo.length;_++){var k=l.modeInfo[_];if(k.ext){for(var I=0;I<k.ext.length;I++)if(k.ext[I]==b)return k}}},l.findModeByFileName=function(b){for(var _=0;_<l.modeInfo.length;_++){var k=l.modeInfo[_];if(k.file&&k.file.test(b))return k}var I=b.lastIndexOf("."),K=I>-1&&b.substring(I+1,b.length);if(K)return l.findModeByExtension(K)},l.findModeByName=function(b){b=b.toLowerCase();for(var _=0;_<l.modeInfo.length;_++){var k=l.modeInfo[_];if(k.name.toLowerCase()==b)return k;if(k.alias){for(var I=0;I<k.alias.length;I++)if(k.alias[I].toLowerCase()==b)return k}}}})}()),meta.exports}(function(f,d){(function(l){l(codemirror$1.exports,requireXml(),requireMeta())})(function(l){l.defineMode("markdown",function(y,v){var b=l.getMode(y,"text/html"),_=b.name=="null";function k(U){if(l.findModeByName){var A=l.findModeByName(U);A&&(U=A.mime||A.mimes[0])}var we=l.getMode(y,U);return we.name=="null"?null:we}v.highlightFormatting===void 0&&(v.highlightFormatting=!1),v.maxBlockquoteDepth===void 0&&(v.maxBlockquoteDepth=0),v.taskLists===void 0&&(v.taskLists=!1),v.strikethrough===void 0&&(v.strikethrough=!1),v.emoji===void 0&&(v.emoji=!1),v.fencedCodeBlockHighlighting===void 0&&(v.fencedCodeBlockHighlighting=!0),v.fencedCodeBlockDefaultMode===void 0&&(v.fencedCodeBlockDefaultMode="text/plain"),v.xml===void 0&&(v.xml=!0),v.tokenTypeOverrides===void 0&&(v.tokenTypeOverrides={});var I={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var K in I)I.hasOwnProperty(K)&&v.tokenTypeOverrides[K]&&(I[K]=v.tokenTypeOverrides[K]);var B=/^([*\-_])(?:\s*\1){2,}\s*$/,z=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,P=/^\[(x| )\](?=\s)/i,H=v.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,$=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Q=/^[^#!\[\]*_\\<>` "'(~:]+/,D=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,F=/^\s*\[[^\]]+?\]:.*$/,E=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,w="    ";function O(U,A,we){return A.f=A.inline=we,we(U,A)}function R(U,A,we){return A.f=A.block=we,we(U,A)}function C(U){return!U||!/\S/.test(U.string)}function h(U){if(U.linkTitle=!1,U.linkHref=!1,U.linkText=!1,U.em=!1,U.strong=!1,U.strikethrough=!1,U.quote=0,U.indentedCode=!1,U.f==M){var A=_;if(!A){var we=l.innerMode(b,U.htmlState);A=we.mode.name=="xml"&&we.state.tagStart===null&&!we.state.context&&we.state.tokenize.isInText}A&&(U.f=ce,U.block=m,U.htmlState=null)}return U.trailingSpace=0,U.trailingSpaceNewLine=!1,U.prevLine=U.thisLine,U.thisLine={stream:null},null}function m(U,A){var we=U.column()===A.indentation,ke=C(A.prevLine.stream),Ne=A.indentedCode,Ve=A.prevLine.hr,it=A.list!==!1,At=(A.listStack[A.listStack.length-1]||0)+3;A.indentedCode=!1;var me=A.indentation;if(A.indentationDiff===null&&(A.indentationDiff=A.indentation,it)){for(A.list=null;me<A.listStack[A.listStack.length-1];)A.listStack.pop(),A.listStack.length?A.indentation=A.listStack[A.listStack.length-1]:A.list=!1;A.list!==!1&&(A.indentationDiff=me-A.listStack[A.listStack.length-1])}var Ze=!ke&&!Ve&&!A.prevLine.header&&(!it||!Ne)&&!A.prevLine.fencedCodeEnd,Ie=(A.list===!1||Ve||ke)&&A.indentation<=At&&U.match(B),Me=null;if(A.indentationDiff>=4&&(Ne||A.prevLine.fencedCodeEnd||A.prevLine.header||ke))return U.skipToEnd(),A.indentedCode=!0,I.code;if(U.eatSpace())return null;if(we&&A.indentation<=At&&(Me=U.match(H))&&Me[1].length<=6)return A.quote=0,A.header=Me[1].length,A.thisLine.header=!0,v.highlightFormatting&&(A.formatting="header"),A.f=A.inline,G(A);if(A.indentation<=At&&U.eat(">"))return A.quote=we?1:A.quote+1,v.highlightFormatting&&(A.formatting="quote"),U.eatSpace(),G(A);if(!Ie&&!A.setext&&we&&A.indentation<=At&&(Me=U.match(z))){var vt=Me[1]?"ol":"ul";return A.indentation=me+U.current().length,A.list=!0,A.quote=0,A.listStack.push(A.indentation),A.em=!1,A.strong=!1,A.code=!1,A.strikethrough=!1,v.taskLists&&U.match(P,!1)&&(A.taskList=!0),A.f=A.inline,v.highlightFormatting&&(A.formatting=["list","list-"+vt]),G(A)}else{if(we&&A.indentation<=At&&(Me=U.match(D,!0)))return A.quote=0,A.fencedEndRE=new RegExp(Me[1]+"+ *$"),A.localMode=v.fencedCodeBlockHighlighting&&k(Me[2]||v.fencedCodeBlockDefaultMode),A.localMode&&(A.localState=l.startState(A.localMode)),A.f=A.block=V,v.highlightFormatting&&(A.formatting="code-block"),A.code=-1,G(A);if(A.setext||(!Ze||!it)&&!A.quote&&A.list===!1&&!A.code&&!Ie&&!F.test(U.string)&&(Me=U.lookAhead(1))&&(Me=Me.match($)))return A.setext?(A.header=A.setext,A.setext=0,U.skipToEnd(),v.highlightFormatting&&(A.formatting="header")):(A.header=Me[0].charAt(0)=="="?1:2,A.setext=A.header),A.thisLine.header=!0,A.f=A.inline,G(A);if(Ie)return U.skipToEnd(),A.hr=!0,A.thisLine.hr=!0,I.hr;if(U.peek()==="[")return O(U,A,_e)}return O(U,A,A.inline)}function M(U,A){var we=b.token(U,A.htmlState);if(!_){var ke=l.innerMode(b,A.htmlState);(ke.mode.name=="xml"&&ke.state.tagStart===null&&!ke.state.context&&ke.state.tokenize.isInText||A.md_inside&&U.current().indexOf(">")>-1)&&(A.f=ce,A.block=m,A.htmlState=null)}return we}function V(U,A){var we=A.listStack[A.listStack.length-1]||0,ke=A.indentation<we,Ne=we+3;if(A.fencedEndRE&&A.indentation<=Ne&&(ke||U.match(A.fencedEndRE))){v.highlightFormatting&&(A.formatting="code-block");var Ve;return ke||(Ve=G(A)),A.localMode=A.localState=null,A.block=m,A.f=ce,A.fencedEndRE=null,A.code=0,A.thisLine.fencedCodeEnd=!0,ke?R(U,A,A.block):Ve}else return A.localMode?A.localMode.token(U,A.localState):(U.skipToEnd(),I.code)}function G(U){var A=[];if(U.formatting){A.push(I.formatting),typeof U.formatting=="string"&&(U.formatting=[U.formatting]);for(var we=0;we<U.formatting.length;we++)A.push(I.formatting+"-"+U.formatting[we]),U.formatting[we]==="header"&&A.push(I.formatting+"-"+U.formatting[we]+"-"+U.header),U.formatting[we]==="quote"&&(!v.maxBlockquoteDepth||v.maxBlockquoteDepth>=U.quote?A.push(I.formatting+"-"+U.formatting[we]+"-"+U.quote):A.push("error"))}if(U.taskOpen)return A.push("meta"),A.length?A.join(" "):null;if(U.taskClosed)return A.push("property"),A.length?A.join(" "):null;if(U.linkHref?A.push(I.linkHref,"url"):(U.strong&&A.push(I.strong),U.em&&A.push(I.em),U.strikethrough&&A.push(I.strikethrough),U.emoji&&A.push(I.emoji),U.linkText&&A.push(I.linkText),U.code&&A.push(I.code),U.image&&A.push(I.image),U.imageAltText&&A.push(I.imageAltText,"link"),U.imageMarker&&A.push(I.imageMarker)),U.header&&A.push(I.header,I.header+"-"+U.header),U.quote&&(A.push(I.quote),!v.maxBlockquoteDepth||v.maxBlockquoteDepth>=U.quote?A.push(I.quote+"-"+U.quote):A.push(I.quote+"-"+v.maxBlockquoteDepth)),U.list!==!1){var ke=(U.listStack.length-1)%3;ke?ke===1?A.push(I.list2):A.push(I.list3):A.push(I.list1)}return U.trailingSpaceNewLine?A.push("trailing-space-new-line"):U.trailingSpace&&A.push("trailing-space-"+(U.trailingSpace%2?"a":"b")),A.length?A.join(" "):null}function ae(U,A){if(U.match(Q,!0))return G(A)}function ce(U,A){var we=A.text(U,A);if(typeof we<"u")return we;if(A.list)return A.list=null,G(A);if(A.taskList){var ke=U.match(P,!0)[1]===" ";return ke?A.taskOpen=!0:A.taskClosed=!0,v.highlightFormatting&&(A.formatting="task"),A.taskList=!1,G(A)}if(A.taskOpen=!1,A.taskClosed=!1,A.header&&U.match(/^#+$/,!0))return v.highlightFormatting&&(A.formatting="header"),G(A);var Ne=U.next();if(A.linkTitle){A.linkTitle=!1;var Ve=Ne;Ne==="("&&(Ve=")"),Ve=(Ve+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var it="^\\s*(?:[^"+Ve+"\\\\]+|\\\\\\\\|\\\\.)"+Ve;if(U.match(new RegExp(it),!0))return I.linkHref}if(Ne==="`"){var At=A.formatting;v.highlightFormatting&&(A.formatting="code"),U.eatWhile("`");var me=U.current().length;if(A.code==0&&(!A.quote||me==1))return A.code=me,G(A);if(me==A.code){var Ze=G(A);return A.code=0,Ze}else return A.formatting=At,G(A)}else if(A.code)return G(A);if(Ne==="\\"&&(U.next(),v.highlightFormatting)){var Ie=G(A),Me=I.formatting+"-escape";return Ie?Ie+" "+Me:Me}if(Ne==="!"&&U.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return A.imageMarker=!0,A.image=!0,v.highlightFormatting&&(A.formatting="image"),G(A);if(Ne==="["&&A.imageMarker&&U.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return A.imageMarker=!1,A.imageAltText=!0,v.highlightFormatting&&(A.formatting="image"),G(A);if(Ne==="]"&&A.imageAltText){v.highlightFormatting&&(A.formatting="image");var Ie=G(A);return A.imageAltText=!1,A.image=!1,A.inline=A.f=Z,Ie}if(Ne==="["&&!A.image)return A.linkText&&U.match(/^.*?\]/)||(A.linkText=!0,v.highlightFormatting&&(A.formatting="link")),G(A);if(Ne==="]"&&A.linkText){v.highlightFormatting&&(A.formatting="link");var Ie=G(A);return A.linkText=!1,A.inline=A.f=U.match(/\(.*?\)| ?\[.*?\]/,!1)?Z:ce,Ie}if(Ne==="<"&&U.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){A.f=A.inline=ye,v.highlightFormatting&&(A.formatting="link");var Ie=G(A);return Ie?Ie+=" ":Ie="",Ie+I.linkInline}if(Ne==="<"&&U.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){A.f=A.inline=ye,v.highlightFormatting&&(A.formatting="link");var Ie=G(A);return Ie?Ie+=" ":Ie="",Ie+I.linkEmail}if(v.xml&&Ne==="<"&&U.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var vt=U.string.indexOf(">",U.pos);if(vt!=-1){var pt=U.string.substring(U.start,vt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(pt)&&(A.md_inside=!0)}return U.backUp(1),A.htmlState=l.startState(b),R(U,A,M)}if(v.xml&&Ne==="<"&&U.match(/^\/\w*?>/))return A.md_inside=!1,"tag";if(Ne==="*"||Ne==="_"){for(var et=1,Nt=U.pos==1?" ":U.string.charAt(U.pos-2);et<3&&U.eat(Ne);)et++;var qt=U.peek()||" ",Rt=!/\s/.test(qt)&&(!E.test(qt)||/\s/.test(Nt)||E.test(Nt)),ct=!/\s/.test(Nt)&&(!E.test(Nt)||/\s/.test(qt)||E.test(qt)),Ct=null,zt=null;if(et%2&&(!A.em&&Rt&&(Ne==="*"||!ct||E.test(Nt))?Ct=!0:A.em==Ne&&ct&&(Ne==="*"||!Rt||E.test(qt))&&(Ct=!1)),et>1&&(!A.strong&&Rt&&(Ne==="*"||!ct||E.test(Nt))?zt=!0:A.strong==Ne&&ct&&(Ne==="*"||!Rt||E.test(qt))&&(zt=!1)),zt!=null||Ct!=null){v.highlightFormatting&&(A.formatting=Ct==null?"strong":zt==null?"em":"strong em"),Ct===!0&&(A.em=Ne),zt===!0&&(A.strong=Ne);var Ze=G(A);return Ct===!1&&(A.em=!1),zt===!1&&(A.strong=!1),Ze}}else if(Ne===" "&&(U.eat("*")||U.eat("_"))){if(U.peek()===" ")return G(A);U.backUp(1)}if(v.strikethrough){if(Ne==="~"&&U.eatWhile(Ne)){if(A.strikethrough){v.highlightFormatting&&(A.formatting="strikethrough");var Ze=G(A);return A.strikethrough=!1,Ze}else if(U.match(/^[^\s]/,!1))return A.strikethrough=!0,v.highlightFormatting&&(A.formatting="strikethrough"),G(A)}else if(Ne===" "&&U.match("~~",!0)){if(U.peek()===" ")return G(A);U.backUp(2)}}if(v.emoji&&Ne===":"&&U.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){A.emoji=!0,v.highlightFormatting&&(A.formatting="emoji");var lr=G(A);return A.emoji=!1,lr}return Ne===" "&&(U.match(/^ +$/,!1)?A.trailingSpace++:A.trailingSpace&&(A.trailingSpaceNewLine=!0)),G(A)}function ye(U,A){var we=U.next();if(we===">"){A.f=A.inline=ce,v.highlightFormatting&&(A.formatting="link");var ke=G(A);return ke?ke+=" ":ke="",ke+I.linkInline}return U.match(/^[^>]+/,!0),I.linkInline}function Z(U,A){if(U.eatSpace())return null;var we=U.next();return we==="("||we==="["?(A.f=A.inline=ie(we==="("?")":"]"),v.highlightFormatting&&(A.formatting="link-string"),A.linkHref=!0,G(A)):"error"}var fe={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function ie(U){return function(A,we){var ke=A.next();if(ke===U){we.f=we.inline=ce,v.highlightFormatting&&(we.formatting="link-string");var Ne=G(we);return we.linkHref=!1,Ne}return A.match(fe[U]),we.linkHref=!0,G(we)}}function _e(U,A){return U.match(/^([^\]\\]|\\.)*\]:/,!1)?(A.f=re,U.next(),v.highlightFormatting&&(A.formatting="link"),A.linkText=!0,G(A)):O(U,A,ce)}function re(U,A){if(U.match("]:",!0)){A.f=A.inline=se,v.highlightFormatting&&(A.formatting="link");var we=G(A);return A.linkText=!1,we}return U.match(/^([^\]\\]|\\.)+/,!0),I.linkText}function se(U,A){return U.eatSpace()?null:(U.match(/^[^\s]+/,!0),U.peek()===void 0?A.linkTitle=!0:U.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),A.f=A.inline=ce,I.linkHref+" url")}var Te={startState:function(){return{f:m,prevLine:{stream:null},thisLine:{stream:null},block:m,htmlState:null,indentation:0,inline:ce,text:ae,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(U){return{f:U.f,prevLine:U.prevLine,thisLine:U.thisLine,block:U.block,htmlState:U.htmlState&&l.copyState(b,U.htmlState),indentation:U.indentation,localMode:U.localMode,localState:U.localMode?l.copyState(U.localMode,U.localState):null,inline:U.inline,text:U.text,formatting:!1,linkText:U.linkText,linkTitle:U.linkTitle,linkHref:U.linkHref,code:U.code,em:U.em,strong:U.strong,strikethrough:U.strikethrough,emoji:U.emoji,header:U.header,setext:U.setext,hr:U.hr,taskList:U.taskList,list:U.list,listStack:U.listStack.slice(0),quote:U.quote,indentedCode:U.indentedCode,trailingSpace:U.trailingSpace,trailingSpaceNewLine:U.trailingSpaceNewLine,md_inside:U.md_inside,fencedEndRE:U.fencedEndRE}},token:function(U,A){if(A.formatting=!1,U!=A.thisLine.stream){if(A.header=0,A.hr=!1,U.match(/^\s*$/,!0))return h(A),null;if(A.prevLine=A.thisLine,A.thisLine={stream:U},A.taskList=!1,A.trailingSpace=0,A.trailingSpaceNewLine=!1,!A.localState&&(A.f=A.block,A.f!=M)){var we=U.match(/^\s*/,!0)[0].replace(/\t/g,w).length;if(A.indentation=we,A.indentationDiff=null,we>0)return null}}return A.f(U,A)},innerMode:function(U){return U.block==M?{state:U.htmlState,mode:b}:U.localState?{state:U.localState,mode:U.localMode}:{state:U,mode:Te}},indent:function(U,A,we){return U.block==M&&b.indent?b.indent(U.htmlState,A,we):U.localState&&U.localMode.indent?U.localMode.indent(U.localState,A,we):l.Pass},blankLine:h,getType:G,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Te},"xml"),l.defineMIME("text/markdown","markdown"),l.defineMIME("text/x-markdown","markdown")})})();var dialog={exports:{}};(function(f,d){(function(l){l(codemirror$1.exports)})(function(l){function y(b,_,k){var I=b.getWrapperElement(),K;return K=I.appendChild(document.createElement("div")),k?K.className="CodeMirror-dialog CodeMirror-dialog-bottom":K.className="CodeMirror-dialog CodeMirror-dialog-top",typeof _=="string"?K.innerHTML=_:K.appendChild(_),l.addClass(I,"dialog-opened"),K}function v(b,_){b.state.currentNotificationClose&&b.state.currentNotificationClose(),b.state.currentNotificationClose=_}l.defineExtension("openDialog",function(b,_,k){k||(k={}),v(this,null);var I=y(this,b,k.bottom),K=!1,B=this;function z($){if(typeof $=="string")P.value=$;else{if(K)return;K=!0,l.rmClass(I.parentNode,"dialog-opened"),I.parentNode.removeChild(I),B.focus(),k.onClose&&k.onClose(I)}}var P=I.getElementsByTagName("input")[0],H;return P?(P.focus(),k.value&&(P.value=k.value,k.selectValueOnOpen!==!1&&P.select()),k.onInput&&l.on(P,"input",function($){k.onInput($,P.value,z)}),k.onKeyUp&&l.on(P,"keyup",function($){k.onKeyUp($,P.value,z)}),l.on(P,"keydown",function($){k&&k.onKeyDown&&k.onKeyDown($,P.value,z)||(($.keyCode==27||k.closeOnEnter!==!1&&$.keyCode==13)&&(P.blur(),l.e_stop($),z()),$.keyCode==13&&_(P.value,$))}),k.closeOnBlur!==!1&&l.on(I,"focusout",function($){$.relatedTarget!==null&&z()})):(H=I.getElementsByTagName("button")[0])&&(l.on(H,"click",function(){z(),B.focus()}),k.closeOnBlur!==!1&&l.on(H,"blur",z),H.focus()),z}),l.defineExtension("openConfirm",function(b,_,k){v(this,null);var I=y(this,b,k&&k.bottom),K=I.getElementsByTagName("button"),B=!1,z=this,P=1;function H(){B||(B=!0,l.rmClass(I.parentNode,"dialog-opened"),I.parentNode.removeChild(I),z.focus())}K[0].focus();for(var $=0;$<K.length;++$){var Q=K[$];(function(D){l.on(Q,"click",function(F){l.e_preventDefault(F),H(),D&&D(z)})})(_[$]),l.on(Q,"blur",function(){--P,setTimeout(function(){P<=0&&H()},200)}),l.on(Q,"focus",function(){++P})}}),l.defineExtension("openNotification",function(b,_){v(this,z);var k=y(this,b,_&&_.bottom),I=!1,K,B=_&&typeof _.duration<"u"?_.duration:5e3;function z(){I||(I=!0,clearTimeout(K),l.rmClass(k.parentNode,"dialog-opened"),k.parentNode.removeChild(k))}return l.on(k,"click",function(P){l.e_preventDefault(P),z()}),B&&(K=setTimeout(z,B)),z})})})();var searchcursor={exports:{}};(function(f,d){(function(l){l(codemirror$1.exports)})(function(l){var y=l.Pos;function v(E){var w=E.flags;return w??(E.ignoreCase?"i":"")+(E.global?"g":"")+(E.multiline?"m":"")}function b(E,w){for(var O=v(E),R=O,C=0;C<w.length;C++)R.indexOf(w.charAt(C))==-1&&(R+=w.charAt(C));return O==R?E:new RegExp(E.source,R)}function _(E){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(E.source)}function k(E,w,O){w=b(w,"g");for(var R=O.line,C=O.ch,h=E.lastLine();R<=h;R++,C=0){w.lastIndex=C;var m=E.getLine(R),M=w.exec(m);if(M)return{from:y(R,M.index),to:y(R,M.index+M[0].length),match:M}}}function I(E,w,O){if(!_(w))return k(E,w,O);w=b(w,"gm");for(var R,C=1,h=O.line,m=E.lastLine();h<=m;){for(var M=0;M<C&&!(h>m);M++){var V=E.getLine(h++);R=R==null?V:R+`
`+V}C=C*2,w.lastIndex=O.ch;var G=w.exec(R);if(G){var ae=R.slice(0,G.index).split(`
`),ce=G[0].split(`
`),ye=O.line+ae.length-1,Z=ae[ae.length-1].length;return{from:y(ye,Z),to:y(ye+ce.length-1,ce.length==1?Z+ce[0].length:ce[ce.length-1].length),match:G}}}}function K(E,w,O){for(var R,C=0;C<=E.length;){w.lastIndex=C;var h=w.exec(E);if(!h)break;var m=h.index+h[0].length;if(m>E.length-O)break;(!R||m>R.index+R[0].length)&&(R=h),C=h.index+1}return R}function B(E,w,O){w=b(w,"g");for(var R=O.line,C=O.ch,h=E.firstLine();R>=h;R--,C=-1){var m=E.getLine(R),M=K(m,w,C<0?0:m.length-C);if(M)return{from:y(R,M.index),to:y(R,M.index+M[0].length),match:M}}}function z(E,w,O){if(!_(w))return B(E,w,O);w=b(w,"gm");for(var R,C=1,h=E.getLine(O.line).length-O.ch,m=O.line,M=E.firstLine();m>=M;){for(var V=0;V<C&&m>=M;V++){var G=E.getLine(m--);R=R==null?G:G+`
`+R}C*=2;var ae=K(R,w,h);if(ae){var ce=R.slice(0,ae.index).split(`
`),ye=ae[0].split(`
`),Z=m+ce.length,fe=ce[ce.length-1].length;return{from:y(Z,fe),to:y(Z+ye.length-1,ye.length==1?fe+ye[0].length:ye[ye.length-1].length),match:ae}}}}var P,H;String.prototype.normalize?(P=function(E){return E.normalize("NFD").toLowerCase()},H=function(E){return E.normalize("NFD")}):(P=function(E){return E.toLowerCase()},H=function(E){return E});function $(E,w,O,R){if(E.length==w.length)return O;for(var C=0,h=O+Math.max(0,E.length-w.length);;){if(C==h)return C;var m=C+h>>1,M=R(E.slice(0,m)).length;if(M==O)return m;M>O?h=m:C=m+1}}function Q(E,w,O,R){if(!w.length)return null;var C=R?P:H,h=C(w).split(/\r|\n\r?/);e:for(var m=O.line,M=O.ch,V=E.lastLine()+1-h.length;m<=V;m++,M=0){var G=E.getLine(m).slice(M),ae=C(G);if(h.length==1){var ce=ae.indexOf(h[0]);if(ce==-1)continue e;var O=$(G,ae,ce,C)+M;return{from:y(m,$(G,ae,ce,C)+M),to:y(m,$(G,ae,ce+h[0].length,C)+M)}}else{var ye=ae.length-h[0].length;if(ae.slice(ye)!=h[0])continue e;for(var Z=1;Z<h.length-1;Z++)if(C(E.getLine(m+Z))!=h[Z])continue e;var fe=E.getLine(m+h.length-1),ie=C(fe),_e=h[h.length-1];if(ie.slice(0,_e.length)!=_e)continue e;return{from:y(m,$(G,ae,ye,C)+M),to:y(m+h.length-1,$(fe,ie,_e.length,C))}}}}function D(E,w,O,R){if(!w.length)return null;var C=R?P:H,h=C(w).split(/\r|\n\r?/);e:for(var m=O.line,M=O.ch,V=E.firstLine()-1+h.length;m>=V;m--,M=-1){var G=E.getLine(m);M>-1&&(G=G.slice(0,M));var ae=C(G);if(h.length==1){var ce=ae.lastIndexOf(h[0]);if(ce==-1)continue e;return{from:y(m,$(G,ae,ce,C)),to:y(m,$(G,ae,ce+h[0].length,C))}}else{var ye=h[h.length-1];if(ae.slice(0,ye.length)!=ye)continue e;for(var Z=1,O=m-h.length+1;Z<h.length-1;Z++)if(C(E.getLine(O+Z))!=h[Z])continue e;var fe=E.getLine(m+1-h.length),ie=C(fe);if(ie.slice(ie.length-h[0].length)!=h[0])continue e;return{from:y(m+1-h.length,$(fe,ie,fe.length-h[0].length,C)),to:y(m,$(G,ae,ye.length,C))}}}}function F(E,w,O,R){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=E,O=O?E.clipPos(O):y(0,0),this.pos={from:O,to:O};var C;typeof R=="object"?C=R.caseFold:(C=R,R=null),typeof w=="string"?(C==null&&(C=!1),this.matches=function(h,m){return(h?D:Q)(E,w,m,C)}):(w=b(w,"gm"),!R||R.multiline!==!1?this.matches=function(h,m){return(h?z:I)(E,w,m)}:this.matches=function(h,m){return(h?B:k)(E,w,m)})}F.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(E){var w=this.doc.clipPos(E?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(w=y(w.line,w.ch),E?(w.ch--,w.ch<0&&(w.line--,w.ch=(this.doc.getLine(w.line)||"").length)):(w.ch++,w.ch>(this.doc.getLine(w.line)||"").length&&(w.ch=0,w.line++)),l.cmpPos(w,this.doc.clipPos(w))!=0))return this.atOccurrence=!1;var O=this.matches(E,w);if(this.afterEmptyMatch=O&&l.cmpPos(O.from,O.to)==0,O)return this.pos=O,this.atOccurrence=!0,this.pos.match||!0;var R=y(E?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:R,to:R},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(E,w){if(!!this.atOccurrence){var O=l.splitLines(E);this.doc.replaceRange(O,this.pos.from,this.pos.to,w),this.pos.to=y(this.pos.from.line+O.length-1,O[O.length-1].length+(O.length==1?this.pos.from.ch:0))}}},l.defineExtension("getSearchCursor",function(E,w,O){return new F(this.doc,E,w,O)}),l.defineDocExtension("getSearchCursor",function(E,w,O){return new F(this,E,w,O)}),l.defineExtension("selectMatches",function(E,w){for(var O=[],R=this.getSearchCursor(E,this.getCursor("from"),w);R.findNext()&&!(l.cmpPos(R.to(),this.getCursor("to"))>0);)O.push({anchor:R.from(),head:R.to()});O.length&&this.setSelections(O,0)})})})();var matchbrackets={exports:{}};(function(f,d){(function(l){l(codemirror$1.exports)})(function(l){var y=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),v=l.Pos,b={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function _(P){return P&&P.bracketRegex||/[(){}[\]]/}function k(P,H,$){var Q=P.getLineHandle(H.line),D=H.ch-1,F=$&&$.afterCursor;F==null&&(F=/(^| )cm-fat-cursor($| )/.test(P.getWrapperElement().className));var E=_($),w=!F&&D>=0&&E.test(Q.text.charAt(D))&&b[Q.text.charAt(D)]||E.test(Q.text.charAt(D+1))&&b[Q.text.charAt(++D)];if(!w)return null;var O=w.charAt(1)==">"?1:-1;if($&&$.strict&&O>0!=(D==H.ch))return null;var R=P.getTokenTypeAt(v(H.line,D+1)),C=I(P,v(H.line,D+(O>0?1:0)),O,R,$);return C==null?null:{from:v(H.line,D),to:C&&C.pos,match:C&&C.ch==w.charAt(0),forward:O>0}}function I(P,H,$,Q,D){for(var F=D&&D.maxScanLineLength||1e4,E=D&&D.maxScanLines||1e3,w=[],O=_(D),R=$>0?Math.min(H.line+E,P.lastLine()+1):Math.max(P.firstLine()-1,H.line-E),C=H.line;C!=R;C+=$){var h=P.getLine(C);if(!!h){var m=$>0?0:h.length-1,M=$>0?h.length:-1;if(!(h.length>F))for(C==H.line&&(m=H.ch-($<0?1:0));m!=M;m+=$){var V=h.charAt(m);if(O.test(V)&&(Q===void 0||(P.getTokenTypeAt(v(C,m+1))||"")==(Q||""))){var G=b[V];if(G&&G.charAt(1)==">"==$>0)w.push(V);else if(w.length)w.pop();else return{pos:v(C,m),ch:V}}}}}return C-$==($>0?P.lastLine():P.firstLine())?!1:null}function K(P,H,$){for(var Q=P.state.matchBrackets.maxHighlightLineLength||1e3,D=$&&$.highlightNonMatching,F=[],E=P.listSelections(),w=0;w<E.length;w++){var O=E[w].empty()&&k(P,E[w].head,$);if(O&&(O.match||D!==!1)&&P.getLine(O.from.line).length<=Q){var R=O.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";F.push(P.markText(O.from,v(O.from.line,O.from.ch+1),{className:R})),O.to&&P.getLine(O.to.line).length<=Q&&F.push(P.markText(O.to,v(O.to.line,O.to.ch+1),{className:R}))}}if(F.length){y&&P.state.focused&&P.focus();var C=function(){P.operation(function(){for(var h=0;h<F.length;h++)F[h].clear()})};if(H)setTimeout(C,800);else return C}}function B(P){P.operation(function(){P.state.matchBrackets.currentlyHighlighted&&(P.state.matchBrackets.currentlyHighlighted(),P.state.matchBrackets.currentlyHighlighted=null),P.state.matchBrackets.currentlyHighlighted=K(P,!1,P.state.matchBrackets)})}function z(P){P.state.matchBrackets&&P.state.matchBrackets.currentlyHighlighted&&(P.state.matchBrackets.currentlyHighlighted(),P.state.matchBrackets.currentlyHighlighted=null)}l.defineOption("matchBrackets",!1,function(P,H,$){$&&$!=l.Init&&(P.off("cursorActivity",B),P.off("focus",B),P.off("blur",z),z(P)),H&&(P.state.matchBrackets=typeof H=="object"?H:{},P.on("cursorActivity",B),P.on("focus",B),P.on("blur",z))}),l.defineExtension("matchBrackets",function(){K(this,!0)}),l.defineExtension("findMatchingBracket",function(P,H,$){return($||typeof H=="boolean")&&($?($.strict=H,H=$):H=H?{strict:!0}:null),k(this,P,H)}),l.defineExtension("scanForBracket",function(P,H,$,Q){return I(this,P,H,$,Q)})})})();(function(f,d){(function(l){l(codemirror$1.exports)})(function(l){var y=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,v=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,b=/[*+-]\s/;l.commands.newlineAndIndentContinueMarkdownList=function(k){if(k.getOption("disableInput"))return l.Pass;for(var I=k.listSelections(),K=[],B=0;B<I.length;B++){var z=I[B].head,P=k.getStateAfter(z.line),H=l.innerMode(k.getMode(),P);if(H.mode.name!=="markdown"&&H.mode.helperType!=="markdown"){k.execCommand("newlineAndIndent");return}else P=H.state;var $=P.list!==!1,Q=P.quote!==0,D=k.getLine(z.line),F=y.exec(D),E=/^\s*$/.test(D.slice(0,z.ch));if(!I[B].empty()||!$&&!Q||!F||E){k.execCommand("newlineAndIndent");return}if(v.test(D)){var w=Q&&/>\s*$/.test(D),O=!/>\s*$/.test(D);(w||O)&&k.replaceRange("",{line:z.line,ch:0},{line:z.line,ch:z.ch+1}),K[B]=`
`}else{var R=F[1],C=F[5],h=!(b.test(F[2])||F[2].indexOf(">")>=0),m=h?parseInt(F[3],10)+1+F[4]:F[2].replace("x"," ");K[B]=`
`+R+m+C,h&&_(k,z)}}k.replaceSelections(K)};function _(k,I){var K=I.line,B=0,z=0,P=y.exec(k.getLine(K)),H=P[1];do{B+=1;var $=K+B,Q=k.getLine($),D=y.exec(Q);if(D){var F=D[1],E=parseInt(P[3],10)+B-z,w=parseInt(D[3],10),O=w;if(H===F&&!isNaN(w))E===w&&(O=w+1),E>w&&(O=E+1),k.replaceRange(Q.replace(y,F+O+D[4]+D[5]),{line:$,ch:0},{line:$,ch:Q.length});else{if(H.length>F.length||H.length<F.length&&B===1)return;z+=1}}}while(D)}})})();(function(f,d){(function(l){l(codemirror$1.exports,searchcursor.exports,dialog.exports,matchbrackets.exports)})(function(l){function y(b){var _=b.Pos;function k(t,r){var i=t.state.vim;if(!i||i.insertMode)return r.head;var a=i.sel.head;if(!a)return r.head;if(!(i.visualBlock&&r.head.line!=a.line))return r.from()==r.anchor&&!r.empty()&&r.head.line==a.line&&r.head.ch!=a.ch?new _(r.head.line,r.head.ch-1):r.head}var I=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],K=I.length,B=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}];function z(t){t.setOption("disableInput",!0),t.setOption("showCursorWhenSelecting",!1),b.signal(t,"vim-mode-change",{mode:"normal"}),t.on("cursorActivity",Sr),At(t),b.on(t.getInputField(),"paste",w(t))}function P(t){t.setOption("disableInput",!1),t.off("cursorActivity",Sr),b.off(t.getInputField(),"paste",w(t)),t.state.vim=null,Rn&&clearTimeout(Rn)}function H(t,r){this==b.keyMap.vim&&(t.options.$customCursor=null,b.rmClass(t.getWrapperElement(),"cm-fat-cursor")),(!r||r.attach!=$)&&P(t)}function $(t,r){this==b.keyMap.vim&&(t.curOp&&(t.curOp.selectionChanged=!0),t.options.$customCursor=k,b.addClass(t.getWrapperElement(),"cm-fat-cursor")),(!r||r.attach!=$)&&z(t)}b.defineOption("vimMode",!1,function(t,r,i){r&&t.getOption("keyMap")!="vim"?t.setOption("keyMap","vim"):!r&&i!=b.Init&&/^vim/.test(t.getOption("keyMap"))&&t.setOption("keyMap","default")});function Q(t,r){if(!!r){if(this[t])return this[t];var i=E(t);if(!i)return!1;var a=Me.findKey(r,i);return typeof a=="function"&&b.signal(r,"vim-keypress",i),a}}var D={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},F={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function E(t){if(t.charAt(0)=="'")return t.charAt(1);var r=t.split(/-(?!$)/),i=r[r.length-1];if(r.length==1&&r[0].length==1)return!1;if(r.length==2&&r[0]=="Shift"&&i.length==1)return!1;for(var a=!1,s=0;s<r.length;s++){var u=r[s];u in D?r[s]=D[u]:a=!0,u in F&&(r[s]=F[u])}return a?(_e(i)&&(r[r.length-1]=i.toLowerCase()),"<"+r.join("-")+">"):!1}function w(t){var r=t.state.vim;return r.onPasteFn||(r.onPasteFn=function(){r.insertMode||(t.setCursor(ft(t.getCursor(),0,1)),Ae.enterInsertMode(t,{},r))}),r.onPasteFn}var O=/[\d]/,R=[b.isWordChar,function(t){return t&&!b.isWordChar(t)&&!/\s/.test(t)}],C=[function(t){return/\S/.test(t)}];function h(t,r){for(var i=[],a=t;a<t+r;a++)i.push(String.fromCharCode(a));return i}var m=h(65,26),M=h(97,26),V=h(48,10),G=[].concat(m,M,V,["<",">"]),ae=[].concat(m,M,V,["-",'"',".",":","_","/"]),ce;try{ce=new RegExp("^[\\p{Lu}]$","u")}catch{ce=/^[A-Z]$/}function ye(t,r){return r>=t.firstLine()&&r<=t.lastLine()}function Z(t){return/^[a-z]$/.test(t)}function fe(t){return"()[]{}".indexOf(t)!=-1}function ie(t){return O.test(t)}function _e(t){return ce.test(t)}function re(t){return/^\s*$/.test(t)}function se(t){return".?!".indexOf(t)!=-1}function Te(t,r){for(var i=0;i<r.length;i++)if(r[i]==t)return!0;return!1}var U={};function A(t,r,i,a,s){if(r===void 0&&!s)throw Error("defaultValue is required unless callback is provided");if(i||(i="string"),U[t]={type:i,defaultValue:r,callback:s},a)for(var u=0;u<a.length;u++)U[a[u]]=U[t];r&&we(t,r)}function we(t,r,i,a){var s=U[t];a=a||{};var u=a.scope;if(!s)return new Error("Unknown option: "+t);if(s.type=="boolean"){if(r&&r!==!0)return new Error("Invalid argument: "+t+"="+r);r!==!1&&(r=!0)}s.callback?(u!=="local"&&s.callback(r,void 0),u!=="global"&&i&&s.callback(r,i)):(u!=="local"&&(s.value=s.type=="boolean"?!!r:r),u!=="global"&&i&&(i.state.vim.options[t]={value:r}))}function ke(t,r,i){var a=U[t];i=i||{};var s=i.scope;if(!a)return new Error("Unknown option: "+t);if(a.callback){var u=r&&a.callback(void 0,r);return s!=="global"&&u!==void 0?u:s!=="local"?a.callback():void 0}else{var u=s!=="global"&&r&&r.state.vim.options[t];return(u||s!=="local"&&a||{}).value}}A("filetype",void 0,"string",["ft"],function(t,r){if(r!==void 0)if(t===void 0){var i=r.getOption("mode");return i=="null"?"":i}else{var i=t==""?"null":t;r.setOption("mode",i)}});var Ne=function(){var t=100,r=-1,i=0,a=0,s=new Array(t);function u(x,N,W){var Y=r%t,oe=s[Y];function te(ve){var ue=++r%t,Re=s[ue];Re&&Re.clear(),s[ue]=x.setBookmark(ve)}if(oe){var ne=oe.find();ne&&!Ot(ne,N)&&te(N)}else te(N);te(W),i=r,a=r-t+1,a<0&&(a=0)}function p(x,N){r+=N,r>i?r=i:r<a&&(r=a);var W=s[(t+r)%t];if(W&&!W.find()){var Y=N>0?1:-1,oe,te=x.getCursor();do if(r+=Y,W=s[(t+r)%t],W&&(oe=W.find())&&!Ot(te,oe))break;while(r<i&&r>a)}return W}function T(x,N){var W=r,Y=p(x,N);return r=W,Y&&Y.find()}return{cachedCursor:void 0,add:u,find:T,move:p}},Ve=function(t){return t?{changes:t.changes,expectCursorActivityForChange:t.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function it(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=Ve()}it.prototype={exitMacroRecordMode:function(){var t=me.macroModeState;t.onRecordingDone&&t.onRecordingDone(),t.onRecordingDone=void 0,t.isRecording=!1},enterMacroRecordMode:function(t,r){var i=me.registerController.getRegister(r);if(i){if(i.clear(),this.latestRegister=r,t.openDialog){var a=en("span",{class:"cm-vim-message"},"recording @"+r);this.onRecordingDone=t.openDialog(a,null,{bottom:!0})}this.isRecording=!0}}};function At(t){return t.state.vim||(t.state.vim={inputState:new vt,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),t.state.vim}var me;function Ze(){me={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Ne(),macroModeState:new it,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new qt({}),searchHistoryController:new Rt,exCommandHistoryController:new Rt};for(var t in U){var r=U[t];r.value=r.defaultValue}}var Ie,Me={enterVimMode:z,buildKeyMap:function(){},getRegisterController:function(){return me.registerController},resetVimGlobalState_:Ze,getVimGlobalState_:function(){return me},maybeInitVimState_:At,suppressErrorLogging:!1,InsertModeKey:st,map:function(t,r,i){Qt.map(t,r,i)},unmap:function(t,r){return Qt.unmap(t,r)},noremap:function(t,r,i){function a(oe){return oe?[oe]:["normal","insert","visual"]}for(var s=a(i),u=I.length,p=K,T=u-p;T<u&&s.length;T++){var x=I[T];if(x.keys==r&&(!i||!x.context||x.context===i)&&x.type.substr(0,2)!=="ex"&&x.type.substr(0,3)!=="key"){var N={};for(var W in x)N[W]=x[W];N.keys=t,i&&!N.context&&(N.context=i),this._mapCommand(N);var Y=a(x.context);s=s.filter(function(oe){return Y.indexOf(oe)===-1})}}},mapclear:function(t){var r=I.length,i=K,a=I.slice(0,r-i);if(I=I.slice(r-i),t)for(var s=a.length-1;s>=0;s--){var u=a[s];if(t!==u.context)if(u.context)this._mapCommand(u);else{var p=["normal","insert","visual"];for(var T in p)if(p[T]!==t){var x={};for(var N in u)x[N]=u[N];x.context=p[T],this._mapCommand(x)}}}},setOption:we,getOption:ke,defineOption:A,defineEx:function(t,r,i){if(!r)r=t;else if(t.indexOf(r)!==0)throw new Error('(Vim.defineEx) "'+r+'" is not a prefix of "'+t+'", command not registered');Ar[t]=i,Qt.commandMap_[r]={name:t,shortName:r,type:"api"}},handleKey:function(t,r,i){var a=this.findKey(t,r,i);if(typeof a=="function")return a()},multiSelectHandleKey:mt,findKey:function(t,r,i){var a=At(t);function s(){var W=me.macroModeState;if(W.isRecording){if(r=="q")return W.exitMacroRecordMode(),pt(t),!0;i!="mapping"&&On(W,r)}}function u(){if(r=="<Esc>"){if(a.visualMode)_t(t);else if(a.insertMode)Nn(t);else return;return pt(t),!0}}function p(W){for(var Y;W;)Y=/<\w+-.+?>|<\w+>|./.exec(W),r=Y[0],W=W.substring(Y.index+r.length),Me.handleKey(t,r,"mapping")}function T(){if(u())return!0;for(var W=a.inputState.keyBuffer=a.inputState.keyBuffer+r,Y=r.length==1,oe=ct.matchCommand(W,I,a.inputState,"insert");W.length>1&&oe.type!="full";){var W=a.inputState.keyBuffer=W.slice(1),te=ct.matchCommand(W,I,a.inputState,"insert");te.type!="none"&&(oe=te)}if(oe.type=="none")return pt(t),!1;if(oe.type=="partial")return Ie&&window.clearTimeout(Ie),Ie=window.setTimeout(function(){a.insertMode&&a.inputState.keyBuffer&&pt(t)},ke("insertModeEscKeysTimeout")),!Y;if(Ie&&window.clearTimeout(Ie),Y){for(var ne=t.listSelections(),ve=0;ve<ne.length;ve++){var ue=ne[ve].head;t.replaceRange("",ft(ue,0,-(W.length-1)),ue,"+input")}me.macroModeState.lastInsertModeChanges.changes.pop()}return pt(t),oe.command}function x(){if(s()||u())return!0;var W=a.inputState.keyBuffer=a.inputState.keyBuffer+r;if(/^[1-9]\d*$/.test(W))return!0;var Y=/^(\d*)(.*)$/.exec(W);if(!Y)return pt(t),!1;var oe=a.visualMode?"visual":"normal",te=Y[2]||Y[1];a.inputState.operatorShortcut&&a.inputState.operatorShortcut.slice(-1)==te&&(te=a.inputState.operatorShortcut);var ne=ct.matchCommand(te,I,a.inputState,oe);return ne.type=="none"?(pt(t),!1):ne.type=="partial"?!0:ne.type=="clear"?(pt(t),!0):(a.inputState.keyBuffer="",Y=/^(\d*)(.*)$/.exec(W),Y[1]&&Y[1]!="0"&&a.inputState.pushRepeatDigit(Y[1]),ne.command)}var N;return a.insertMode?N=T():N=x(),N===!1?!a.insertMode&&r.length===1?function(){return!0}:void 0:N===!0?function(){return!0}:function(){return t.operation(function(){t.curOp.isVimOp=!0;try{N.type=="keyToKey"?p(N.toKeys):ct.processCommand(t,a,N)}catch(W){throw t.state.vim=void 0,At(t),Me.suppressErrorLogging||console.log(W),W}return!0})}},handleEx:function(t,r){Qt.processCommand(t,r)},defineMotion:zt,defineAction:ze,defineOperator:xe,mapCommand:Er,_mapCommand:Mr,defineRegister:Nt,exitVisualMode:_t,exitInsertMode:Nn};function vt(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}vt.prototype.pushRepeatDigit=function(t){this.operator?this.motionRepeat=this.motionRepeat.concat(t):this.prefixRepeat=this.prefixRepeat.concat(t)},vt.prototype.getRepeat=function(){var t=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(t=1,this.prefixRepeat.length>0&&(t*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(t*=parseInt(this.motionRepeat.join(""),10))),t};function pt(t,r){t.state.vim.inputState=new vt,b.signal(t,"vim-command-done",r)}function et(t,r,i){this.clear(),this.keyBuffer=[t||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!r,this.blockwise=!!i}et.prototype={setText:function(t,r,i){this.keyBuffer=[t||""],this.linewise=!!r,this.blockwise=!!i},pushText:function(t,r){r&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(t)},pushInsertModeChanges:function(t){this.insertModeChanges.push(Ve(t))},pushSearchQuery:function(t){this.searchQueries.push(t)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};function Nt(t,r){var i=me.registerController.registers;if(!t||t.length!=1)throw Error("Register name must be 1 character");if(i[t])throw Error("Register already defined "+t);i[t]=r,ae.push(t)}function qt(t){this.registers=t,this.unnamedRegister=t['"']=new et,t["."]=new et,t[":"]=new et,t["/"]=new et}qt.prototype={pushText:function(t,r,i,a,s){if(t!=="_"){a&&i.charAt(i.length-1)!==`
`&&(i+=`
`);var u=this.isValidRegister(t)?this.getRegister(t):null;if(!u){switch(r){case"yank":this.registers[0]=new et(i,a,s);break;case"delete":case"change":i.indexOf(`
`)==-1?this.registers["-"]=new et(i,a):(this.shiftNumericRegisters_(),this.registers[1]=new et(i,a));break}this.unnamedRegister.setText(i,a,s);return}var p=_e(t);p?u.pushText(i,a):u.setText(i,a,s),this.unnamedRegister.setText(u.toString(),a)}},getRegister:function(t){return this.isValidRegister(t)?(t=t.toLowerCase(),this.registers[t]||(this.registers[t]=new et),this.registers[t]):this.unnamedRegister},isValidRegister:function(t){return t&&Te(t,ae)},shiftNumericRegisters_:function(){for(var t=9;t>=2;t--)this.registers[t]=this.getRegister(""+(t-1))}};function Rt(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}Rt.prototype={nextMatch:function(t,r){var i=this.historyBuffer,a=r?-1:1;this.initialPrefix===null&&(this.initialPrefix=t);for(var s=this.iterator+a;r?s>=0:s<i.length;s+=a)for(var u=i[s],p=0;p<=u.length;p++)if(this.initialPrefix==u.substring(0,p))return this.iterator=s,u;if(s>=i.length)return this.iterator=i.length,this.initialPrefix;if(s<0)return t},pushInput:function(t){var r=this.historyBuffer.indexOf(t);r>-1&&this.historyBuffer.splice(r,1),t.length&&this.historyBuffer.push(t)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var ct={matchCommand:function(t,r,i,a){var s=an(t,r,a,i);if(!s.full&&!s.partial)return{type:"none"};if(!s.full&&s.partial)return{type:"partial"};for(var u,p=0;p<s.full.length;p++){var T=s.full[p];u||(u=T)}if(u.keys.slice(-11)=="<character>"){var x=Zn(t);if(!x||x.length>1)return{type:"clear"};i.selectedCharacter=x}return{type:"full",command:u}},processCommand:function(t,r,i){switch(r.inputState.repeatOverride=i.repeatOverride,i.type){case"motion":this.processMotion(t,r,i);break;case"operator":this.processOperator(t,r,i);break;case"operatorMotion":this.processOperatorMotion(t,r,i);break;case"action":this.processAction(t,r,i);break;case"search":this.processSearch(t,r,i);break;case"ex":case"keyToEx":this.processEx(t,r,i);break}},processMotion:function(t,r,i){r.inputState.motion=i.motion,r.inputState.motionArgs=St(i.motionArgs),this.evalInput(t,r)},processOperator:function(t,r,i){var a=r.inputState;if(a.operator)if(a.operator==i.operator){a.motion="expandToLine",a.motionArgs={linewise:!0},this.evalInput(t,r);return}else pt(t);a.operator=i.operator,a.operatorArgs=St(i.operatorArgs),i.keys.length>1&&(a.operatorShortcut=i.keys),i.exitVisualBlock&&(r.visualBlock=!1,An(t)),r.visualMode&&this.evalInput(t,r)},processOperatorMotion:function(t,r,i){var a=r.visualMode,s=St(i.operatorMotionArgs);s&&a&&s.visualLine&&(r.visualLine=!0),this.processOperator(t,r,i),a||this.processMotion(t,r,i)},processAction:function(t,r,i){var a=r.inputState,s=a.getRepeat(),u=!!s,p=St(i.actionArgs)||{};a.selectedCharacter&&(p.selectedCharacter=a.selectedCharacter),i.operator&&this.processOperator(t,r,i),i.motion&&this.processMotion(t,r,i),(i.motion||i.operator)&&this.evalInput(t,r),p.repeat=s||1,p.repeatIsExplicit=u,p.registerName=a.registerName,pt(t),r.lastMotion=null,i.isEdit&&this.recordLastEdit(r,a,i),Ae[i.action](t,p,r)},processSearch:function(t,r,i){if(!t.getSearchCursor)return;var a=i.searchArgs.forward,s=i.searchArgs.wholeWordOnly;It(t).setReversed(!a);var u=a?"/":"?",p=It(t).getQuery(),T=t.getScrollInfo();function x(ue,Re,Se){me.searchHistoryController.pushInput(ue),me.searchHistoryController.reset();try{un(t,ue,Re,Se)}catch{at(t,"Invalid regex: "+ue),pt(t);return}ct.processMotion(t,r,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:i.searchArgs.toJumplist}})}function N(ue){t.scrollTo(T.left,T.top),x(ue,!0,!0);var Re=me.macroModeState;Re.isRecording&&rr(Re,ue)}function W(ue,Re,Se){var Pe=b.keyName(ue),nt,wt;Pe=="Up"||Pe=="Down"?(nt=Pe=="Up",wt=ue.target?ue.target.selectionEnd:0,Re=me.searchHistoryController.nextMatch(Re,nt)||"",Se(Re),wt&&ue.target&&(ue.target.selectionEnd=ue.target.selectionStart=Math.min(wt,ue.target.value.length))):Pe!="Left"&&Pe!="Right"&&Pe!="Ctrl"&&Pe!="Alt"&&Pe!="Shift"&&me.searchHistoryController.reset();var bt;try{bt=un(t,Re,!0,!0)}catch{}bt?t.scrollIntoView(vn(t,!a,bt),30):(br(t),t.scrollTo(T.left,T.top))}function Y(ue,Re,Se){var Pe=b.keyName(ue);Pe=="Esc"||Pe=="Ctrl-C"||Pe=="Ctrl-["||Pe=="Backspace"&&Re==""?(me.searchHistoryController.pushInput(Re),me.searchHistoryController.reset(),un(t,p),br(t),t.scrollTo(T.left,T.top),b.e_stop(ue),pt(t),Se(),t.focus()):Pe=="Up"||Pe=="Down"?b.e_stop(ue):Pe=="Ctrl-U"&&(b.e_stop(ue),Se(""))}switch(i.searchArgs.querySrc){case"prompt":var oe=me.macroModeState;if(oe.isPlaying){var ve=oe.replaySearchQueries.shift();x(ve,!0,!1)}else gn(t,{onClose:N,prefix:u,desc:"(JavaScript regexp)",onKeyUp:W,onKeyDown:Y});break;case"wordUnderCursor":var te=Sn(t,!1,!0,!1,!0),ne=!0;if(te||(te=Sn(t,!1,!0,!1,!1),ne=!1),!te)return;var ve=t.getLine(te.start.line).substring(te.start.ch,te.end.ch);ne&&s?ve="\\b"+ve+"\\b":ve=Nr(ve),me.jumpList.cachedCursor=t.getCursor(),t.setCursor(te.start),x(ve,!0,!1);break}},processEx:function(t,r,i){function a(u){me.exCommandHistoryController.pushInput(u),me.exCommandHistoryController.reset(),Qt.processCommand(t,u),pt(t)}function s(u,p,T){var x=b.keyName(u),N,W;(x=="Esc"||x=="Ctrl-C"||x=="Ctrl-["||x=="Backspace"&&p=="")&&(me.exCommandHistoryController.pushInput(p),me.exCommandHistoryController.reset(),b.e_stop(u),pt(t),T(),t.focus()),x=="Up"||x=="Down"?(b.e_stop(u),N=x=="Up",W=u.target?u.target.selectionEnd:0,p=me.exCommandHistoryController.nextMatch(p,N)||"",T(p),W&&u.target&&(u.target.selectionEnd=u.target.selectionStart=Math.min(W,u.target.value.length))):x=="Ctrl-U"?(b.e_stop(u),T("")):x!="Left"&&x!="Right"&&x!="Ctrl"&&x!="Alt"&&x!="Shift"&&me.exCommandHistoryController.reset()}i.type=="keyToEx"?Qt.processCommand(t,i.exArgs.input):r.visualMode?gn(t,{onClose:a,prefix:":",value:"'<,'>",onKeyDown:s,selectValueOnOpen:!1}):gn(t,{onClose:a,prefix:":",onKeyDown:s})},evalInput:function(t,r){var i=r.inputState,a=i.motion,s=i.motionArgs||{},u=i.operator,p=i.operatorArgs||{},T=i.registerName,x=r.sel,N=tt(r.visualMode?He(t,x.head):t.getCursor("head")),W=tt(r.visualMode?He(t,x.anchor):t.getCursor("anchor")),Y=tt(N),oe=tt(W),te,ne,ve;if(u&&this.recordLastEdit(r,i),i.repeatOverride!==void 0?ve=i.repeatOverride:ve=i.getRepeat(),ve>0&&s.explicitRepeat?s.repeatIsExplicit=!0:(s.noRepeat||!s.explicitRepeat&&ve===0)&&(ve=1,s.repeatIsExplicit=!1),i.selectedCharacter&&(s.selectedCharacter=p.selectedCharacter=i.selectedCharacter),s.repeat=ve,pt(t),a){var ue=Ct[a](t,N,s,r,i);if(r.lastMotion=Ct[a],!ue)return;if(s.toJumplist){var Re=me.jumpList,Se=Re.cachedCursor;Se?(Vr(t,Se,ue),delete Re.cachedCursor):Vr(t,N,ue)}ue instanceof Array?(ne=ue[0],te=ue[1]):te=ue,te||(te=tt(N)),r.visualMode?(r.visualBlock&&te.ch===1/0||(te=He(t,te)),ne&&(ne=He(t,ne)),ne=ne||oe,x.anchor=ne,x.head=te,An(t),Wt(t,r,"<",ht(ne,te)?ne:te),Wt(t,r,">",ht(ne,te)?te:ne)):u||(te=He(t,te),t.setCursor(te.line,te.ch))}if(u){if(p.lastSel){ne=oe;var Pe=p.lastSel,nt=Math.abs(Pe.head.line-Pe.anchor.line),wt=Math.abs(Pe.head.ch-Pe.anchor.ch);Pe.visualLine?te=new _(oe.line+nt,oe.ch):Pe.visualBlock?te=new _(oe.line+nt,oe.ch+wt):Pe.head.line==Pe.anchor.line?te=new _(oe.line,oe.ch+wt):te=new _(oe.line+nt,oe.ch),r.visualMode=!0,r.visualLine=Pe.visualLine,r.visualBlock=Pe.visualBlock,x=r.sel={anchor:ne,head:te},An(t)}else r.visualMode&&(p.lastSel={anchor:tt(x.anchor),head:tt(x.head),visualBlock:r.visualBlock,visualLine:r.visualLine});var bt,Mt,De,Ue,Ft;if(r.visualMode){if(bt=Ut(x.head,x.anchor),Mt=Jt(x.head,x.anchor),De=r.visualLine||p.linewise,Ue=r.visualBlock?"block":De?"line":"char",Ft=Yn(t,{anchor:bt,head:Mt},Ue),De){var nn=Ft.ranges;if(Ue=="block")for(var Pt=0;Pt<nn.length;Pt++)nn[Pt].head.ch=yt(t,nn[Pt].head.line);else Ue=="line"&&(nn[0].head=new _(nn[0].head.line+1,0))}}else{if(bt=tt(ne||oe),Mt=tt(te||Y),ht(Mt,bt)){var Dr=bt;bt=Mt,Mt=Dr}De=s.linewise||p.linewise,De?En(t,bt,Mt):s.forward&&Xn(t,bt,Mt),Ue="char";var si=!s.inclusive||De;Ft=Yn(t,{anchor:bt,head:Mt},Ue,si)}t.setSelections(Ft.ranges,Ft.primary),r.lastMotion=null,p.repeat=ve,p.registerName=T,p.linewise=De;var Ri=Fe[u](t,p,Ft.ranges,oe,te);r.visualMode&&_t(t,Ri!=null),Ri&&t.setCursor(Ri)}},recordLastEdit:function(t,r,i){var a=me.macroModeState;a.isPlaying||(t.lastEditInputState=r,t.lastEditActionCommand=i,a.lastInsertModeChanges.changes=[],a.lastInsertModeChanges.expectCursorActivityForChange=!1,a.lastInsertModeChanges.visualBlock=t.visualBlock?t.sel.head.line-t.sel.anchor.line:0)}},Ct={moveToTopLine:function(t,r,i){var a=Vt(t).top+i.repeat-1;return new _(a,Kt(t.getLine(a)))},moveToMiddleLine:function(t){var r=Vt(t),i=Math.floor((r.top+r.bottom)*.5);return new _(i,Kt(t.getLine(i)))},moveToBottomLine:function(t,r,i){var a=Vt(t).bottom-i.repeat+1;return new _(a,Kt(t.getLine(a)))},expandToLine:function(t,r,i){var a=r;return new _(a.line+i.repeat-1,1/0)},findNext:function(t,r,i){var a=It(t),s=a.getQuery();if(!!s){var u=!i.forward;return u=a.isReversed()?!u:u,cn(t,s),vn(t,u,s,i.repeat)}},findAndSelectNextInclusive:function(t,r,i,a,s){var u=It(t),p=u.getQuery();if(!!p){var T=!i.forward;T=u.isReversed()?!T:T;var x=Qr(t,T,p,i.repeat,a);if(!!x){if(s.operator)return x;var N=x[0],W=new _(x[1].line,x[1].ch-1);if(a.visualMode){(a.visualLine||a.visualBlock)&&(a.visualLine=!1,a.visualBlock=!1,b.signal(t,"vim-mode-change",{mode:"visual",subMode:""}));var Y=a.sel.anchor;if(Y)return u.isReversed()?i.forward?[Y,N]:[Y,W]:i.forward?[Y,W]:[Y,N]}else a.visualMode=!0,a.visualLine=!1,a.visualBlock=!1,b.signal(t,"vim-mode-change",{mode:"visual",subMode:""});return T?[W,N]:[N,W]}}},goToMark:function(t,r,i,a){var s=Ln(t,a,i.selectedCharacter);return s?i.linewise?{line:s.line,ch:Kt(t.getLine(s.line))}:s:null},moveToOtherHighlightedEnd:function(t,r,i,a){if(a.visualBlock&&i.sameLine){var s=a.sel;return[He(t,new _(s.anchor.line,s.head.ch)),He(t,new _(s.head.line,s.anchor.ch))]}else return[a.sel.head,a.sel.anchor]},jumpToMark:function(t,r,i,a){for(var s=r,u=0;u<i.repeat;u++){var p=s;for(var T in a.marks)if(!!Z(T)){var x=a.marks[T].find(),N=i.forward?ht(x,p):ht(p,x);if(!N&&!(i.linewise&&x.line==p.line)){var W=Ot(p,s),Y=i.forward?cr(p,x,s):cr(s,x,p);(W||Y)&&(s=x)}}}return i.linewise&&(s=new _(s.line,Kt(t.getLine(s.line)))),s},moveByCharacters:function(t,r,i){var a=r,s=i.repeat,u=i.forward?a.ch+s:a.ch-s;return new _(a.line,u)},moveByLines:function(t,r,i,a){var s=r,u=s.ch;switch(a.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:u=a.lastHPos;break;default:a.lastHPos=u}var p=i.repeat+(i.repeatOffset||0),T=i.forward?s.line+p:s.line-p,x=t.firstLine(),N=t.lastLine(),W=t.findPosV(s,i.forward?p:-p,"line",a.lastHSPos),Y=i.forward?W.line>T:W.line<T;return Y&&(T=W.line,u=W.ch),T<x&&s.line==x?this.moveToStartOfLine(t,r,i,a):T>N&&s.line==N?gr(t,r,i,a,!0):(i.toFirstChar&&(u=Kt(t.getLine(T)),a.lastHPos=u),a.lastHSPos=t.charCoords(new _(T,u),"div").left,new _(T,u))},moveByDisplayLines:function(t,r,i,a){var s=r;switch(a.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:a.lastHSPos=t.charCoords(s,"div").left}var u=i.repeat,p=t.findPosV(s,i.forward?u:-u,"line",a.lastHSPos);if(p.hitSide)if(i.forward)var T=t.charCoords(p,"div"),x={top:T.top+8,left:a.lastHSPos},p=t.coordsChar(x,"div");else{var N=t.charCoords(new _(t.firstLine(),0),"div");N.left=a.lastHSPos,p=t.coordsChar(N,"div")}return a.lastHPos=p.ch,p},moveByPage:function(t,r,i){var a=r,s=i.repeat;return t.findPosV(a,i.forward?s:-s,"page")},moveByParagraph:function(t,r,i){var a=i.forward?1:-1;return mr(t,r,i.repeat,a)},moveBySentence:function(t,r,i){var a=i.forward?1:-1;return kn(t,r,i.repeat,a)},moveByScroll:function(t,r,i,a){var s=t.getScrollInfo(),u=null,p=i.repeat;p||(p=s.clientHeight/(2*t.defaultTextHeight()));var T=t.charCoords(r,"local");if(i.repeat=p,u=Ct.moveByDisplayLines(t,r,i,a),!u)return null;var x=t.charCoords(u,"local");return t.scrollTo(null,s.top+x.top-T.top),u},moveByWords:function(t,r,i){return kt(t,r,i.repeat,!!i.forward,!!i.wordEnd,!!i.bigWord)},moveTillCharacter:function(t,r,i){var a=i.repeat,s=lt(t,a,i.forward,i.selectedCharacter),u=i.forward?-1:1;return Or(u,i),s?(s.ch+=u,s):null},moveToCharacter:function(t,r,i){var a=i.repeat;return Or(0,i),lt(t,a,i.forward,i.selectedCharacter)||r},moveToSymbol:function(t,r,i){var a=i.repeat;return Et(t,a,i.forward,i.selectedCharacter)||r},moveToColumn:function(t,r,i,a){var s=i.repeat;return a.lastHPos=s-1,a.lastHSPos=t.charCoords(r,"div").left,Wn(t,s)},moveToEol:function(t,r,i,a){return gr(t,r,i,a,!1)},moveToFirstNonWhiteSpaceCharacter:function(t,r){var i=r;return new _(i.line,Kt(t.getLine(i.line)))},moveToMatchedSymbol:function(t,r){for(var i=r,a=i.line,s=i.ch,u=t.getLine(a),p;s<u.length;s++)if(p=u.charAt(s),p&&fe(p)){var T=t.getTokenTypeAt(new _(a,s+1));if(T!=="string"&&T!=="comment")break}if(s<u.length){var x=s==="<"||s===">"?/[(){}[\]<>]/:/[(){}[\]]/,N=t.findMatchingBracket(new _(a,s),{bracketRegex:x});return N.to}else return i},moveToStartOfLine:function(t,r){return new _(r.line,0)},moveToLineOrEdgeOfDocument:function(t,r,i){var a=i.forward?t.lastLine():t.firstLine();return i.repeatIsExplicit&&(a=i.repeat-t.getOption("firstLineNumber")),new _(a,Kt(t.getLine(a)))},moveToStartOfDisplayLine:function(t){return t.execCommand("goLineLeft"),t.getCursor()},moveToEndOfDisplayLine:function(t){t.execCommand("goLineRight");var r=t.getCursor();return r.sticky=="before"&&r.ch--,r},textObjectManipulation:function(t,r,i,a){var s={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},u={"'":!0,'"':!0,"`":!0},p=i.selectedCharacter;p=="b"?p="(":p=="B"&&(p="{");var T=!i.textObjectInner,x;if(s[p])x=Xt(t,r,p,T);else if(u[p])x=Tn(t,r,p,T);else if(p==="W")x=Sn(t,T,!0,!0);else if(p==="w")x=Sn(t,T,!0,!1);else if(p==="p")if(x=mr(t,r,i.repeat,0,T),i.linewise=!0,a.visualMode)a.visualLine||(a.visualLine=!0);else{var N=a.inputState.operatorArgs;N&&(N.linewise=!0),x.end.line--}else if(p==="t")x=oi(t,r,T);else if(p==="s"){var W=t.getLine(r.line);r.ch>0&&se(W[r.ch])&&(r.ch-=1);var Y=Ir(t,r,i.repeat,1,T),oe=Ir(t,r,i.repeat,-1,T);re(t.getLine(oe.line)[oe.ch])&&re(t.getLine(Y.line)[Y.ch-1])&&(oe={line:oe.line,ch:oe.ch+1}),x={start:oe,end:Y}}else return null;return t.state.vim.visualMode?Qn(t,x.start,x.end):[x.start,x.end]},repeatLastCharacterSearch:function(t,r,i){var a=me.lastCharacterSearch,s=i.repeat,u=i.forward===a.forward,p=(a.increment?1:0)*(u?-1:1);t.moveH(-p,"char"),i.inclusive=!!u;var T=lt(t,s,u,a.selectedCharacter);return T?(T.ch+=p,T):(t.moveH(p,"char"),r)}};function zt(t,r){Ct[t]=r}function lr(t,r){for(var i=[],a=0;a<r;a++)i.push(t);return i}var Fe={change:function(t,r,i){var a,s,u=t.state.vim,p=i[0].anchor,T=i[0].head;if(u.visualMode)if(r.fullLine)T.ch=Number.MAX_VALUE,T.line--,t.setSelection(p,T),s=t.getSelection(),t.replaceSelection(""),a=p;else{s=t.getSelection();var oe=lr("",i.length);t.replaceSelections(oe),a=Ut(i[0].head,i[0].anchor)}else{s=t.getRange(p,T);var x=u.lastEditInputState||{};if(x.motion=="moveByWords"&&!re(s)){var N=/\s+$/.exec(s);N&&x.motionArgs&&x.motionArgs.forward&&(T=ft(T,0,-N[0].length),s=s.slice(0,-N[0].length))}var W=new _(p.line-1,Number.MAX_VALUE),Y=t.firstLine()==t.lastLine();T.line>t.lastLine()&&r.linewise&&!Y?t.replaceRange("",W,T):t.replaceRange("",p,T),r.linewise&&(Y||(t.setCursor(W),b.commands.newlineAndIndent(t)),p.ch=Number.MAX_VALUE),a=p}me.registerController.pushText(r.registerName,"change",s,r.linewise,i.length>1),Ae.enterInsertMode(t,{head:a},t.state.vim)},delete:function(t,r,i){var a,s,u=t.state.vim;if(u.visualBlock){s=t.getSelection();var x=lr("",i.length);t.replaceSelections(x),a=Ut(i[0].head,i[0].anchor)}else{var p=i[0].anchor,T=i[0].head;r.linewise&&T.line!=t.firstLine()&&p.line==t.lastLine()&&p.line==T.line-1&&(p.line==t.firstLine()?p.ch=0:p=new _(p.line-1,yt(t,p.line-1))),s=t.getRange(p,T),t.replaceRange("",p,T),a=p,r.linewise&&(a=Ct.moveToFirstNonWhiteSpaceCharacter(t,p))}return me.registerController.pushText(r.registerName,"delete",s,r.linewise,u.visualBlock),He(t,a)},indent:function(t,r,i){var a=t.state.vim;if(t.indentMore)for(var s=a.visualMode?r.repeat:1,u=0;u<s;u++)r.indentRight?t.indentMore():t.indentLess();else{var p=i[0].anchor.line,T=a.visualBlock?i[i.length-1].anchor.line:i[0].head.line,s=a.visualMode?r.repeat:1;r.linewise&&T--;for(var x=p;x<=T;x++)for(var u=0;u<s;u++)t.indentLine(x,r.indentRight)}return Ct.moveToFirstNonWhiteSpaceCharacter(t,i[0].anchor)},indentAuto:function(t,r,i){return t.execCommand("indentAuto"),Ct.moveToFirstNonWhiteSpaceCharacter(t,i[0].anchor)},changeCase:function(t,r,i,a,s){for(var u=t.getSelections(),p=[],T=r.toLower,x=0;x<u.length;x++){var N=u[x],W="";if(T===!0)W=N.toLowerCase();else if(T===!1)W=N.toUpperCase();else for(var Y=0;Y<N.length;Y++){var oe=N.charAt(Y);W+=_e(oe)?oe.toLowerCase():oe.toUpperCase()}p.push(W)}return t.replaceSelections(p),r.shouldMoveCursor?s:!t.state.vim.visualMode&&r.linewise&&i[0].anchor.line+1==i[0].head.line?Ct.moveToFirstNonWhiteSpaceCharacter(t,a):r.linewise?a:Ut(i[0].anchor,i[0].head)},yank:function(t,r,i,a){var s=t.state.vim,u=t.getSelection(),p=s.visualMode?Ut(s.sel.anchor,s.sel.head,i[0].head,i[0].anchor):a;return me.registerController.pushText(r.registerName,"yank",u,r.linewise,s.visualBlock),p}};function xe(t,r){Fe[t]=r}var Ae={jumpListWalk:function(t,r,i){if(!i.visualMode){var a=r.repeat,s=r.forward,u=me.jumpList,p=u.move(t,s?a:-a),T=p?p.find():void 0;T=T||t.getCursor(),t.setCursor(T)}},scroll:function(t,r,i){if(!i.visualMode){var a=r.repeat||1,s=t.defaultTextHeight(),u=t.getScrollInfo().top,p=s*a,T=r.forward?u+p:u-p,x=tt(t.getCursor()),N=t.charCoords(x,"local");if(r.forward)T>N.top?(x.line+=(T-N.top)/s,x.line=Math.ceil(x.line),t.setCursor(x),N=t.charCoords(x,"local"),t.scrollTo(null,N.top)):t.scrollTo(null,T);else{var W=T+t.getScrollInfo().clientHeight;W<N.bottom?(x.line-=(N.bottom-W)/s,x.line=Math.floor(x.line),t.setCursor(x),N=t.charCoords(x,"local"),t.scrollTo(null,N.bottom-t.getScrollInfo().clientHeight)):t.scrollTo(null,T)}}},scrollToCursor:function(t,r){var i=t.getCursor().line,a=t.charCoords(new _(i,0),"local"),s=t.getScrollInfo().clientHeight,u=a.top;switch(r.position){case"center":u=a.bottom-s/2;break;case"bottom":var p=new _(i,t.getLine(i).length-1),T=t.charCoords(p,"local"),x=T.bottom-u;u=u-s+x;break}t.scrollTo(null,u)},replayMacro:function(t,r,i){var a=r.selectedCharacter,s=r.repeat,u=me.macroModeState;for(a=="@"?a=u.latestRegister:u.latestRegister=a;s--;)ai(t,i,u,a)},enterMacroRecordMode:function(t,r){var i=me.macroModeState,a=r.selectedCharacter;me.registerController.isValidRegister(a)&&i.enterMacroRecordMode(t,a)},toggleOverwrite:function(t){t.state.overwrite?(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),b.signal(t,"vim-mode-change",{mode:"insert"})):(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),b.signal(t,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(t,r,i){if(!t.getOption("readOnly")){i.insertMode=!0,i.insertModeRepeat=r&&r.repeat||1;var a=r?r.insertAt:null,s=i.sel,u=r.head||t.getCursor("head"),p=t.listSelections().length;if(a=="eol")u=new _(u.line,yt(t,u.line));else if(a=="bol")u=new _(u.line,0);else if(a=="charAfter")u=ft(u,0,1);else if(a=="firstNonBlank")u=Ct.moveToFirstNonWhiteSpaceCharacter(t,u);else if(a=="startOfSelectedArea"){if(!i.visualMode)return;i.visualBlock?(u=new _(Math.min(s.head.line,s.anchor.line),Math.min(s.head.ch,s.anchor.ch)),p=Math.abs(s.head.line-s.anchor.line)+1):s.head.line<s.anchor.line?u=s.head:u=new _(s.anchor.line,0)}else if(a=="endOfSelectedArea"){if(!i.visualMode)return;i.visualBlock?(u=new _(Math.min(s.head.line,s.anchor.line),Math.max(s.head.ch,s.anchor.ch)+1),p=Math.abs(s.head.line-s.anchor.line)+1):s.head.line>=s.anchor.line?u=ft(s.head,0,1):u=new _(s.anchor.line,0)}else if(a=="inplace"){if(i.visualMode)return}else a=="lastEdit"&&(u=Cr(t)||u);t.setOption("disableInput",!1),r&&r.replace?(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),b.signal(t,"vim-mode-change",{mode:"replace"})):(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),b.signal(t,"vim-mode-change",{mode:"insert"})),me.macroModeState.isPlaying||(t.on("change",Fr),b.on(t.getInputField(),"keydown",q)),i.visualMode&&_t(t),hr(t,u,p)}},toggleVisualMode:function(t,r,i){var a=r.repeat,s=t.getCursor(),u;i.visualMode?i.visualLine^r.linewise||i.visualBlock^r.blockwise?(i.visualLine=!!r.linewise,i.visualBlock=!!r.blockwise,b.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),An(t)):_t(t):(i.visualMode=!0,i.visualLine=!!r.linewise,i.visualBlock=!!r.blockwise,u=He(t,new _(s.line,s.ch+a-1)),i.sel={anchor:s,head:u},b.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),An(t),Wt(t,i,"<",Ut(s,u)),Wt(t,i,">",Jt(s,u)))},reselectLastSelection:function(t,r,i){var a=i.lastSelection;if(i.visualMode&&Bn(t,i),a){var s=a.anchorMark.find(),u=a.headMark.find();if(!s||!u)return;i.sel={anchor:s,head:u},i.visualMode=!0,i.visualLine=a.visualLine,i.visualBlock=a.visualBlock,An(t),Wt(t,i,"<",Ut(s,u)),Wt(t,i,">",Jt(s,u)),b.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""})}},joinLines:function(t,r,i){var a,s;if(i.visualMode){if(a=t.getCursor("anchor"),s=t.getCursor("head"),ht(s,a)){var u=s;s=a,a=u}s.ch=yt(t,s.line)-1}else{var p=Math.max(r.repeat,2);a=t.getCursor(),s=He(t,new _(a.line+p-1,1/0))}for(var T=0,x=a.line;x<s.line;x++){T=yt(t,a.line);var u=new _(a.line+1,yt(t,a.line+1)),N=t.getRange(a,u);N=r.keepSpaces?N.replace(/\n\r?/g,""):N.replace(/\n\s*/g," "),t.replaceRange(N,a,u)}var W=new _(a.line,T);i.visualMode&&_t(t,!1),t.setCursor(W)},newLineAndEnterInsertMode:function(t,r,i){i.insertMode=!0;var a=tt(t.getCursor());if(a.line===t.firstLine()&&!r.after)t.replaceRange(`
`,new _(t.firstLine(),0)),t.setCursor(t.firstLine(),0);else{a.line=r.after?a.line:a.line-1,a.ch=yt(t,a.line),t.setCursor(a);var s=b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent;s(t)}this.enterInsertMode(t,{repeat:r.repeat},i)},paste:function(t,r,i){var a=tt(t.getCursor()),s=me.registerController.getRegister(r.registerName),u=s.toString();if(!!u){if(r.matchIndent){var p=t.getOption("tabSize"),T=function(Pt){var Dr=Pt.split("	").length-1,si=Pt.split(" ").length-1;return Dr*p+si*1},x=t.getLine(t.getCursor().line),N=T(x.match(/^\s*/)[0]),W=u.replace(/\n$/,""),Y=u!==W,oe=T(u.match(/^\s*/)[0]),u=W.replace(/^\s*/gm,function(Pt){var Dr=N+(T(Pt)-oe);if(Dr<0)return"";if(t.getOption("indentWithTabs")){var si=Math.floor(Dr/p);return Array(si+1).join("	")}else return Array(Dr+1).join(" ")});u+=Y?`
`:""}if(r.repeat>1)var u=Array(r.repeat+1).join(u);var te=s.linewise,ne=s.blockwise;if(ne){u=u.split(`
`),te&&u.pop();for(var ve=0;ve<u.length;ve++)u[ve]=u[ve]==""?" ":u[ve];a.ch+=r.after?1:0,a.ch=Math.min(yt(t,a.line),a.ch)}else te?i.visualMode?u=i.visualLine?u.slice(0,-1):`
`+u.slice(0,u.length-1)+`
`:r.after?(u=`
`+u.slice(0,u.length-1),a.ch=yt(t,a.line)):a.ch=0:a.ch+=r.after?1:0;var ue,Re;if(i.visualMode){i.lastPastedText=u;var Se,Pe=dr(t,i),nt=Pe[0],wt=Pe[1],bt=t.getSelection(),Mt=t.listSelections(),De=new Array(Mt.length).join("1").split("1");i.lastSelection&&(Se=i.lastSelection.headMark.find()),me.registerController.unnamedRegister.setText(bt),ne?(t.replaceSelections(De),wt=new _(nt.line+u.length-1,nt.ch),t.setCursor(nt),sn(t,wt),t.replaceSelections(u),ue=nt):i.visualBlock?(t.replaceSelections(De),t.setCursor(nt),t.replaceRange(u,nt,nt),ue=nt):(t.replaceRange(u,nt,wt),ue=t.posFromIndex(t.indexFromPos(nt)+u.length-1)),Se&&(i.lastSelection.headMark=t.setBookmark(Se)),te&&(ue.ch=0)}else if(ne){t.setCursor(a);for(var ve=0;ve<u.length;ve++){var Ue=a.line+ve;Ue>t.lastLine()&&t.replaceRange(`
`,new _(Ue,0));var Ft=yt(t,Ue);Ft<a.ch&&fr(t,Ue,a.ch)}t.setCursor(a),sn(t,new _(a.line+u.length-1,a.ch)),t.replaceSelections(u),ue=a}else t.replaceRange(u,a),te&&r.after?ue=new _(a.line+1,Kt(t.getLine(a.line+1))):te&&!r.after?ue=new _(a.line,Kt(t.getLine(a.line))):!te&&r.after?(Re=t.indexFromPos(a),ue=t.posFromIndex(Re+u.length-1)):(Re=t.indexFromPos(a),ue=t.posFromIndex(Re+u.length));i.visualMode&&_t(t,!1),t.setCursor(ue)}},undo:function(t,r){t.operation(function(){Cn(t,b.commands.undo,r.repeat)(),t.setCursor(t.getCursor("anchor"))})},redo:function(t,r){Cn(t,b.commands.redo,r.repeat)()},setRegister:function(t,r,i){i.inputState.registerName=r.selectedCharacter},setMark:function(t,r,i){var a=r.selectedCharacter;Wt(t,i,a,t.getCursor())},replace:function(t,r,i){var a=r.selectedCharacter,s=t.getCursor(),u,p,T=t.listSelections();if(i.visualMode)s=t.getCursor("start"),p=t.getCursor("end");else{var x=t.getLine(s.line);u=s.ch+r.repeat,u>x.length&&(u=x.length),p=new _(s.line,u)}if(a==`
`)i.visualMode||t.replaceRange("",s,p),(b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent)(t);else{var N=t.getRange(s,p);if(N=N.replace(/[^\n]/g,a),i.visualBlock){var W=new Array(t.getOption("tabSize")+1).join(" ");N=t.getSelection(),N=N.replace(/\t/g,W).replace(/[^\n]/g,a).split(`
`),t.replaceSelections(N)}else t.replaceRange(N,s,p);i.visualMode?(s=ht(T[0].anchor,T[0].head)?T[0].anchor:T[0].head,t.setCursor(s),_t(t,!1)):t.setCursor(ft(p,0,-1))}},incrementNumberToken:function(t,r){for(var i=t.getCursor(),a=t.getLine(i.line),s=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,u,p,T,x;(u=s.exec(a))!==null&&(p=u.index,T=p+u[0].length,!(i.ch<T)););if(!(!r.backtrack&&T<=i.ch)){if(u){var N=u[2]||u[4],W=u[3]||u[5],Y=r.increase?1:-1,oe={"0b":2,0:8,"":10,"0x":16}[N.toLowerCase()],te=parseInt(u[1]+W,oe)+Y*r.repeat;x=te.toString(oe);var ne=N?new Array(W.length-x.length+1+u[1].length).join("0"):"";x.charAt(0)==="-"?x="-"+N+ne+x.substr(1):x=N+ne+x;var ve=new _(i.line,p),ue=new _(i.line,T);t.replaceRange(x,ve,ue)}else return;t.setCursor(new _(i.line,p+x.length-1))}},repeatLastEdit:function(t,r,i){var a=i.lastEditInputState;if(!!a){var s=r.repeat;s&&r.repeatIsExplicit?i.lastEditInputState.repeatOverride=s:s=i.lastEditInputState.repeatOverride||s,Ce(t,i,s,!1)}},indent:function(t,r){t.indentLine(t.getCursor().line,r.indentRight)},exitInsertMode:Nn};function ze(t,r){Ae[t]=r}function He(t,r){var i=t.state.vim,a=i.insertMode||i.visualMode,s=Math.min(Math.max(t.firstLine(),r.line),t.lastLine()),u=yt(t,s)-1+!!a,p=Math.min(Math.max(0,r.ch),u);return new _(s,p)}function St(t){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}function ft(t,r,i){return typeof r=="object"&&(i=r.ch,r=r.line),new _(t.line+r,t.ch+i)}function an(t,r,i,a){for(var s,u=[],p=[],T=0;T<r.length;T++){var x=r[T];i=="insert"&&x.context!="insert"||x.context&&x.context!=i||a.operator&&x.type=="action"||!(s=ur(t,x.keys))||(s=="partial"&&u.push(x),s=="full"&&p.push(x))}return{partial:u.length&&u,full:p.length&&p}}function ur(t,r){if(r.slice(-11)=="<character>"){var i=r.length-11,a=t.slice(0,i),s=r.slice(0,i);return a==s&&t.length>i?"full":s.indexOf(a)==0?"partial":!1}else return t==r?"full":r.indexOf(t)==0?"partial":!1}function Zn(t){var r=/^.*(<[^>]+>)$/.exec(t),i=r?r[1]:t.slice(-1);if(i.length>1)switch(i){case"<CR>":i=`
`;break;case"<Space>":i=" ";break;default:i="";break}return i}function Cn(t,r,i){return function(){for(var a=0;a<i;a++)r(t)}}function tt(t){return new _(t.line,t.ch)}function Ot(t,r){return t.ch==r.ch&&t.line==r.line}function ht(t,r){return t.line<r.line||t.line==r.line&&t.ch<r.ch}function Ut(t,r){return arguments.length>2&&(r=Ut.apply(void 0,Array.prototype.slice.call(arguments,1))),ht(t,r)?t:r}function Jt(t,r){return arguments.length>2&&(r=Jt.apply(void 0,Array.prototype.slice.call(arguments,1))),ht(t,r)?r:t}function cr(t,r,i){var a=ht(t,r),s=ht(r,i);return a&&s}function yt(t,r){return t.getLine(r).length}function Lr(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Nr(t){return t.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function fr(t,r,i){var a=yt(t,r),s=new Array(i-a+1).join(" ");t.setCursor(new _(r,a)),t.replaceRange(s,t.getCursor())}function sn(t,r){var i=[],a=t.listSelections(),s=tt(t.clipPos(r)),u=!Ot(r,s),p=t.getCursor("head"),T=ot(a,p),x=Ot(a[T].head,a[T].anchor),N=a.length-1,W=N-T>T?N:0,Y=a[W].anchor,oe=Math.min(Y.line,s.line),te=Math.max(Y.line,s.line),ne=Y.ch,ve=s.ch,ue=a[W].head.ch-ne,Re=ve-ne;ue>0&&Re<=0?(ne++,u||ve--):ue<0&&Re>=0?(ne--,x||ve++):ue<0&&Re==-1&&(ne--,ve++);for(var Se=oe;Se<=te;Se++){var Pe={anchor:new _(Se,ne),head:new _(Se,ve)};i.push(Pe)}return t.setSelections(i),r.ch=ve,Y.ch=ne,Y}function hr(t,r,i){for(var a=[],s=0;s<i;s++){var u=ft(r,s,0);a.push({anchor:u,head:u})}t.setSelections(a,0)}function ot(t,r,i){for(var a=0;a<t.length;a++){var s=i!="head"&&Ot(t[a].anchor,r),u=i!="anchor"&&Ot(t[a].head,r);if(s||u)return a}return-1}function dr(t,r){var i=r.lastSelection,a=function(){var u=t.listSelections(),p=u[0],T=u[u.length-1],x=ht(p.anchor,p.head)?p.anchor:p.head,N=ht(T.anchor,T.head)?T.head:T.anchor;return[x,N]},s=function(){var u=t.getCursor(),p=t.getCursor(),T=i.visualBlock;if(T){var x=T.width,N=T.height;p=new _(u.line+N,u.ch+x);for(var W=[],Y=u.line;Y<p.line;Y++){var oe=new _(Y,u.ch),te=new _(Y,p.ch),ne={anchor:oe,head:te};W.push(ne)}t.setSelections(W)}else{var ve=i.anchorMark.find(),ue=i.headMark.find(),Re=ue.line-ve.line,Se=ue.ch-ve.ch;p={line:p.line+Re,ch:Re?p.ch:Se+p.ch},i.visualLine&&(u=new _(u.line,0),p=new _(p.line,yt(t,p.line))),t.setSelection(u,p)}return[u,p]};return r.visualMode?a():s()}function Bn(t,r){var i=r.sel.anchor,a=r.sel.head;r.lastPastedText&&(a=t.posFromIndex(t.indexFromPos(i)+r.lastPastedText.length),r.lastPastedText=null),r.lastSelection={anchorMark:t.setBookmark(i),headMark:t.setBookmark(a),anchor:tt(i),head:tt(a),visualMode:r.visualMode,visualLine:r.visualLine,visualBlock:r.visualBlock}}function Qn(t,r,i){var a=t.state.vim.sel,s=a.head,u=a.anchor,p;return ht(i,r)&&(p=i,i=r,r=p),ht(s,u)?(s=Ut(r,s),u=Jt(u,i)):(u=Ut(r,u),s=Jt(s,i),s=ft(s,0,-1),s.ch==-1&&s.line!=t.firstLine()&&(s=new _(s.line-1,yt(t,s.line-1)))),[u,s]}function An(t,r,s){var a=t.state.vim;r=r||a.sel;var s=s||a.visualLine?"line":a.visualBlock?"block":"char",u=Yn(t,r,s);t.setSelections(u.ranges,u.primary)}function Yn(t,r,i,a){var s=tt(r.head),u=tt(r.anchor);if(i=="char"){var p=!a&&!ht(r.head,r.anchor)?1:0,T=ht(r.head,r.anchor)?1:0;return s=ft(r.head,0,p),u=ft(r.anchor,0,T),{ranges:[{anchor:u,head:s}],primary:0}}else if(i=="line"){if(ht(r.head,r.anchor))s.ch=0,u.ch=yt(t,u.line);else{u.ch=0;var x=t.lastLine();s.line>x&&(s.line=x),s.ch=yt(t,s.line)}return{ranges:[{anchor:u,head:s}],primary:0}}else if(i=="block"){var N=Math.min(u.line,s.line),W=u.ch,Y=Math.max(u.line,s.line),oe=s.ch;W<oe?oe+=1:W+=1;for(var te=Y-N+1,ne=s.line==N?0:te-1,ve=[],ue=0;ue<te;ue++)ve.push({anchor:new _(N+ue,W),head:new _(N+ue,oe)});return{ranges:ve,primary:ne}}}function pr(t){var r=t.getCursor("head");return t.getSelection().length==1&&(r=Ut(r,t.getCursor("anchor"))),r}function _t(t,r){var i=t.state.vim;r!==!1&&t.setCursor(He(t,i.sel.head)),Bn(t,i),i.visualMode=!1,i.visualLine=!1,i.visualBlock=!1,i.insertMode||b.signal(t,"vim-mode-change",{mode:"normal"})}function Xn(t,r,i){var a=t.getRange(r,i);if(/\n\s*$/.test(a)){var s=a.split(`
`);s.pop();for(var u,u=s.pop();s.length>0&&u&&re(u);u=s.pop())i.line--,i.ch=0;u?(i.line--,i.ch=yt(t,i.line)):i.ch=0}}function En(t,r,i){r.ch=0,i.ch=0,i.line++}function Kt(t){if(!t)return 0;var r=t.search(/\S/);return r==-1?t.length:r}function Sn(t,r,i,a,s){for(var u=pr(t),p=t.getLine(u.line),T=u.ch,x=s?R[0]:C[0];!x(p.charAt(T));)if(T++,T>=p.length)return null;a?x=C[0]:(x=R[0],x(p.charAt(T))||(x=R[1]));for(var N=T,W=T;x(p.charAt(N))&&N<p.length;)N++;for(;x(p.charAt(W))&&W>=0;)W--;if(W++,r){for(var Y=N;/\s/.test(p.charAt(N))&&N<p.length;)N++;if(Y==N){for(var oe=W;/\s/.test(p.charAt(W-1))&&W>0;)W--;W||(W=oe)}}return{start:new _(u.line,W),end:new _(u.line,N)}}function oi(t,r,i){var a=r;if(!b.findMatchingTag||!b.findEnclosingTag)return{start:a,end:a};var s=b.findMatchingTag(t,r)||b.findEnclosingTag(t,r);return!s||!s.open||!s.close?{start:a,end:a}:i?{start:s.open.from,end:s.close.to}:{start:s.open.to,end:s.close.from}}function Vr(t,r,i){Ot(r,i)||me.jumpList.add(t,r,i)}function Or(t,r){me.lastCharacterSearch.increment=t,me.lastCharacterSearch.forward=r.forward,me.lastCharacterSearch.selectedCharacter=r.selectedCharacter}var Gr={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},er={bracket:{isComplete:function(t){if(t.nextCh===t.symb){if(t.depth++,t.depth>=1)return!0}else t.nextCh===t.reverseSymb&&t.depth--;return!1}},section:{init:function(t){t.curMoveThrough=!0,t.symb=(t.forward?"]":"[")===t.symb?"{":"}"},isComplete:function(t){return t.index===0&&t.nextCh===t.symb}},comment:{isComplete:function(t){var r=t.lastCh==="*"&&t.nextCh==="/";return t.lastCh=t.nextCh,r}},method:{init:function(t){t.symb=t.symb==="m"?"{":"}",t.reverseSymb=t.symb==="{"?"}":"{"},isComplete:function(t){return t.nextCh===t.symb}},preprocess:{init:function(t){t.index=0},isComplete:function(t){if(t.nextCh==="#"){var r=t.lineText.match(/^#(\w+)/)[1];if(r==="endif"){if(t.forward&&t.depth===0)return!0;t.depth++}else if(r==="if"){if(!t.forward&&t.depth===0)return!0;t.depth--}if(r==="else"&&t.depth===0)return!0}return!1}}};function Et(t,r,i,a){var s=tt(t.getCursor()),u=i?1:-1,p=i?t.lineCount():-1,T=s.ch,x=s.line,N=t.getLine(x),W={lineText:N,nextCh:N.charAt(T),lastCh:null,index:T,symb:a,reverseSymb:(i?{")":"(","}":"{"}:{"(":")","{":"}"})[a],forward:i,depth:0,curMoveThrough:!1},Y=Gr[a];if(!Y)return s;var oe=er[Y].init,te=er[Y].isComplete;for(oe&&oe(W);x!==p&&r;){if(W.index+=u,W.nextCh=W.lineText.charAt(W.index),!W.nextCh){if(x+=u,W.lineText=t.getLine(x)||"",u>0)W.index=0;else{var ne=W.lineText.length;W.index=ne>0?ne-1:0}W.nextCh=W.lineText.charAt(W.index)}te(W)&&(s.line=x,s.ch=W.index,r--)}return W.nextCh||W.curMoveThrough?new _(x,W.index):s}function Jr(t,r,i,a,s){var u=r.line,p=r.ch,T=t.getLine(u),x=i?1:-1,N=a?C:R;if(s&&T==""){if(u+=x,T=t.getLine(u),!ye(t,u))return null;p=i?0:T.length}for(;;){if(s&&T=="")return{from:0,to:0,line:u};for(var W=x>0?T.length:-1,Y=W,oe=W;p!=W;){for(var te=!1,ne=0;ne<N.length&&!te;++ne)if(N[ne](T.charAt(p))){for(Y=p;p!=W&&N[ne](T.charAt(p));)p+=x;if(oe=p,te=Y!=oe,Y==r.ch&&u==r.line&&oe==Y+x)continue;return{from:Math.min(Y,oe+1),to:Math.max(Y,oe),line:u}}te||(p+=x)}if(u+=x,!ye(t,u))return null;T=t.getLine(u),p=x>0?0:T.length}}function kt(t,r,i,a,s,u){var p=tt(r),T=[];(a&&!s||!a&&s)&&i++;for(var x=!(a&&s),N=0;N<i;N++){var W=Jr(t,r,a,u,x);if(!W){var Y=yt(t,t.lastLine());T.push(a?{line:t.lastLine(),from:Y,to:Y}:{line:0,from:0,to:0});break}T.push(W),r=new _(W.line,a?W.to-1:W.from)}var oe=T.length!=i,te=T[0],ne=T.pop();return a&&!s?(!oe&&(te.from!=p.ch||te.line!=p.line)&&(ne=T.pop()),new _(ne.line,ne.from)):a&&s?new _(ne.line,ne.to-1):!a&&s?(!oe&&(te.to!=p.ch||te.line!=p.line)&&(ne=T.pop()),new _(ne.line,ne.to)):new _(ne.line,ne.from)}function gr(t,r,i,a,s){var u=r,p=new _(u.line+i.repeat-1,1/0),T=t.clipPos(p);return T.ch--,s||(a.lastHPos=1/0,a.lastHSPos=t.charCoords(T,"div").left),p}function lt(t,r,i,a){for(var s=t.getCursor(),u=s.ch,p,T=0;T<r;T++){var x=t.getLine(s.line);if(p=Zr(u,x,a,i,!0),p==-1)return null;u=p}return new _(t.getCursor().line,p)}function Wn(t,r){var i=t.getCursor().line;return He(t,new _(i,r-1))}function Wt(t,r,i,a){!Te(i,G)||(r.marks[i]&&r.marks[i].clear(),r.marks[i]=t.setBookmark(a))}function Zr(t,r,i,a,s){var u;return a?(u=r.indexOf(i,t+1),u!=-1&&!s&&(u-=1)):(u=r.lastIndexOf(i,t-1),u!=-1&&!s&&(u+=1)),u}function mr(t,r,i,a,s){var u=r.line,p=t.firstLine(),T=t.lastLine(),x,N,W=u;function Y(ue){return!t.getLine(ue)}function oe(ue,Re,Se){return Se?Y(ue)!=Y(ue+Re):!Y(ue)&&Y(ue+Re)}if(a){for(;p<=W&&W<=T&&i>0;)oe(W,a)&&i--,W+=a;return new _(W,0)}var te=t.state.vim;if(te.visualLine&&oe(u,1,!0)){var ne=te.sel.anchor;oe(ne.line,-1,!0)&&(!s||ne.line!=u)&&(u+=1)}var ve=Y(u);for(W=u;W<=T&&i;W++)oe(W,1,!0)&&(!s||Y(W)!=ve)&&i--;for(N=new _(W,0),W>T&&!ve?ve=!0:s=!1,W=u;W>p&&!((!s||Y(W)==ve||W==u)&&oe(W,-1,!0));W--);return x=new _(W,0),{start:x,end:N}}function Ir(t,r,i,a,s){function u(N){N.pos+N.dir<0||N.pos+N.dir>=N.line.length?N.line=null:N.pos+=N.dir}function p(N,W,Y,oe){var te=N.getLine(W),ne={line:te,ln:W,pos:Y,dir:oe};if(ne.line==="")return{ln:ne.ln,pos:ne.pos};var ve=ne.pos;for(u(ne);ne.line!==null;){if(ve=ne.pos,se(ne.line[ne.pos]))if(s){for(u(ne);ne.line!==null&&re(ne.line[ne.pos]);)ve=ne.pos,u(ne);return{ln:ne.ln,pos:ve+1}}else return{ln:ne.ln,pos:ne.pos+1};u(ne)}return{ln:ne.ln,pos:ve+1}}function T(N,W,Y,oe){var te=N.getLine(W),ne={line:te,ln:W,pos:Y,dir:oe};if(ne.line==="")return{ln:ne.ln,pos:ne.pos};var ve=ne.pos;for(u(ne);ne.line!==null;){if(!re(ne.line[ne.pos])&&!se(ne.line[ne.pos]))ve=ne.pos;else if(se(ne.line[ne.pos]))return s?re(ne.line[ne.pos+1])?{ln:ne.ln,pos:ne.pos+1}:{ln:ne.ln,pos:ve}:{ln:ne.ln,pos:ve};u(ne)}return ne.line=te,s&&re(ne.line[ne.pos])?{ln:ne.ln,pos:ne.pos}:{ln:ne.ln,pos:ve}}for(var x={ln:r.line,pos:r.ch};i>0;)a<0?x=T(t,x.ln,x.pos,a):x=p(t,x.ln,x.pos,a),i--;return new _(x.ln,x.pos)}function kn(t,r,i,a){function s(x,N){if(N.pos+N.dir<0||N.pos+N.dir>=N.line.length){if(N.ln+=N.dir,!ye(x,N.ln)){N.line=null,N.ln=null,N.pos=null;return}N.line=x.getLine(N.ln),N.pos=N.dir>0?0:N.line.length-1}else N.pos+=N.dir}function u(x,N,W,Y){var ue=x.getLine(N),oe=ue==="",te={line:ue,ln:N,pos:W,dir:Y},ne={ln:te.ln,pos:te.pos},ve=te.line==="";for(s(x,te);te.line!==null;){if(ne.ln=te.ln,ne.pos=te.pos,te.line===""&&!ve)return{ln:te.ln,pos:te.pos};if(oe&&te.line!==""&&!re(te.line[te.pos]))return{ln:te.ln,pos:te.pos};se(te.line[te.pos])&&!oe&&(te.pos===te.line.length-1||re(te.line[te.pos+1]))&&(oe=!0),s(x,te)}var ue=x.getLine(ne.ln);ne.pos=0;for(var Re=ue.length-1;Re>=0;--Re)if(!re(ue[Re])){ne.pos=Re;break}return ne}function p(x,N,W,Y){var ve=x.getLine(N),oe={line:ve,ln:N,pos:W,dir:Y},te={ln:oe.ln,pos:null},ne=oe.line==="";for(s(x,oe);oe.line!==null;){if(oe.line===""&&!ne)return te.pos!==null?te:{ln:oe.ln,pos:oe.pos};if(se(oe.line[oe.pos])&&te.pos!==null&&!(oe.ln===te.ln&&oe.pos+1===te.pos))return te;oe.line!==""&&!re(oe.line[oe.pos])&&(ne=!1,te={ln:oe.ln,pos:oe.pos}),s(x,oe)}var ve=x.getLine(te.ln);te.pos=0;for(var ue=0;ue<ve.length;++ue)if(!re(ve[ue])){te.pos=ue;break}return te}for(var T={ln:r.line,pos:r.ch};i>0;)a<0?T=p(t,T.ln,T.pos,a):T=u(t,T.ln,T.pos,a),i--;return new _(T.ln,T.pos)}function Xt(t,r,i,a){var s=r,u,p,T={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[i],x={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[i],N=t.getLine(s.line).charAt(s.ch),W=N===x?1:0;if(u=t.scanForBracket(new _(s.line,s.ch+W),-1,void 0,{bracketRegex:T}),p=t.scanForBracket(new _(s.line,s.ch+W),1,void 0,{bracketRegex:T}),!u||!p)return{start:s,end:s};if(u=u.pos,p=p.pos,u.line==p.line&&u.ch>p.ch||u.line>p.line){var Y=u;u=p,p=Y}return a?p.ch+=1:u.ch+=1,{start:u,end:p}}function Tn(t,r,i,a){var s=tt(r),u=t.getLine(s.line),p=u.split(""),T,x,N,W,Y=p.indexOf(i);if(s.ch<Y?s.ch=Y:Y<s.ch&&p[s.ch]==i&&(x=s.ch,--s.ch),p[s.ch]==i&&!x)T=s.ch+1;else for(N=s.ch;N>-1&&!T;N--)p[N]==i&&(T=N+1);if(T&&!x)for(N=T,W=p.length;N<W&&!x;N++)p[N]==i&&(x=N);return!T||!x?{start:s,end:s}:(a&&(--T,++x),{start:new _(s.line,T),end:new _(s.line,x)})}A("pcre",!0,"boolean");function vr(){}vr.prototype={getQuery:function(){return me.query},setQuery:function(t){me.query=t},getOverlay:function(){return this.searchOverlay},setOverlay:function(t){this.searchOverlay=t},isReversed:function(){return me.isReversed},setReversed:function(t){me.isReversed=t},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(t){this.annotate=t}};function It(t){var r=t.state.vim;return r.searchState_||(r.searchState_=new vr)}function yr(t){return nr(t,"/")}function tr(t){return pn(t,"/")}function nr(t,r){var i=pn(t,r)||[];if(!i.length)return[];var a=[];if(i[0]===0){for(var s=0;s<i.length;s++)typeof i[s]=="number"&&a.push(t.substring(i[s]+1,i[s+1]));return a}}function pn(t,r){r||(r="/");for(var i=!1,a=[],s=0;s<t.length;s++){var u=t.charAt(s);!i&&u==r&&a.push(s),i=!i&&u=="\\"}return a}function $n(t){for(var r="|(){",i="}",a=!1,s=[],u=-1;u<t.length;u++){var p=t.charAt(u)||"",T=t.charAt(u+1)||"",x=T&&r.indexOf(T)!=-1;a?((p!=="\\"||!x)&&s.push(p),a=!1):p==="\\"?(a=!0,T&&i.indexOf(T)!=-1&&(x=!0),(!x||T==="\\")&&s.push(p)):(s.push(p),x&&T!=="\\"&&s.push("\\"))}return s.join("")}var Zt={"\\n":`
`,"\\r":"\r","\\t":"	"};function Un(t){for(var r=!1,i=[],a=-1;a<t.length;a++){var s=t.charAt(a)||"",u=t.charAt(a+1)||"";Zt[s+u]?(i.push(Zt[s+u]),a++):r?(i.push(s),r=!1):s==="\\"?(r=!0,ie(u)||u==="$"?i.push("$"):u!=="/"&&u!=="\\"&&i.push("\\")):(s==="$"&&i.push("$"),i.push(s),u==="/"&&i.push("\\"))}return i.join("")}var _r={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	","\\&":"&"};function Hn(t){for(var r=new b.StringStream(t),i=[];!r.eol();){for(;r.peek()&&r.peek()!="\\";)i.push(r.next());var a=!1;for(var s in _r)if(r.match(s,!0)){a=!0,i.push(_r[s]);break}a||i.push(r.next())}return i.join("")}function ln(t,r,i){var a=me.registerController.getRegister("/");if(a.setText(t),t instanceof RegExp)return t;var s=tr(t),u,p;if(!s.length)u=t;else{u=t.substring(0,s[0]);var T=t.substring(s[0]);p=T.indexOf("i")!=-1}if(!u)return null;ke("pcre")||(u=$n(u)),i&&(r=/^[^A-Z]*$/.test(u));var x=new RegExp(u,r||p?"im":"m");return x}function en(t){typeof t=="string"&&(t=document.createElement(t));for(var r,i=1;i<arguments.length;i++)if(!!(r=arguments[i]))if(typeof r!="object"&&(r=document.createTextNode(r)),r.nodeType)t.appendChild(r);else for(var a in r)!Object.prototype.hasOwnProperty.call(r,a)||(a[0]==="$"?t.style[a.slice(1)]=r[a]:t.setAttribute(a,r[a]));return t}function at(t,r){var i=en("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},r);t.openNotification?t.openNotification(i,{bottom:!0,duration:5e3}):alert(i.innerText)}function jn(t,r){return en(document.createDocumentFragment(),en("span",{$fontFamily:"monospace",$whiteSpace:"pre"},t,en("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),r&&en("span",{$color:"#888"},r))}function gn(t,r){var i=jn(r.prefix,r.desc);if(t.openDialog)t.openDialog(i,r.onClose,{onKeyDown:r.onKeyDown,onKeyUp:r.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:r.value});else{var a="";typeof r.prefix!="string"&&r.prefix&&(a+=r.prefix.textContent),r.desc&&(a+=" "+r.desc),r.onClose(prompt(a,""))}}function mn(t,r){if(t instanceof RegExp&&r instanceof RegExp){for(var i=["global","multiline","ignoreCase","source"],a=0;a<i.length;a++){var s=i[a];if(t[s]!==r[s])return!1}return!0}return!1}function un(t,r,i,a){if(!!r){var s=It(t),u=ln(r,!!i,!!a);if(!!u)return cn(t,u),mn(u,s.getQuery())||s.setQuery(u),u}}function wr(t){if(t.source.charAt(0)=="^")var r=!0;return{token:function(i){if(r&&!i.sol()){i.skipToEnd();return}var a=i.match(t,!1);if(a)return a[0].length==0?(i.next(),"searching"):!i.sol()&&(i.backUp(1),!t.exec(i.next()+a[0]))?(i.next(),null):(i.match(t),"searching");for(;!i.eol()&&(i.next(),!i.match(t,!1)););},query:t}}var Rn=0;function cn(t,r){clearTimeout(Rn),Rn=setTimeout(function(){if(!!t.state.vim){var i=It(t),a=i.getOverlay();(!a||r!=a.query)&&(a&&t.removeOverlay(a),a=wr(r),t.addOverlay(a),t.showMatchesOnScrollbar&&(i.getScrollbarAnnotate()&&i.getScrollbarAnnotate().clear(),i.setScrollbarAnnotate(t.showMatchesOnScrollbar(r))),i.setOverlay(a))}},50)}function vn(t,r,i,a){return a===void 0&&(a=1),t.operation(function(){for(var s=t.getCursor(),u=t.getSearchCursor(i,s),p=0;p<a;p++){var T=u.find(r);if(p==0&&T&&Ot(u.from(),s)){var x=r?u.from():u.to();T=u.find(r),T&&!T[0]&&Ot(u.from(),x)&&t.getLine(x.line).length==x.ch&&(T=u.find(r))}if(!T&&(u=t.getSearchCursor(i,r?new _(t.lastLine()):new _(t.firstLine(),0)),!u.find(r)))return}return u.from()})}function Qr(t,r,i,a,s){return a===void 0&&(a=1),t.operation(function(){var u=t.getCursor(),p=t.getSearchCursor(i,u),T=p.find(!r);!s.visualMode&&T&&Ot(p.from(),u)&&p.find(!r);for(var x=0;x<a;x++)if(T=p.find(r),!T&&(p=t.getSearchCursor(i,r?new _(t.lastLine()):new _(t.firstLine(),0)),!p.find(r)))return;return[p.from(),p.to()]})}function br(t){var r=It(t);t.removeOverlay(It(t).getOverlay()),r.setOverlay(null),r.getScrollbarAnnotate()&&(r.getScrollbarAnnotate().clear(),r.setScrollbarAnnotate(null))}function xr(t,r,i){return typeof t!="number"&&(t=t.line),r instanceof Array?Te(t,r):typeof i=="number"?t>=r&&t<=i:t==r}function Vt(t){var r=t.getScrollInfo(),i=6,a=10,s=t.coordsChar({left:0,top:i+r.top},"local"),u=r.clientHeight-a+r.top,p=t.coordsChar({left:0,top:u},"local");return{top:s.line,bottom:p.line}}function Ln(t,r,i){if(i=="'"||i=="`")return me.jumpList.find(t,-1)||new _(0,0);if(i==".")return Cr(t);var a=r.marks[i];return a&&a.find()}function Cr(t){for(var r=t.doc.history.done,i=r.length;i--;)if(r[i].changes)return tt(r[i].changes[0].to)}var yn=function(){this.buildCommandMap_()};yn.prototype={processCommand:function(t,r,i){var a=this;t.operation(function(){t.curOp.isVimOp=!0,a._processCommand(t,r,i)})},_processCommand:function(t,r,i){var a=t.state.vim,s=me.registerController.getRegister(":"),u=s.toString();a.visualMode&&_t(t);var p=new b.StringStream(r);s.setText(r);var T=i||{};T.input=r;try{this.parseInput_(t,p,T)}catch(Y){throw at(t,Y.toString()),Y}var x,N;if(!T.commandName)T.line!==void 0&&(N="move");else if(x=this.matchCommand_(T.commandName),x){if(N=x.name,x.excludeFromCommandHistory&&s.setText(u),this.parseCommandArgs_(p,T,x),x.type=="exToKey"){for(var W=0;W<x.toKeys.length;W++)Me.handleKey(t,x.toKeys[W],"mapping");return}else if(x.type=="exToEx"){this.processCommand(t,x.toInput);return}}if(!N){at(t,'Not an editor command ":'+r+'"');return}try{Ar[N](t,T),(!x||!x.possiblyAsync)&&T.callback&&T.callback()}catch(Y){throw at(t,Y.toString()),Y}},parseInput_:function(t,r,i){r.eatWhile(":"),r.eat("%")?(i.line=t.firstLine(),i.lineEnd=t.lastLine()):(i.line=this.parseLineSpec_(t,r),i.line!==void 0&&r.eat(",")&&(i.lineEnd=this.parseLineSpec_(t,r)));var a=r.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return a?i.commandName=a[1]:i.commandName=r.match(/.*/)[0],i},parseLineSpec_:function(t,r){var i=r.match(/^(\d+)/);if(i)return parseInt(i[1],10)-1;switch(r.next()){case".":return this.parseLineSpecOffset_(r,t.getCursor().line);case"$":return this.parseLineSpecOffset_(r,t.lastLine());case"'":var a=r.next(),s=Ln(t,t.state.vim,a);if(!s)throw new Error("Mark not set");return this.parseLineSpecOffset_(r,s.line);case"-":case"+":return r.backUp(1),this.parseLineSpecOffset_(r,t.getCursor().line);default:r.backUp(1);return}},parseLineSpecOffset_:function(t,r){var i=t.match(/^([+-])?(\d+)/);if(i){var a=parseInt(i[2],10);i[1]=="-"?r-=a:r+=a}return r},parseCommandArgs_:function(t,r,i){if(!t.eol()){r.argString=t.match(/.*/)[0];var a=i.argDelimiter||/\s+/,s=Lr(r.argString).split(a);s.length&&s[0]&&(r.args=s)}},matchCommand_:function(t){for(var r=t.length;r>0;r--){var i=t.substring(0,r);if(this.commandMap_[i]){var a=this.commandMap_[i];if(a.name.indexOf(t)===0)return a}}return null},buildCommandMap_:function(){this.commandMap_={};for(var t=0;t<B.length;t++){var r=B[t],i=r.shortName||r.name;this.commandMap_[i]=r}},map:function(t,r,i){if(t!=":"&&t.charAt(0)==":"){if(i)throw Error("Mode not supported for ex mappings");var a=t.substring(1);r!=":"&&r.charAt(0)==":"?this.commandMap_[a]={name:a,type:"exToEx",toInput:r.substring(1),user:!0}:this.commandMap_[a]={name:a,type:"exToKey",toKeys:r,user:!0}}else if(r!=":"&&r.charAt(0)==":"){var s={keys:t,type:"keyToEx",exArgs:{input:r.substring(1)}};i&&(s.context=i),I.unshift(s)}else{var s={keys:t,type:"keyToKey",toKeys:r};i&&(s.context=i),I.unshift(s)}},unmap:function(t,r){if(t!=":"&&t.charAt(0)==":"){if(r)throw Error("Mode not supported for ex mappings");var i=t.substring(1);if(this.commandMap_[i]&&this.commandMap_[i].user)return delete this.commandMap_[i],!0}else for(var a=t,s=0;s<I.length;s++)if(a==I[s].keys&&I[s].context===r)return I.splice(s,1),!0}};var Ar={colorscheme:function(t,r){if(!r.args||r.args.length<1){at(t,t.getOption("theme"));return}t.setOption("theme",r.args[0])},map:function(t,r,i){var a=r.args;if(!a||a.length<2){t&&at(t,"Invalid mapping: "+r.input);return}Qt.map(a[0],a[1],i)},imap:function(t,r){this.map(t,r,"insert")},nmap:function(t,r){this.map(t,r,"normal")},vmap:function(t,r){this.map(t,r,"visual")},unmap:function(t,r,i){var a=r.args;(!a||a.length<1||!Qt.unmap(a[0],i))&&t&&at(t,"No such mapping: "+r.input)},move:function(t,r){ct.processCommand(t,t.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:r.line+1})},set:function(t,r){var i=r.args,a=r.setCfg||{};if(!i||i.length<1){t&&at(t,"Invalid mapping: "+r.input);return}var s=i[0].split("="),u=s[0],p=s[1],T=!1;if(u.charAt(u.length-1)=="?"){if(p)throw Error("Trailing characters: "+r.argString);u=u.substring(0,u.length-1),T=!0}p===void 0&&u.substring(0,2)=="no"&&(u=u.substring(2),p=!1);var x=U[u]&&U[u].type=="boolean";if(x&&p==null&&(p=!0),!x&&p===void 0||T){var N=ke(u,t,a);N instanceof Error?at(t,N.message):N===!0||N===!1?at(t," "+(N?"":"no")+u):at(t,"  "+u+"="+N)}else{var W=we(u,p,t,a);W instanceof Error&&at(t,W.message)}},setlocal:function(t,r){r.setCfg={scope:"local"},this.set(t,r)},setglobal:function(t,r){r.setCfg={scope:"global"},this.set(t,r)},registers:function(t,r){var i=r.args,a=me.registerController.registers,s=`----------Registers----------

`;if(i){var u;i=i.join("");for(var T=0;T<i.length;T++)if(u=i.charAt(T),!!me.registerController.isValidRegister(u)){var x=a[u]||new et;s+='"'+u+"    "+x.toString()+`
`}}else for(var u in a){var p=a[u].toString();p.length&&(s+='"'+u+"    "+p+`
`)}at(t,s)},sort:function(t,r){var i,a,s,u,p;function T(){if(r.argString){var De=new b.StringStream(r.argString);if(De.eat("!")&&(i=!0),De.eol())return;if(!De.eatSpace())return"Invalid arguments";var Ue=De.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!Ue&&!De.eol())return"Invalid arguments";if(Ue[1]){a=Ue[1].indexOf("i")!=-1,s=Ue[1].indexOf("u")!=-1;var Ft=Ue[1].indexOf("d")!=-1||Ue[1].indexOf("n")!=-1&&1,nn=Ue[1].indexOf("x")!=-1&&1,Pt=Ue[1].indexOf("o")!=-1&&1;if(Ft+nn+Pt>1)return"Invalid arguments";u=Ft&&"decimal"||nn&&"hex"||Pt&&"octal"}Ue[2]&&(p=new RegExp(Ue[2].substr(1,Ue[2].length-2),a?"i":""))}}var x=T();if(x){at(t,x+": "+r.argString);return}var N=r.line||t.firstLine(),W=r.lineEnd||r.line||t.lastLine();if(N==W)return;var Y=new _(N,0),oe=new _(W,yt(t,W)),te=t.getRange(Y,oe).split(`
`),ne=p||(u=="decimal"?/(-?)([\d]+)/:u=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:u=="octal"?/([0-7]+)/:null),ve=u=="decimal"?10:u=="hex"?16:u=="octal"?8:null,ue=[],Re=[];if(u||p)for(var Se=0;Se<te.length;Se++){var Pe=p?te[Se].match(p):null;Pe&&Pe[0]!=""?ue.push(Pe):!p&&ne.exec(te[Se])?ue.push(te[Se]):Re.push(te[Se])}else Re=te;function nt(De,Ue){if(i){var Ft;Ft=De,De=Ue,Ue=Ft}a&&(De=De.toLowerCase(),Ue=Ue.toLowerCase());var nn=u&&ne.exec(De),Pt=u&&ne.exec(Ue);return nn?(nn=parseInt((nn[1]+nn[2]).toLowerCase(),ve),Pt=parseInt((Pt[1]+Pt[2]).toLowerCase(),ve),nn-Pt):De<Ue?-1:1}function wt(De,Ue){if(i){var Ft;Ft=De,De=Ue,Ue=Ft}return a&&(De[0]=De[0].toLowerCase(),Ue[0]=Ue[0].toLowerCase()),De[0]<Ue[0]?-1:1}if(ue.sort(p?wt:nt),p)for(var Se=0;Se<ue.length;Se++)ue[Se]=ue[Se].input;else u||Re.sort(nt);if(te=i?ue.concat(Re):Re.concat(ue),s){var bt=te,Mt;te=[];for(var Se=0;Se<bt.length;Se++)bt[Se]!=Mt&&te.push(bt[Se]),Mt=bt[Se]}t.replaceRange(te.join(`
`),Y,oe)},vglobal:function(t,r){this.global(t,r)},global:function(t,r){var i=r.argString;if(!i){at(t,"Regular Expression missing from global");return}var a=r.commandName[0]==="v",s=r.line!==void 0?r.line:t.firstLine(),u=r.lineEnd||r.line||t.lastLine(),p=yr(i),T=i,x;if(p.length&&(T=p[0],x=p.slice(1,p.length).join("/")),T)try{un(t,T,!0,!0)}catch{at(t,"Invalid regex: "+T);return}for(var N=It(t).getQuery(),W=[],Y=s;Y<=u;Y++){var oe=t.getLineHandle(Y),te=N.test(oe.text);te!==a&&W.push(x?oe:oe.text)}if(!x){at(t,W.join(`
`));return}var ne=0,ve=function(){if(ne<W.length){var ue=W[ne++],Re=t.getLineNumber(ue);if(Re==null){ve();return}var Se=Re+1+x;Qt.processCommand(t,Se,{callback:ve})}};ve()},substitute:function(t,r){if(!t.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var i=r.argString,a=i?nr(i,i[0]):[],s,u="",p,T,x,N=!1,W=!1;if(a.length)s=a[0],ke("pcre")&&s!==""&&(s=new RegExp(s).source),u=a[1],u!==void 0&&(ke("pcre")?u=Hn(u.replace(/([^\\])&/g,"$1$$&")):u=Un(u),me.lastSubstituteReplacePart=u),p=a[2]?a[2].split(" "):[];else if(i&&i.length){at(t,"Substitutions should be of the form :s/pattern/replace/");return}if(p&&(T=p[0],x=parseInt(p[1]),T&&(T.indexOf("c")!=-1&&(N=!0),T.indexOf("g")!=-1&&(W=!0),ke("pcre")?s=s+"/"+T:s=s.replace(/\//g,"\\/")+"/"+T)),s)try{un(t,s,!0,!0)}catch{at(t,"Invalid regex: "+s);return}if(u=u||me.lastSubstituteReplacePart,u===void 0){at(t,"No previous substitute regular expression");return}var Y=It(t),oe=Y.getQuery(),te=r.line!==void 0?r.line:t.getCursor().line,ne=r.lineEnd||te;te==t.firstLine()&&ne==t.lastLine()&&(ne=1/0),x&&(te=ne,ne=te+x-1);var ve=He(t,new _(te,0)),ue=t.getSearchCursor(oe,ve);tn(t,N,W,te,ne,ue,oe,u,r.callback)},redo:b.commands.redo,undo:b.commands.undo,write:function(t){b.commands.save?b.commands.save(t):t.save&&t.save()},nohlsearch:function(t){br(t)},yank:function(t){var r=tt(t.getCursor()),i=r.line,a=t.getLine(i);me.registerController.pushText("0","yank",a,!0,!0)},delmarks:function(t,r){if(!r.argString||!Lr(r.argString)){at(t,"Argument required");return}for(var i=t.state.vim,a=new b.StringStream(Lr(r.argString));!a.eol();){a.eatSpace();var s=a.pos;if(!a.match(/[a-zA-Z]/,!1)){at(t,"Invalid argument: "+r.argString.substring(s));return}var u=a.next();if(a.match("-",!0)){if(!a.match(/[a-zA-Z]/,!1)){at(t,"Invalid argument: "+r.argString.substring(s));return}var p=u,T=a.next();if(Z(p)&&Z(T)||_e(p)&&_e(T)){var x=p.charCodeAt(0),N=T.charCodeAt(0);if(x>=N){at(t,"Invalid argument: "+r.argString.substring(s));return}for(var W=0;W<=N-x;W++){var Y=String.fromCharCode(x+W);delete i.marks[Y]}}else{at(t,"Invalid argument: "+p+"-");return}}else delete i.marks[u]}}},Qt=new yn;function tn(t,r,i,a,s,u,p,T,x){t.state.vim.exMode=!0;var N=!1,W,Y,oe;function te(){t.operation(function(){for(;!N;)ne(),ue();Re()})}function ne(){var Pe=t.getRange(u.from(),u.to()),nt=Pe.replace(p,T),wt=u.to().line;u.replace(nt),Y=u.to().line,s+=Y-wt,oe=Y<wt}function ve(){var Pe=W&&tt(u.to()),nt=u.findNext();return nt&&!nt[0]&&Pe&&Ot(u.from(),Pe)&&(nt=u.findNext()),nt}function ue(){for(;ve()&&xr(u.from(),a,s);)if(!(!i&&u.from().line==Y&&!oe)){t.scrollIntoView(u.from(),30),t.setSelection(u.from(),u.to()),W=u.from(),N=!1;return}N=!0}function Re(Pe){if(Pe&&Pe(),t.focus(),W){t.setCursor(W);var nt=t.state.vim;nt.exMode=!1,nt.lastHPos=nt.lastHSPos=W.ch}x&&x()}function Se(Pe,nt,wt){b.e_stop(Pe);var bt=b.keyName(Pe);switch(bt){case"Y":ne(),ue();break;case"N":ue();break;case"A":var Mt=x;x=void 0,t.operation(te),x=Mt;break;case"L":ne();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":Re(wt);break}return N&&Re(wt),!0}if(ue(),N){at(t,"No matches for "+p.source);return}if(!r){te(),x&&x();return}gn(t,{prefix:en("span","replace with ",en("strong",T)," (y/n/a/q/l)"),onKeyDown:Se})}b.keyMap.vim={attach:$,detach:H,call:Q};function Nn(t){var r=t.state.vim,i=me.macroModeState,a=me.registerController.getRegister("."),s=i.isPlaying,u=i.lastInsertModeChanges;s||(t.off("change",Fr),b.off(t.getInputField(),"keydown",q)),!s&&r.insertModeRepeat>1&&(Ce(t,r,r.insertModeRepeat-1,!0),r.lastEditInputState.repeatOverride=r.insertModeRepeat),delete r.insertModeRepeat,r.insertMode=!1,t.setCursor(t.getCursor().line,t.getCursor().ch-1),t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.toggleOverwrite(!1),a.setText(u.changes.join("")),b.signal(t,"vim-mode-change",{mode:"normal"}),i.isRecording&&$t(i)}function Mr(t){I.unshift(t)}function Er(t,r,i,a,s){var u={keys:t,type:r};u[r]=i,u[r+"Args"]=a;for(var p in s)u[p]=s[p];Mr(u)}A("insertModeEscKeysTimeout",200,"number"),b.keyMap["vim-insert"]={fallthrough:["default"],attach:$,detach:H,call:Q},b.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:$,detach:H,call:Q};function ai(t,r,i,a){var s=me.registerController.getRegister(a);if(a==":"){s.keyBuffer[0]&&Qt.processCommand(t,s.keyBuffer[0]),i.isPlaying=!1;return}var u=s.keyBuffer,p=0;i.isPlaying=!0,i.replaySearchQueries=s.searchQueries.slice(0);for(var T=0;T<u.length;T++)for(var x=u[T],N,W;x;)if(N=/<\w+-.+?>|<\w+>|./.exec(x),W=N[0],x=x.substring(N.index+W.length),Me.handleKey(t,W,"macro"),r.insertMode){var Y=s.insertModeChanges[p++].changes;me.macroModeState.lastInsertModeChanges.changes=Y,be(t,Y,1),Nn(t)}i.isPlaying=!1}function On(t,r){if(!t.isPlaying){var i=t.latestRegister,a=me.registerController.getRegister(i);a&&a.pushText(r)}}function $t(t){if(!t.isPlaying){var r=t.latestRegister,i=me.registerController.getRegister(r);i&&i.pushInsertModeChanges&&i.pushInsertModeChanges(t.lastInsertModeChanges)}}function rr(t,r){if(!t.isPlaying){var i=t.latestRegister,a=me.registerController.getRegister(i);a&&a.pushSearchQuery&&a.pushSearchQuery(r)}}function Fr(t,r){var i=me.macroModeState,a=i.lastInsertModeChanges;if(!i.isPlaying)for(;r;){if(a.expectCursorActivityForChange=!0,a.ignoreCount>1)a.ignoreCount--;else if(r.origin=="+input"||r.origin=="paste"||r.origin===void 0){var s=t.listSelections().length;s>1&&(a.ignoreCount=s);var u=r.text.join(`
`);a.maybeReset&&(a.changes=[],a.maybeReset=!1),u&&(t.state.overwrite&&!/\n/.test(u)?a.changes.push([u]):a.changes.push(u))}r=r.next}}function Sr(t){var r=t.state.vim;if(r.insertMode){var i=me.macroModeState;if(i.isPlaying)return;var a=i.lastInsertModeChanges;a.expectCursorActivityForChange?a.expectCursorActivityForChange=!1:a.maybeReset=!0}else t.curOp.isVimOp||Pr(t,r)}function Pr(t,r){var i=t.getCursor("anchor"),a=t.getCursor("head");if(r.visualMode&&!t.somethingSelected()?_t(t,!1):!r.visualMode&&!r.insertMode&&t.somethingSelected()&&(r.visualMode=!0,r.visualLine=!1,b.signal(t,"vim-mode-change",{mode:"visual"})),r.visualMode){var s=ht(a,i)?0:-1,u=ht(a,i)?-1:0;a=ft(a,0,s),i=ft(i,0,u),r.sel={anchor:i,head:a},Wt(t,r,"<",Ut(a,i)),Wt(t,r,">",Jt(a,i))}else r.insertMode||(r.lastHPos=t.getCursor().ch)}function st(t){this.keyName=t}function q(t){var r=me.macroModeState,i=r.lastInsertModeChanges,a=b.keyName(t);if(!a)return;function s(){return i.maybeReset&&(i.changes=[],i.maybeReset=!1),i.changes.push(new st(a)),!0}(a.indexOf("Delete")!=-1||a.indexOf("Backspace")!=-1)&&b.lookupKey(a,"vim-insert",s)}function Ce(t,r,i,a){var s=me.macroModeState;s.isPlaying=!0;var u=!!r.lastEditActionCommand,p=r.inputState;function T(){u?ct.processAction(t,r,r.lastEditActionCommand):ct.evalInput(t,r)}function x(W){if(s.lastInsertModeChanges.changes.length>0){W=r.lastEditActionCommand?W:1;var Y=s.lastInsertModeChanges;be(t,Y.changes,W)}}if(r.inputState=r.lastEditInputState,u&&r.lastEditActionCommand.interlaceInsertRepeat)for(var N=0;N<i;N++)T(),x(1);else a||T(),x(i);r.inputState=p,r.insertMode&&!a&&Nn(t),s.isPlaying=!1}function be(t,r,i){function a(Y){return typeof Y=="string"?b.commands[Y](t):Y(t),!0}var s=t.getCursor("head"),u=me.macroModeState.lastInsertModeChanges.visualBlock;u&&(hr(t,s,u+1),i=t.listSelections().length,t.setCursor(s));for(var p=0;p<i;p++){u&&t.setCursor(ft(s,p,0));for(var T=0;T<r.length;T++){var x=r[T];if(x instanceof st)b.lookupKey(x.keyName,"vim-insert",a);else if(typeof x=="string")t.replaceSelection(x);else{var N=t.getCursor(),W=ft(N,0,x[0].length);t.replaceRange(x[0],N,W),t.setCursor(W)}}}u&&t.setCursor(ft(s,0,1))}function Qe(t){var r=new t.constructor;return Object.keys(t).forEach(function(i){var a=t[i];Array.isArray(a)?a=a.slice():a&&typeof a=="object"&&a.constructor!=Object&&(a=Qe(a)),r[i]=a}),t.sel&&(r.sel={head:t.sel.head&&tt(t.sel.head),anchor:t.sel.anchor&&tt(t.sel.anchor)}),r}function mt(t,r,i){var a=!1,s=Me.maybeInitVimState_(t),u=s.visualBlock||s.wasInVisualBlock,p=t.isInMultiSelectMode();if(s.wasInVisualBlock&&!p?s.wasInVisualBlock=!1:p&&s.visualBlock&&(s.wasInVisualBlock=!0),r=="<Esc>"&&!s.insertMode&&!s.visualMode&&p&&s.status=="<Esc>")pt(t);else if(u||!p||t.inVirtualSelectionMode)a=Me.handleKey(t,r,i);else{var T=Qe(s);t.operation(function(){t.curOp.isVimOp=!0,t.forEachSelection(function(){var x=t.getCursor("head"),N=t.getCursor("anchor"),W=ht(x,N)?0:-1,Y=ht(x,N)?-1:0;x=ft(x,0,W),N=ft(N,0,Y),t.state.vim.sel.head=x,t.state.vim.sel.anchor=N,a=Me.handleKey(t,r,i),t.virtualSelection&&(t.state.vim=Qe(T))}),t.curOp.cursorActivity&&!a&&(t.curOp.cursorActivity=!1),t.state.vim=s},!0)}return a&&!s.visualMode&&!s.insert&&s.visualMode!=t.somethingSelected()&&Pr(t,s),a}return Ze(),Me}function v(b){return b.Vim=y(b),b.Vim}l.Vim=v(l)})})();class TextEditorInterface extends lib$1.ITextEditor{editor;doc;transaction;onDidFinishTransaction;constructor(d){super(),this.editor=d,this.doc=d.getDoc(),this.transaction=!1,this.onDidFinishTransaction=null}getCursorPosition(){const{line:d,ch:l}=this.doc.getCursor();return new lib$1.Point(d,l)}setCursorPosition(d){this.doc.setCursor({line:d.row,ch:d.column})}setSelectionRange(d){this.doc.setSelection({line:d.start.row,ch:d.start.column},{line:d.end.row,ch:d.end.column})}getLastRow(){return this.doc.lineCount()-1}acceptsTableEdit(){return!0}getLine(d){return this.doc.getLine(d)}insertLine(d,l){const y=this.getLastRow();if(d>y){const v=this.getLine(y);this.doc.replaceRange(`
`+l,{line:y,ch:v.length},{line:y,ch:v.length})}else this.doc.replaceRange(l+`
`,{line:d,ch:0},{line:d,ch:0})}deleteLine(d){const l=this.getLastRow();if(d>=l)if(l>0){const y=this.getLine(l-1),v=this.getLine(l);this.doc.replaceRange("",{line:l-1,ch:y.length},{line:l,ch:v.length})}else{const y=this.getLine(l);this.doc.replaceRange("",{line:l,ch:0},{line:l,ch:y.length})}else this.doc.replaceRange("",{line:d,ch:0},{line:d+1,ch:0})}replaceLines(d,l,y){const v=this.getLastRow();if(l>v){const b=this.getLine(v);this.doc.replaceRange(y.join(`
`),{line:d,ch:0},{line:v,ch:b.length})}else this.doc.replaceRange(y.join(`
`)+`
`,{line:d,ch:0},{line:l,ch:0})}transact(d){this.transaction=!0,d(),this.transaction=!1,this.onDidFinishTransaction&&this.onDidFinishTransaction.call(void 0)}}const encode=f=>Array.from(f).map(v=>v.codePointAt(0).toString(2)).map(v=>Array.from(v).map(b=>b==="1"?"\u200D":"\u200C").join("")).join("\u200B"),decode=f=>f.split("\u200B").map(v=>Array.from(v).map(b=>b==="\u200D"?"1":"0").join("")).map(v=>String.fromCodePoint(parseInt(v,2))).join(""),useEditorStore=defineStore("editor",{state:()=>({cm:null}),actions:{async init(f){const d=useTitleBarStore(),l=document.getElementById(f);l.value="",codemirror$1.exports.commands.save=this.save,codemirror$1.exports.Vim.defineEx("wq","wq",this.saveAndQuit),codemirror$1.exports.Vim.defineEx("quit","q",this.quitWithoutSaving),codemirror$1.exports.Vim.defineEx("help","h",this.help);const y=codemirror$1.exports.fromTextArea(l,{mode:"markdown",theme:"markdown",lineNumbers:!0,lineWrapping:!0,indentUnit:2,tabSize:2,indentWithTabs:!0,showCursorWhenSelecting:!0,keyMap:"vim"});y.addKeyMap({"Ctrl-]":()=>{codemirror$1.exports.Vim.exitInsertMode(y)}});const v=new TextEditorInterface(y),b=new lib$1.TableEditor(v),_=lib$1.optionsWithDefaults({smartCursor:!0}),k=codemirror$1.exports.normalizeKeyMap({Tab:B=>{const z=Array(B.getOption("indentUnit")+1).join(" ");B.replaceSelection(z)},Enter:"newlineAndIndentContinueMarkdownList"});y.setOption("extraKeys",k);const I=codemirror$1.exports.normalizeKeyMap({Tab:()=>{b.nextCell(_)},"Shift-Tab":()=>{b.previousCell(_)},Enter:()=>{b.nextRow(_)},"Ctrl-Enter":()=>{b.escape(_)},"Cmd-Enter":()=>{b.escape(_)},"Shift-Ctrl-Left":()=>{b.alignColumn(lib$1.Alignment.LEFT,_)},"Shift-Cmd-Left":()=>{b.alignColumn(lib$1.Alignment.LEFT,_)},"Shift-Ctrl-Right":()=>{b.alignColumn(lib$1.Alignment.RIGHT,_)},"Shift-Cmd-Right":()=>{b.alignColumn(lib$1.Alignment.RIGHT,_)},"Shift-Ctrl-Up":()=>{b.alignColumn(lib$1.Alignment.CENTER,_)},"Shift-Cmd-Up":()=>{b.alignColumn(lib$1.Alignment.CENTER,_)},"Shift-Ctrl-Down":()=>{b.alignColumn(lib$1.Alignment.NONE,_)},"Shift-Cmd-Down":()=>{b.alignColumn(lib$1.Alignment.NONE,_)},"Ctrl-Left":()=>{b.moveFocus(0,-1,_)},"Cmd-Left":()=>{b.moveFocus(0,-1,_)},"Ctrl-Right":()=>{b.moveFocus(0,1,_)},"Cmd-Right":()=>{b.moveFocus(0,1,_)},"Ctrl-Up":()=>{b.moveFocus(-1,0,_)},"Cmd-Up":()=>{b.moveFocus(-1,0,_)},"Ctrl-Down":()=>{b.moveFocus(1,0,_)},"Cmd-Down":()=>{b.moveFocus(1,0,_)},"Ctrl-K Ctrl-I":()=>{b.insertRow(_)},"Cmd-K Cmd-I":()=>{b.insertRow(_)},"Ctrl-L Ctrl-I":()=>{b.deleteRow(_)},"Cmd-L Cmd-I":()=>{b.deleteRow(_)},"Ctrl-K Ctrl-J":()=>{b.insertColumn(_)},"Cmd-K Cmd-J":()=>{b.insertColumn(_)},"Ctrl-L Ctrl-J":()=>{b.deleteColumn(_)},"Cmd-L Cmd-J":()=>{b.deleteColumn(_)},"Alt-Shift-Ctrl-Left":()=>{b.moveColumn(-1,_)},"Alt-Shift-Cmd-Left":()=>{b.moveColumn(-1,_)},"Alt-Shift-Ctrl-Right":()=>{b.moveColumn(1,_)},"Alt-Shift-Cmd-Right":()=>{b.moveColumn(1,_)},"Alt-Shift-Ctrl-Up":()=>{b.moveRow(-1,_)},"Alt-Shift-Cmd-Up":()=>{b.moveRow(-1,_)},"Alt-Shift-Ctrl-Down":()=>{b.moveRow(1,_)},"Alt-Shift-Cmd-Down":()=>{b.moveRow(1,_)}});function K(){b.cursorIsInTable(_)?y.setOption("extraKeys",I):(y.setOption("extraKeys",k),b.resetSmartCursor())}return y.on("cursorActivity",()=>{v.transaction||K()}),y.on("changes",()=>{v.transaction||K()}),v.onDidFinishTransaction=()=>{K()},logseq.on("ui:visible:changed",async B=>{if(!!B&&y){const z=await logseq.Editor.getSelectedBlocks();if(z&&z.length>1){let P=await logseq.Editor.getCurrentPage();P||(P=await logseq.Editor.getPage(z[0].page.id)),d.setTitle(P.name),d.setMode("Multiple");const H=z.map($=>{const Q=encode($.uuid);return`> ((${$.uuid}))${Q}:
${$.content}`}).join(`
`);y.setValue(H)}else{const P=await logseq.Editor.getCurrentBlock();if(P){y.setValue(P.content);let H=await logseq.Editor.getCurrentPage();H||(H=await logseq.Editor.getPage(P.page.id)),d.setTitle(H.name),d.setMode("Single")}}y.refresh(),y.focus()}}),this.cm=y,y},async save(){if(this.cm){if(useTitleBarStore().mode==="Single"){const d=await logseq.Editor.getCurrentBlock();d&&await logseq.Editor.updateBlock(d.uuid,this.cm.getValue())}else{const l=this.cm.getValue().split(/^> \(\(([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})\)\)([\u200b-\u200f\uFEFF\u202a-\u202e]+):\n/gim);for(let y=1;y<l.length;y+=3){const v=l[y],b=l[y+1];if(v!==decode(b))continue;const _=l[y+2];await logseq.Editor.updateBlock(v,_)}}logseq.App.showMsg("Saved back to Logseq!"),logseq.hideMainUI({restoreEditingCursor:!0})}},async saveAndQuit(){await this.save(),logseq.hideMainUI({restoreEditingCursor:!0})},quitWithoutSaving(){logseq.hideMainUI({restoreEditingCursor:!0}),logseq.App.showMsg("Quit without saving!")},help(){useHelpStore().open()}}}),_hoisted_1$2={class:"flex-1"},_hoisted_2$1=createBaseVNode("textarea",{id:"editor"},null,-1),_hoisted_3$1=[_hoisted_2$1],_sfc_main$2=defineComponent({__name:"Editor",setup(f){const d=useEditorStore();return onMounted(async()=>{d.init("editor")}),(l,y)=>(openBlock(),createElementBlock("div",_hoisted_1$2,_hoisted_3$1))}}),Editor_vue_vue_type_style_index_0_lang="",_hoisted_1$1={class:"flex-none px-4 h-12 text-gray-300 flex justify-between items-center bg-[#1d262f] text-sm border-b border-gray-600"},_hoisted_2=createBaseVNode("div",{class:"text-gray-600 inline-block"},null,-1),_hoisted_3={class:""},_hoisted_4=createBaseVNode("span",{class:"text-gray-600"},"Logseq VIM Editor / ",-1),_hoisted_5={class:"text-gray-600"},_hoisted_6={class:"flex gap-1"},_hoisted_7=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[createBaseVNode("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),_hoisted_8=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[createBaseVNode("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),_sfc_main$1=defineComponent({__name:"TitleBar",setup(f){const d=useTitleBarStore(),l=useEditorStore(),y=()=>{l.saveAndQuit()},v=()=>{l.quitWithoutSaving()};return(b,_)=>{const k=NIcon;return openBlock(),createElementBlock("div",_hoisted_1$1,[_hoisted_2,createBaseVNode("div",_hoisted_3,[_hoisted_4,createTextVNode(" "+toDisplayString(unref(d).title)+" ",1),createBaseVNode("span",_hoisted_5," / ["+toDisplayString(unref(d).mode==="Single"?"Single block":"Multiple blocks")+"]",1)]),createBaseVNode("div",_hoisted_6,[createVNode(k,{size:"20",onClick:y,class:"cursor-pointer",title:"Save and quit"},{default:withCtx(()=>[_hoisted_7]),_:1}),createVNode(k,{size:"20",onClick:v,class:"cursor-pointer",title:"Quit"},{default:withCtx(()=>[_hoisted_8]),_:1})])])}}}),_export_sfc=(f,d)=>{const l=f.__vccOpts||f;for(const[y,v]of d)l[y]=v;return l},_sfc_main={},_hoisted_1={class:"w-full h-full flex flex-col"};function _sfc_render(f,d){const l=_sfc_main$1,y=_sfc_main$2,v=_sfc_main$3;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(l),createVNode(y),createVNode(v)])}const App=_export_sfc(_sfc_main,[["render",_sfc_render]]),style="",settingsVersion="v1",defaultSettings={keyBindings:{openVimEditor:"mod+shift+e"},settingsVersion,disabled:!1},initSettings=()=>{let f=logseq.settings;(!f||f.settingsVersion!=defaultSettings.settingsVersion)&&(f=defaultSettings,logseq.updateSettings(f))},getSettings=(f,d=void 0)=>{const l=logseq.settings,y=Object.assign(defaultSettings,l);return f?y[f]?y[f]:d:y},model={openModel(){logseq.showMainUI({autoFocus:!0})}};function main(){initSettings();const f=getSettings("keyBindings");logseq.setMainUIInlineStyle({position:"fixed",zIndex:11}),logseq.provideModel(model);const d=createApp(App);d.use(createPinia()),d.mount("#app");const l=async()=>{if(!await logseq.Editor.getCurrentBlock()){logseq.App.showMsg("Please select a block");return}model.openModel()};logseq.Editor.registerSlashCommand("VIM Editor",l),logseq.Editor.registerBlockContextMenuItem("VIM Editor",l),logseq.App.registerCommandPalette({key:"vim-editor-open-vim-editor",label:"VIM Editor",keybinding:{mode:"global",binding:f.openVimEditor}},l)}logseq.ready(main);
